<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Phoenix: Routing cheatsheet</title>
  <link href="s/main.css" rel="stylesheet" />
  <script src="s/main.js"></script>
</head>

<body onload="start()">
  <div class="breadcrumbs"><a href="/">Home</a> / <a href="index.html">cheatsheets</a> / Phoenix: Routing cheatsheet</div>
  <div class="edit">
      <a href="https://github.com/kjk/blog/blob/master/www/cheatsheets/devhints\phoenix-routing.md" >edit</a>
  </div>
  <div class="toc">
<b>Main</b>: <a href="#showing-routes">Showing routes</a>, <a href="#single-routes">Single routes</a>, <a href="#resources">Resources</a>, <a href="#path-helpers">Path helpers</a>, <a href="#nested-resources">Nested resources</a>, <a href="#scoped-routes">Scoped routes</a><br></div>


  <div id="start"></div>
  <div id="wrapped-content"></div>
<div id="content">
<h3 id="showing-routes">Showing routes</h3>

<pre><code class="sh">mix phx.routes        <span class="hljs-comment"># 1.3+</span>
mix phoenix.routes    <span class="hljs-comment"># 1.2 and below</span>
</code></pre>
<p>See: <a href="https://hexdocs.pm/phoenix/Mix.Tasks.Phoenix.Routes.html">Mix.Tasks.Phoenix.Routes</a> <em>(hexdocs.pm)</em></p>
<h3 id="single-routes">Single routes</h3>

<pre><code class="elixir">get <span class="hljs-string">&quot;/&quot;</span>, PageController, <span class="hljs-symbol">:index</span>
</code></pre>
<p>Also: <code>put</code> <code>post</code> <code>patch</code> <code>options</code> <code>delete</code> <code>head</code></p>
<h3 id="resources">Resources</h3>

<pre><code class="elixir">resources <span class="hljs-string">&quot;/users&quot;</span>, UserController
resources <span class="hljs-string">&quot;/users&quot;</span>, UserController, <span class="hljs-symbol">only:</span> [<span class="hljs-symbol">:index</span>, <span class="hljs-symbol">:show</span>]
resources <span class="hljs-string">&quot;/users&quot;</span>, UserController, <span class="hljs-symbol">except:</span> [<span class="hljs-symbol">:delete</span>]
</code></pre>

<pre><code class="elixir">resources <span class="hljs-string">&quot;/users&quot;</span>, UserController,
  <span class="hljs-symbol">as:</span> <span class="hljs-symbol">:person</span>    <span class="hljs-comment"># helper name (person_path)</span>
  <span class="hljs-symbol">name:</span> <span class="hljs-symbol">:person</span>  <span class="hljs-comment"># ...?</span>
  <span class="hljs-symbol">param:</span> <span class="hljs-symbol">:id</span>     <span class="hljs-comment"># name of parameter for this resource</span>
</code></pre>
<p>Generates these routes:</p>

<table>
<thead>
<tr>
<th>Method</th>
<th>Path</th>
<th>Helper</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td><code>/users</code></td>
<td><code>user_path(:index)</code></td>
</tr>
<tr>
<td>GET</td>
<td><code>/users/new</code></td>
<td><code>user_path(:new)</code></td>
</tr>
<tr>
<td>GET</td>
<td><code>/users/:id</code></td>
<td><code>user_path(:show, user)</code></td>
</tr>
<tr>
<td>GET</td>
<td><code>/users/:id/edit</code></td>
<td><code>user_path(:edit, user)</code></td>
</tr>
<tr>
<td>POST</td>
<td><code>/users</code></td>
<td><code>user_path(:create, user)</code></td>
</tr>
<tr>
<td>PATCH/PUT</td>
<td><code>/users/:id</code></td>
<td><code>user_path(:update, user)</code></td>
</tr>
<tr>
<td>DELETE</td>
<td><code>/users/:id</code></td>
<td><code>user_path(:delete, user)</code></td>
</tr>
</tbody>
</table>
<p>See: <a href="https://hexdocs.pm/phoenix/Phoenix.Router.html#resources/4">resources/4</a> <em>(hexdocs.pm)</em></p>
<h3 id="path-helpers">Path helpers</h3>

<pre><code class="elixir">user_path(conn, <span class="hljs-symbol">:index</span>)                 <span class="hljs-comment"># → /users</span>
user_path(conn, <span class="hljs-symbol">:show</span>, <span class="hljs-number">17</span>)              <span class="hljs-comment"># → /users/17</span>
user_path(conn, <span class="hljs-symbol">:show</span>, %User{<span class="hljs-symbol">id:</span> <span class="hljs-number">17</span>})   <span class="hljs-comment"># → /users/17</span>
user_path(conn, <span class="hljs-symbol">:show</span>, <span class="hljs-number">17</span>, <span class="hljs-symbol">admin:</span> <span class="hljs-keyword">true</span>) <span class="hljs-comment"># → /users/17?admin=true</span>
</code></pre>

<pre><code class="elixir">user_url(conn, <span class="hljs-symbol">:index</span>) <span class="hljs-comment"># → &quot;http://localhost:4000/users&quot;</span>
</code></pre>

<pre><code class="elixir">MyApp.Router.Helpers.user_path(MyApp.Endpoint, <span class="hljs-symbol">:index</span>)
</code></pre>
<p>See: <a href="https://hexdocs.pm/phoenix/Phoenix.Router.html#module-helpers">Helpers</a> <em>(hexdocs.pm)</em></p>
<h3 id="nested-resources">Nested resources</h3>

<pre><code class="elixir">resources <span class="hljs-string">&quot;/users&quot;</span>, UserController <span class="hljs-keyword">do</span>
  resources <span class="hljs-string">&quot;/posts&quot;</span>, PostController
<span class="hljs-keyword">end</span>
</code></pre>

<pre><code class="elixir">user_post_path(<span class="hljs-symbol">:index</span>, <span class="hljs-number">17</span>)     <span class="hljs-comment"># → /users/17/posts</span>
user_post_path(<span class="hljs-symbol">:show</span>, <span class="hljs-number">17</span>, <span class="hljs-number">12</span>)  <span class="hljs-comment"># → /users/17/posts/12</span>
</code></pre>
<p>See: <a href="https://hexdocs.pm/phoenix/Phoenix.Router.html#module-scopes-and-resources">Scopes and resources</a> <em>(hexdocs.pm)</em></p>
<h3 id="scoped-routes">Scoped routes</h3>

<pre><code class="elixir">scope <span class="hljs-string">&quot;/admin&quot;</span> <span class="hljs-keyword">do</span>
  pipe_through <span class="hljs-symbol">:browser</span>
  resources <span class="hljs-string">&quot;/reviews&quot;</span>, MyApp.Admin.ReviewController
<span class="hljs-keyword">end</span>
<span class="hljs-comment"># reviews_path() -&gt; /admin/reviews</span>
</code></pre>

<pre><code class="elixir">scope <span class="hljs-string">&quot;/admin&quot;</span>, <span class="hljs-symbol">as:</span> <span class="hljs-symbol">:admin</span> <span class="hljs-symbol">do:</span> ... <span class="hljs-keyword">end</span>
<span class="hljs-comment"># admin_reviews_path() -&gt; /admin/reviews</span>
</code></pre>
<p>See: <a href="https://hexdocs.pm/phoenix/Phoenix.Router.html#scope/2">scope/2</a> <em>(hexdocs.pm)</em></p>

</div>
</body>  
</html>