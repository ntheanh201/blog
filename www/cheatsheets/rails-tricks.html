<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Rails tricks cheatsheet</title>
  <link href="s/main.css" rel="stylesheet" />
  <script src="s/main.js"></script>
</head>

<body onload="start()">
  <div class="breadcrumbs"><a href="/">Home</a> / <a href="index.html">cheatsheets</a> / Rails tricks cheatsheet</div>
  <div class="edit">
      <a href="https://github.com/kjk/blog/blob/master/www/cheatsheets/devhints\rails-tricks.md" >edit</a>
  </div>
  <div class="toc"></div>


  <div id="start"></div>
  <div id="wrapped-content"></div>
<div id="content">
<p>in config/environments/development.rb:</p>

<pre><code><span class="hljs-comment"># Source maps for Sass</span>
<span class="hljs-attr">config.sass.debug_info</span> = <span class="hljs-literal">true</span>
<span class="hljs-attr">config.sass.line_comments</span> = <span class="hljs-literal">false</span>

<span class="hljs-comment"># Don&#x27;t break apart</span>
<span class="hljs-attr">config.assets.debug</span> = <span class="hljs-literal">false</span>
</code></pre>
<p>Partial locals</p>

<pre><code>&lt;%= <span class="hljs-keyword">render</span> <span class="hljs-string">&#x27;article&#x27;</span>, full: true %&gt;
&lt;%= <span class="hljs-keyword">render</span> <span class="hljs-string">&#x27;article&#x27;</span> %&gt;

&lt;% <span class="hljs-keyword">if</span> local_assigns[:full] %&gt;
  ...
&lt;% end %&gt;
</code></pre>
<p>HTML in i18n</p>

<pre><code><span class="hljs-symbol">en:</span>
<span class="hljs-symbol">  read_more_html:</span> <span class="hljs-string">&quot;read &lt;b&gt;more&lt;/b&gt;...&quot;</span>
</code></pre>
<p>Exception handling:</p>

<pre><code># config/application.rb
config.exceptions_app = self.routes

<span class="hljs-keyword">get</span> <span class="hljs-string">&#x27;/404&#x27;</span>, to: <span class="hljs-string">&#x27;errors#not_found&#x27;</span>
<span class="hljs-keyword">get</span> <span class="hljs-string">&#x27;/500&#x27;</span>, to: <span class="hljs-string">&#x27;errors#server_error&#x27;</span>

<span class="hljs-keyword">class</span> <span class="hljs-symbol">ErrorsController</span>
  <span class="hljs-symbol">def</span> <span class="hljs-symbol">not_found</span>
    <span class="hljs-symbol">render</span> <span class="hljs-symbol">status: :<span class="hljs-symbol">not_found</span></span>
  <span class="hljs-symbol">end</span>
 <span class="hljs-symbol">end</span>
</code></pre>
<p>Rails updating:</p>

<pre><code>rake rai<span class="hljs-symbol">ls:up</span><span class="hljs-built_in">date</span>
</code></pre>
<p>Distinct pluck:</p>

<pre><code>Article<span class="hljs-selector-class">.distinct</span><span class="hljs-selector-class">.pluck</span>(<span class="hljs-string">&#x27;author&#x27;</span>)
</code></pre>
<p>Relation#merge</p>

<pre><code>scope :with_drafts, -&gt; {
  uniq.<span class="hljs-built_in">joins</span>(:articles).<span class="hljs-built_in">merge</span>(Article.draft)
}
</code></pre>
<p>Order</p>

<pre><code>scope :recent, -&gt; { <span class="hljs-keyword">order</span> <span class="hljs-title">created_at</span>: :desc }
</code></pre>
<p>Group by month</p>

<pre><code>.<span class="hljs-keyword">group</span>(<span class="hljs-string">&quot;to_char(created_at, &#x27;YYYY-MM&#x27;)&quot;</span>)
.<span class="hljs-keyword">group</span>(<span class="hljs-string">&quot;to_char(created_at, &#x27;YYYY-MM&#x27;)&quot;</span>).<span class="hljs-keyword">count</span>
</code></pre>

</div>
</body>  
</html>