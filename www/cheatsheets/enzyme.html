<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Enzyme cheatsheet</title>
  <link href="s/main.css" rel="stylesheet" />
  <script src="s/main.js"></script>
</head>

<body onload="start()">
  <div class="breadcrumbs"><a href="/">Home</a> / <a href="index.html">cheatsheets</a> / Enzyme cheatsheet</div>
  <div class="edit">
      <a href="https://github.com/kjk/blog/blob/master/www/cheatsheets/devhints/enzyme.md" >edit</a>
  </div>
  <div class="toc">
<b>Getting started</b>: <a href="#introduction">Introduction</a>, <a href="#mounting">Mounting</a>, <a href="#debugging">Debugging</a><br>
<b>Examples</b>: <a href="#basic-example">Basic example</a>, <a href="#props-and-state">Props and state</a>, <a href="#matching-elements">Matching elements</a>, <a href="#snapshots">Snapshots</a>, <a href="#traversions">Traversions</a>, <a href="#simulating-events">Simulating events</a><br>
<b>Installing</b>: <a href="#initial-setup">Initial setup</a>, <a href="#jest-snapshots">Jest snapshots</a><br>
<b>ReactWrapper</b>: <a href="#traversing">Traversing</a>, <a href="#actions">Actions</a>, <a href="#react-components">React components</a>, <a href="#mount">Mount</a>, <a href="#tests">Tests</a><br>
<a href="#references">References</a><br></div>


  <div id="start"></div>
  <div id="wrapped-content"></div>
<div id="content">
<h2 id="getting-started">Getting started</h2>
<h3 id="introduction">Introduction</h3>
<p><a href="http://airbnb.io/enzyme">Enzyme</a> lets you write unit tests for React components. This guide covers Enzyme 3.x.</p>

<ul>
<li><a href="https://enzymejs.github.io/enzyme/">Enzyme website</a> <em>(enzymejs.github.io)</em></li>
</ul>
<h3 id="mounting">Mounting</h3>

<pre><code class="js"><span class="hljs-keyword">import</span> {shallow, mount} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;enzyme&#x27;</span>
</code></pre>

<pre><code class="js">wrap = <span class="hljs-title function_">shallow</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyComponent</span> /&gt;</span></span>)
</code></pre>

<pre><code class="js">wrap = <span class="hljs-title function_">mount</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyComponent</span> /&gt;</span></span>)
</code></pre>
<p>Shallow wrapping doesn&#39;t descend down to sub-components.
A full mount also mounts sub-components.</p>
<p>See: <a href="http://airbnb.io/enzyme/docs/api/shallow.html">Shallow rendering</a>,
<a href="http://airbnb.io/enzyme/docs/api/mount.html">Full rendering</a></p>
<h3 id="debugging">Debugging</h3>

<pre><code class="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(wrap.<span class="hljs-title function_">debug</span>())
</code></pre>
<p>Shows HTML for debugging purposes.</p>
<p>See: <a href="http://airbnb.io/enzyme/docs/api/ReactWrapper/debug.html">debug()</a></p>
<h2 id="examples">Examples</h2>
<h3 id="basic-example">Basic example</h3>

<pre><code class="js"><span class="hljs-keyword">import</span> { shallow } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;enzyme&#x27;</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">MyComponent</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../MyComponent&#x27;</span>
</code></pre>

<pre><code class="js"><span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;works&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> wrap = <span class="hljs-title function_">shallow</span>(
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyComponent</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&#x27;Groot&#x27;</span> /&gt;</span></span>
  )

  <span class="hljs-title function_">expect</span>(wrap.<span class="hljs-title function_">text</span>()).<span class="hljs-title function_">toEqual</span>(<span class="hljs-string">&#x27;I am Groot&#x27;</span>)
})
</code></pre>
<h3 id="props-and-state">Props and state</h3>
<h4 id="setting">Setting</h4>

<pre><code class="js">wrap.<span class="hljs-title function_">setProps</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Moe&#x27;</span> })
wrap.<span class="hljs-title function_">setState</span>({ <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span> })
</code></pre>
<h4 id="asserting">Asserting</h4>

<pre><code class="js"><span class="hljs-title function_">expect</span>(wrap.<span class="hljs-title function_">prop</span>(<span class="hljs-string">&#x27;name&#x27;</span>)).<span class="hljs-title function_">toEqual</span>(<span class="hljs-string">&#x27;Moe&#x27;</span>)
<span class="hljs-title function_">expect</span>(wrap.<span class="hljs-title function_">state</span>(<span class="hljs-string">&#x27;show&#x27;</span>)).<span class="hljs-title function_">toEqual</span>(<span class="hljs-literal">true</span>)
</code></pre>

<pre><code class="js"><span class="hljs-title function_">expect</span>(<span class="hljs-string">&#x27;name&#x27;</span> <span class="hljs-keyword">in</span> wrap.<span class="hljs-title function_">props</span>()).<span class="hljs-title function_">toEqual</span>(<span class="hljs-string">&#x27;Moe&#x27;</span>)
<span class="hljs-title function_">expect</span>(<span class="hljs-string">&#x27;show&#x27;</span> <span class="hljs-keyword">in</span> wrap.<span class="hljs-title function_">state</span>()).<span class="hljs-title function_">toEqual</span>(<span class="hljs-literal">true</span>)
</code></pre>
<h3 id="matching-elements">Matching elements</h3>

<pre><code class="js"><span class="hljs-title function_">expect</span>(
  wrap.<span class="hljs-title function_">containsMatchingElement</span>(
    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>I am groot<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>
  )
).<span class="hljs-title function_">toBeTruthy</span>()
</code></pre>
<p><code>containsMatchingElement()</code> is probably the most useful assertion in Jest.</p>
<h3 id="snapshots">Snapshots</h3>

<pre><code class="js"><span class="hljs-title function_">expect</span>(wrap).<span class="hljs-title function_">toMatchSnapshot</span>()
</code></pre>
<p>Be sure you&#39;ve set up enzyme-to-json for snapshots (see <a href="#installing">Installing</a> below).</p>
<h3 id="traversions">Traversions</h3>

<pre><code class="js"><span class="hljs-title function_">expect</span>(
  wrap.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;button&#x27;</span>).<span class="hljs-title function_">text</span>()
).<span class="hljs-title function_">toEqual</span>(<span class="hljs-string">&#x27;Submit&#x27;</span>)
</code></pre>
<p>Use <code>.find()</code> to traverse down to nodes. It will return wrapper objects, too.</p>
<h3 id="simulating-events">Simulating events</h3>

<pre><code class="js">wrap.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;input&#x27;</span>).<span class="hljs-title function_">simulate</span>(<span class="hljs-string">&#x27;click&#x27;</span>)
</code></pre>
<h4 id="with-event-object-props">With event object props</h4>

<pre><code class="js">wrap.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;input&#x27;</span>).<span class="hljs-title function_">simulate</span>(<span class="hljs-string">&#x27;change&#x27;</span>, {
  <span class="hljs-attr">target</span>: { <span class="hljs-attr">value</span>: <span class="hljs-string">&#x27;hello&#x27;</span> }
})
</code></pre>
<h2 id="installing">Installing</h2>
<h3 id="initial-setup">Initial setup</h3>

<pre><code><span class="hljs-built_in">npm</span> install --save-dev enzyme <span class="hljs-string">\</span>
  enzyme-adapter-react-<span class="hljs-number">16</span> <span class="hljs-string">\</span>
  react-test-renderer
</code></pre>
<h4 id="test-setup-js">test/setup.js</h4>

<pre><code class="js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Enzyme</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;enzyme&#x27;</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Adapter</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;enzyme-adapter-react-16&#x27;</span>

<span class="hljs-title class_">Enzyme</span>.<span class="hljs-title function_">configure</span>({ <span class="hljs-attr">adapter</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Adapter</span>() })
</code></pre>
<h4 id="package-json">package.json</h4>

<pre><code class="js"><span class="hljs-string">&quot;jest&quot;</span>: {
  <span class="hljs-string">&quot;setupFiles&quot;</span>: [
    <span class="hljs-string">&quot;test/setup.js&quot;</span>
  ]
}
</code></pre>
<p>This configures Enzyme for React v16, and Jest to automatically configure Enzyme for you. There are other adapters in Enzyme&#39;s installation instructions.</p>
<p>See: <a href="http://airbnb.io/enzyme/#installation">Installation</a></p>
<h3 id="jest-snapshots">Jest snapshots</h3>

<pre><code><span class="hljs-built_in">npm</span> install --save-dev enzyme-<span class="hljs-keyword">to</span>-json
</code></pre>
<h4 id="package-json1">package.json</h4>

<pre><code class="js"><span class="hljs-string">&quot;jest&quot;</span>: {
  <span class="hljs-string">&quot;snapshotSerializers&quot;</span>: [
    <span class="hljs-string">&quot;enzyme-to-json/serializer&quot;</span>
  ]
}
</code></pre>
<h4 id="test">Test</h4>

<pre><code class="js"><span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;works&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
  wrap = <span class="hljs-title function_">mount</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyComponent</span> /&gt;</span></span>)
  <span class="hljs-title function_">expect</span>(wrap).<span class="hljs-title function_">toMatchSnapshot</span>()
})
</code></pre>
<p>Optional, but recommended: This allows you to use Enzyme wrappers with Jest snapshots.</p>
<p>See: <a href="https://www.npmjs.com/package/enzyme-to-json">enzyme-to-json</a></p>
<h2 id="reactwrapper">ReactWrapper</h2>
<h3 id="traversing">Traversing</h3>

<pre><code class="js">wrap.<span class="hljs-title function_">find</span>(<span class="hljs-string">&#x27;button&#x27;</span>)   <span class="hljs-comment">// → ReactWrapper</span>
wrap.<span class="hljs-title function_">filter</span>(<span class="hljs-string">&#x27;button&#x27;</span>) <span class="hljs-comment">// → ReactWrapper</span>
wrap.<span class="hljs-title function_">not</span>(<span class="hljs-string">&#x27;span&#x27;</span>)      <span class="hljs-comment">// → ReactWrapper (inverse of filter())</span>
wrap.<span class="hljs-title function_">children</span>()       <span class="hljs-comment">// → ReactWrapper</span>
wrap.<span class="hljs-title function_">parent</span>()         <span class="hljs-comment">// → ReactWrapper</span>
wrap.<span class="hljs-title function_">closest</span>(<span class="hljs-string">&#x27;div&#x27;</span>)   <span class="hljs-comment">// → ReactWrapper</span>
wrap.<span class="hljs-title function_">childAt</span>(<span class="hljs-number">0</span>)       <span class="hljs-comment">// → ReactWrapper</span>
wrap.<span class="hljs-title function_">at</span>(<span class="hljs-number">0</span>)            <span class="hljs-comment">// → ReactWrapper</span>
wrap.<span class="hljs-title function_">first</span>()          <span class="hljs-comment">// → ReactWrapper</span>
wrap.<span class="hljs-title function_">last</span>()           <span class="hljs-comment">// → ReactWrapper</span>
</code></pre>

<pre><code class="js">wrap.<span class="hljs-title function_">get</span>(<span class="hljs-number">0</span>)           <span class="hljs-comment">// → ReactElement</span>
wrap.<span class="hljs-title function_">getElement</span>()     <span class="hljs-comment">// → ReactElement</span>
wrap.<span class="hljs-title function_">getElements</span>()    <span class="hljs-comment">// → Array&lt;ReactElement&gt;</span>
wrap.<span class="hljs-title function_">getDOMNode</span>()     <span class="hljs-comment">// → DOMComponent</span>
</code></pre>
<p>See: <a href="http://airbnb.io/enzyme/docs/api/mount.html">Full rendering API</a></p>
<h3 id="actions">Actions</h3>

<pre><code class="js">wrap.<span class="hljs-title function_">simulate</span>(<span class="hljs-string">&#x27;click&#x27;</span>)
</code></pre>
<h3 id="react-components">React components</h3>

<pre><code class="js">wrap.<span class="hljs-title function_">setState</span>({ ··· })
wrap.<span class="hljs-title function_">setProps</span>({ ··· })
wrap.<span class="hljs-title function_">setContext</span>({ ··· })
</code></pre>

<pre><code class="js">wrap.<span class="hljs-title function_">state</span>()         <span class="hljs-comment">// get full state</span>
wrap.<span class="hljs-title function_">props</span>()         <span class="hljs-comment">// get full props</span>
wrap.<span class="hljs-title function_">context</span>()       <span class="hljs-comment">// get full context</span>
</code></pre>

<pre><code class="js">wrap.<span class="hljs-title function_">state</span>(<span class="hljs-string">&#x27;key&#x27;</span>)    <span class="hljs-comment">// → any</span>
wrap.<span class="hljs-title function_">prop</span>(<span class="hljs-string">&#x27;key&#x27;</span>)     <span class="hljs-comment">// → any</span>
wrap.<span class="hljs-title function_">context</span>(<span class="hljs-string">&#x27;key&#x27;</span>)  <span class="hljs-comment">// → any</span>
</code></pre>

<pre><code class="js">wrap.<span class="hljs-title function_">instance</span>()      <span class="hljs-comment">// → ReactComponent</span>
</code></pre>
<h3 id="mount">Mount</h3>

<pre><code class="js">wrap.<span class="hljs-title function_">mount</span>()
wrap.<span class="hljs-title function_">unmount</span>()
wrap.<span class="hljs-title function_">update</span>()      <span class="hljs-comment">// calls forceUpdate()</span>
</code></pre>
<h3 id="tests">Tests</h3>

<pre><code class="js">wrap.<span class="hljs-title function_">debug</span>()               <span class="hljs-comment">// → string</span>
wrap.<span class="hljs-title function_">html</span>()                <span class="hljs-comment">// → string</span>
wrap.<span class="hljs-title function_">text</span>()                <span class="hljs-comment">// → string</span>
wrap.<span class="hljs-title function_">type</span>()                <span class="hljs-comment">// → string | function</span>
wrap.<span class="hljs-title function_">name</span>()                <span class="hljs-comment">// → string</span>
wrap.<span class="hljs-title function_">is</span>(<span class="hljs-string">&#x27;.classname&#x27;</span>)      <span class="hljs-comment">// → boolean</span>
wrap.<span class="hljs-title function_">hasClass</span>(<span class="hljs-string">&#x27;class&#x27;</span>)     <span class="hljs-comment">// → boolean</span>
wrap.<span class="hljs-title function_">exists</span>()              <span class="hljs-comment">// → boolean</span>
wrap.<span class="hljs-title function_">contains</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> /&gt;</span></span>)     <span class="hljs-comment">// → boolean</span>
wrap.<span class="hljs-title function_">contains</span>([ <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> /&gt;</span></span> ]) <span class="hljs-comment">// → boolean</span>
wrap.<span class="hljs-title function_">some</span>(<span class="hljs-string">&#x27;.child&#x27;</span>)        <span class="hljs-comment">// → boolean</span>

wrap.<span class="hljs-title function_">someWhere</span>(<span class="hljs-function"><span class="hljs-params">n</span> =&gt;</span> n.<span class="hljs-title function_">hasClass</span>(<span class="hljs-string">&#x27;foo&#x27;</span>))

wrap.<span class="hljs-title function_">containsMatchingElement</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> /&gt;</span></span>)         <span class="hljs-comment">// → boolean</span>
wrap.<span class="hljs-title function_">containsAllMatchingElements</span>([ <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> /&gt;</span></span> ]) <span class="hljs-comment">// → boolean</span>
wrap.<span class="hljs-title function_">containsAnyMatchingElements</span>([ <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> /&gt;</span></span> ]) <span class="hljs-comment">// → boolean</span>
</code></pre>
<h2 id="references">References</h2>

<ul>
<li><a href="https://airbnb.io/enzyme">Enzyme website</a> <em>(airbnb.io)</em></li>
</ul>

</div>
</body>  
</html>