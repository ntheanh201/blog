<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Docker CLI cheatsheet</title>
  <link href="s/main.css" rel="stylesheet" />
  <script src="s/main.js"></script>
</head>

<body onload="start()">
  <div class="breadcrumbs"><a href="/">Home</a> / <a href="index.html">cheatsheets</a> / Docker CLI cheatsheet</div>
  <div class="edit">
      <a href="https://github.com/kjk/blog/blob/master/www/cheatsheets/devhints/docker.md" >edit</a>
  </div>
  <div class="toc">
<b>Manage images</b>: <a href="#-docker-build-">docker build</a>, <a href="#-docker-run-">docker run</a><br>
<b>Manage containers</b>: <a href="#-docker-create-">docker create</a>, <a href="#-docker-exec-">docker exec</a>, <a href="#-docker-start-">docker start</a>, <a href="#-docker-ps-">docker ps</a>, <a href="#-docker-logs-">docker logs</a><br>
<b>Images</b>: <a href="#-docker-images-">docker images</a>, <a href="#-docker-rmi-">docker rmi</a><br>
<b>Clean up</b>: <a href="#clean-all">Clean all</a>, <a href="#containers">Containers</a>, <a href="#images1">Images</a>, <a href="#volumes">Volumes</a><br>
<a href="#also-see">Also see</a><br></div>


  <div id="start"></div>
  <div id="wrapped-content"></div>
<div id="content">
<h2 id="manage-images">Manage images</h2>
<h3 id="-docker-build-"><code>docker build</code></h3>

<pre><code class="yml"><span class="hljs-string">docker</span> <span class="hljs-string">build</span> [<span class="hljs-string">options</span>] <span class="hljs-string">.</span>
  <span class="hljs-string">-t</span> <span class="hljs-string">&quot;app/container_name&quot;</span>    <span class="hljs-comment"># name</span>
  <span class="hljs-string">--build-arg</span> <span class="hljs-string">APP_HOME=$APP_HOME</span>    <span class="hljs-comment"># Set build-time variables</span>
</code></pre>
<p>Create an <code>image</code> from a Dockerfile.</p>
<h3 id="-docker-run-"><code>docker run</code></h3>

<pre><code class="yml"><span class="hljs-string">docker</span> <span class="hljs-string">run</span> [<span class="hljs-string">options</span>] <span class="hljs-string">IMAGE</span>
  <span class="hljs-comment"># see `docker create` for options</span>
</code></pre>
<h4 id="example">Example</h4>

<pre><code>$ docker <span class="hljs-built_in">run</span> -<span class="hljs-keyword">it</span> debian:buster /bin/bash
</code></pre>
<p>Run a command in an <code>image</code>.</p>
<h2 id="manage-containers">Manage containers</h2>
<h3 id="-docker-create-"><code>docker create</code></h3>

<pre><code class="yml"><span class="hljs-string">docker</span> <span class="hljs-string">create</span> [<span class="hljs-string">options</span>] <span class="hljs-string">IMAGE</span>
  <span class="hljs-string">-a,</span> <span class="hljs-string">--attach</span>               <span class="hljs-comment"># attach stdout/err</span>
  <span class="hljs-string">-i,</span> <span class="hljs-string">--interactive</span>          <span class="hljs-comment"># attach stdin (interactive)</span>
  <span class="hljs-string">-t,</span> <span class="hljs-string">--tty</span>                  <span class="hljs-comment"># pseudo-tty</span>
      <span class="hljs-string">--name</span> <span class="hljs-string">NAME</span>            <span class="hljs-comment"># name your image</span>
  <span class="hljs-string">-p,</span> <span class="hljs-string">--publish</span> <span class="hljs-number">5000</span><span class="hljs-string">:5000</span>    <span class="hljs-comment"># port map (host:container)</span>
      <span class="hljs-string">--expose</span> <span class="hljs-number">5432</span>          <span class="hljs-comment"># expose a port to linked containers</span>
  <span class="hljs-string">-P,</span> <span class="hljs-string">--publish-all</span>          <span class="hljs-comment"># publish all ports</span>
      <span class="hljs-string">--link</span> <span class="hljs-string">container:alias</span> <span class="hljs-comment"># linking</span>
  <span class="hljs-string">-v,</span> <span class="hljs-string">--volume</span> <span class="hljs-string">`pwd`:/app</span>    <span class="hljs-comment"># mount (absolute paths needed)</span>
  <span class="hljs-string">-e,</span> <span class="hljs-string">--env</span> <span class="hljs-string">NAME=hello</span>       <span class="hljs-comment"># env vars</span>
</code></pre>
<h4 id="example1">Example</h4>

<pre><code>$ docker <span class="hljs-built_in">create</span> <span class="hljs-comment">--name app_redis_1 \</span>
  <span class="hljs-comment">--expose 6379 \</span>
  redis:<span class="hljs-number">3.0</span><span class="hljs-number">.2</span>
</code></pre>
<p>Create a <code>container</code> from an <code>image</code>.</p>
<h3 id="-docker-exec-"><code>docker exec</code></h3>

<pre><code class="yml"><span class="hljs-string">docker</span> <span class="hljs-string">exec</span> [<span class="hljs-string">options</span>] <span class="hljs-string">CONTAINER</span> <span class="hljs-string">COMMAND</span>
  <span class="hljs-string">-d,</span> <span class="hljs-string">--detach</span>        <span class="hljs-comment"># run in background</span>
  <span class="hljs-string">-i,</span> <span class="hljs-string">--interactive</span>   <span class="hljs-comment"># stdin</span>
  <span class="hljs-string">-t,</span> <span class="hljs-string">--tty</span>           <span class="hljs-comment"># interactive</span>
</code></pre>
<h4 id="example11">Example</h4>

<pre><code><span class="hljs-meta">$ </span><span class="language-bash">docker <span class="hljs-built_in">exec</span> app_web_1 tail logs/development.log</span>
<span class="hljs-meta">$ </span><span class="language-bash">docker <span class="hljs-built_in">exec</span> -t -i app_web_1 rails c</span>
</code></pre>
<p>Run commands in a <code>container</code>.</p>
<h3 id="-docker-start-"><code>docker start</code></h3>

<pre><code class="yml"><span class="hljs-string">docker</span> <span class="hljs-string">start</span> [<span class="hljs-string">options</span>] <span class="hljs-string">CONTAINER</span>
  <span class="hljs-string">-a,</span> <span class="hljs-string">--attach</span>        <span class="hljs-comment"># attach stdout/err</span>
  <span class="hljs-string">-i,</span> <span class="hljs-string">--interactive</span>   <span class="hljs-comment"># attach stdin</span>

<span class="hljs-string">docker</span> <span class="hljs-string">stop</span> [<span class="hljs-string">options</span>] <span class="hljs-string">CONTAINER</span>
</code></pre>
<p>Start/stop a <code>container</code>.</p>
<h3 id="-docker-ps-"><code>docker ps</code></h3>

<pre><code><span class="hljs-variable">$</span> docker <span class="hljs-built_in">ps</span>
<span class="hljs-variable">$</span> docker <span class="hljs-built_in">ps</span> <span class="hljs-literal">-a</span>
<span class="hljs-variable">$</span> docker <span class="hljs-built_in">kill</span> <span class="hljs-variable">$ID</span>
</code></pre>
<p>Manage <code>container</code>s using ps/kill.</p>
<h3 id="-docker-logs-"><code>docker logs</code></h3>

<pre><code><span class="hljs-variable">$</span> docker logs <span class="hljs-variable">$ID</span>
<span class="hljs-variable">$</span> docker logs <span class="hljs-variable">$ID</span> <span class="hljs-number">2</span>&gt;&amp;<span class="hljs-number">1</span> | less
<span class="hljs-variable">$</span> docker logs <span class="hljs-operator">-f</span> <span class="hljs-variable">$ID</span> <span class="hljs-comment"># Follow log output</span>
</code></pre>
<p>See what&#39;s being logged in an <code>container</code>.</p>
<h2 id="images">Images</h2>
<h3 id="-docker-images-"><code>docker images</code></h3>

<pre><code class="sh">$ docker images
  REPOSITORY   TAG        ID
  ubuntu       12.10      b750fe78269d
  me/myapp     latest     7b2431a8d968
</code></pre>

<pre><code class="sh">$ docker images -a   <span class="hljs-comment"># also show intermediate</span>
</code></pre>
<p>Manages <code>image</code>s.</p>
<h3 id="-docker-rmi-"><code>docker rmi</code></h3>

<pre><code class="yml"><span class="hljs-string">docker</span> <span class="hljs-string">rmi</span> <span class="hljs-string">b750fe78269d</span>
</code></pre>
<p>Deletes <code>image</code>s.</p>
<h2 id="clean-up">Clean up</h2>
<h3 id="clean-all">Clean all</h3>

<pre><code class="sh">docker system prune
</code></pre>
<p>Cleans up dangling images, containers, volumes, and networks (ie, not associated with a container)</p>

<pre><code class="sh">docker system prune -a
</code></pre>
<p>Additionally remove any stopped containers and all unused images (not just dangling images)</p>
<h3 id="containers">Containers</h3>

<pre><code class="sh"><span class="hljs-comment"># Stop all running containers</span>
docker stop $(docker ps -a -q)

<span class="hljs-comment"># Delete stopped containers</span>
docker container prune
</code></pre>
<h3 id="images1">Images</h3>

<pre><code class="sh">docker image prune [-a]
</code></pre>
<p>Delete all the images</p>
<h3 id="volumes">Volumes</h3>

<pre><code class="sh">docker volume prune
</code></pre>
<p>Delete all the volumes</p>
<h2 id="also-see">Also see</h2>

<ul>
<li><a href="http://www.docker.io/gettingstarted/">Getting Started</a> <em>(docker.io)</em></li>
</ul>

</div>
</body>  
</html>