<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Ansible quickstart cheatsheet</title>
  <link href="s/main.css" rel="stylesheet" />
  <script src="s/main.js"></script>
</head>

<body onload="start()">
  <div class="breadcrumbs"><a href="/">Home</a> / <a href="index.html">cheatsheets</a> / Ansible quickstart cheatsheet</div>
  <div class="edit">
      <a href="https://github.com/kjk/blog/blob/master/www/cheatsheets/devhints\ansible-guide.md" >edit</a>
  </div>
  <div class="toc">
<b>Main</b>: <a href="#install-ansible">Install Ansible</a>, <a href="#start-your-project">Start your project</a><br>
<b>Creating your files</b>: <a href="#inventory-file">Inventory file</a>, <a href="#playbook">Playbook</a><br>
<b>Running</b>: <a href="#running-ansible-playbook">Running ansible-playbook</a><br>
<a href="#read-more">Read more</a><br></div>


  <div id="start"></div>
  <div id="wrapped-content"></div>
<div id="content">
<h3 id="install-ansible">Install Ansible</h3>

<pre><code class="bash">$ brew install ansible            <span class="hljs-comment"># OSX</span>
$ [sudo] apt install ansible      <span class="hljs-comment"># elsewhere</span>
</code></pre>
<p>Ansible is available as a package in most OS&#39;s.</p>
<p>See: <a href="http://docs.ansible.com/ansible/latest/intro_installation.html">Installation</a></p>
<h3 id="start-your-project">Start your project</h3>

<pre><code class="bash">~$ mkdir setup
~$ <span class="hljs-built_in">cd</span> setup
</code></pre>
<p>Make a folder for your Ansible files.</p>
<p>See: <a href="http://docs.ansible.com/ansible/latest/intro_getting_started.html">Getting started</a></p>
<h2 id="creating-your-files">Creating your files</h2>
<h3 id="inventory-file">Inventory file</h3>
<h4 id="-setup-hosts">~/setup/hosts</h4>

<pre><code class="dosini"><span class="hljs-string">[sites]</span>
<span class="hljs-number">127.0.0.1</span>
<span class="hljs-number">192.168.0.1</span>
<span class="hljs-number">192.168.0.2</span>
<span class="hljs-number">192.168.0.3</span>
</code></pre>
<p>This is a list of hosts you want to manage, grouped into groups. (Hint: try
using <code>localhost ansible_connection=local</code> to deploy to your local machine.)</p>
<p>See: <a href="http://docs.ansible.com/ansible/latest/intro_inventory.html">Intro to Inventory</a></p>
<h3 id="playbook">Playbook</h3>
<h4 id="-setup-playbook-yml">~/setup/playbook.yml</h4>

<pre><code class="yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">hosts:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>
  <span class="hljs-attr">user:</span> <span class="hljs-string">root</span>
  <span class="hljs-attr">tasks:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">install</span> <span class="hljs-string">nginx</span>
      <span class="hljs-attr">apt:</span> <span class="hljs-string">pkg=nginx</span> <span class="hljs-string">state=present</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">start</span> <span class="hljs-string">nginx</span> <span class="hljs-string">every</span> <span class="hljs-string">bootup</span>
      <span class="hljs-attr">service:</span> <span class="hljs-string">name=nginx</span> <span class="hljs-string">state=started</span> <span class="hljs-string">enabled=yes</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">do</span> <span class="hljs-string">something</span> <span class="hljs-string">in</span> <span class="hljs-string">the</span> <span class="hljs-string">shell</span>
      <span class="hljs-attr">shell:</span> <span class="hljs-string">echo</span> <span class="hljs-string">hello</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">/tmp/abc.txt</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">install</span> <span class="hljs-string">bundler</span>
      <span class="hljs-attr">gem:</span> <span class="hljs-string">name=bundler</span> <span class="hljs-string">state=latest</span>
</code></pre>
<p>See: <a href="http://docs.ansible.com/ansible/latest/playbooks_intro.html">Intro to Playbooks</a></p>
<h2 id="running">Running</h2>
<h3 id="running-ansible-playbook">Running ansible-playbook</h3>

<pre><code>~<span class="hljs-string">/setup</span>$ <span class="hljs-keyword">ls</span>
hosts
playbook.yml
</code></pre>
<h4 id="running-the-playbook">Running the playbook</h4>

<pre><code>~/setup$ ansible-playbook -i hosts playbook.yml
PLAY [all] <span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span>

GATHERING FACTS <span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">**<span class="hljs-emphasis">*
ok: [127.0.0.1]

TASK: [install nginx] <span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span>*</span>
ok: [127.0.0.1]

TASK: start nginx every bootup] **</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-emphasis">*
ok: [127.0.0.1]
...</span>
</code></pre>
<h2 id="read-more">Read more</h2>

<ul>
<li><a href="http://lowendbox.com/blog/getting-started-with-ansible/">Getting started with Ansible</a> <em>(lowendbox.com)</em></li>
<li><a href="http://docs.ansible.com/ansible/latest/intro_getting_started.html">Getting started</a> <em>(docs.ansible.com)</em></li>
<li><a href="http://docs.ansible.com/ansible/latest/intro_inventory.html">Intro to Inventory</a> <em>(docs.ansible.com)</em></li>
<li><a href="http://docs.ansible.com/ansible/latest/playbooks_intro.html">Intro to Playbooks</a> <em>(docs.ansible.com)</em></li>
</ul>

</div>
</body>  
</html>