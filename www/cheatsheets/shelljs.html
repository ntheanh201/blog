<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Shell.js cheatsheet</title>
  <link href="s/main.css" rel="stylesheet" />
  <script src="s/main.js"></script>
</head>

<body onload="start()">
  <div class="breadcrumbs"><a href="/">Home</a> / <a href="index.html">cheatsheets</a> / Shell.js cheatsheet</div>
  <div class="edit">
      <a href="https://github.com/kjk/blog/blob/master/www/cheatsheets/devhints\shelljs.md" >edit</a>
  </div>
  <div class="toc">
<b>Main</b>: <a href="#example">Example</a>, <a href="#require">Require</a>, <a href="#paths">Paths</a>, <a href="#file-manipulation">File manipulation</a>, <a href="#tests">Tests</a>, <a href="#cat-and-output">Cat and output</a>, <a href="#utils">Utils</a><br>
<a href="#also-see">Also see</a><br></div>


  <div id="start"></div>
  <div id="wrapped-content"></div>
<div id="content">
<h3 id="example">Example</h3>

<pre><code class="js"><span class="hljs-keyword">var</span> shell = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;shelljs&#x27;</span>)
</code></pre>

<pre><code class="js"><span class="hljs-keyword">if</span> (!shell.<span class="hljs-title function_">which</span>(<span class="hljs-string">&#x27;git&#x27;</span>)) {
  shell.<span class="hljs-title function_">echo</span>(<span class="hljs-string">&#x27;Sorry, this script requires git&#x27;</span>)
  shell.<span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>)
}
</code></pre>

<pre><code class="js"><span class="hljs-comment">// Copy files to release dir</span>
shell.<span class="hljs-title function_">rm</span>(<span class="hljs-string">&#x27;-rf&#x27;</span>, <span class="hljs-string">&#x27;out/Release&#x27;</span>)
shell.<span class="hljs-title function_">cp</span>(<span class="hljs-string">&#x27;-R&#x27;</span>, <span class="hljs-string">&#x27;stuff/&#x27;</span>, <span class="hljs-string">&#x27;out/Release&#x27;</span>)
</code></pre>

<pre><code class="js"><span class="hljs-comment">// Replace macros in each .js file</span>
shell.<span class="hljs-title function_">cd</span>(<span class="hljs-string">&#x27;lib&#x27;</span>)
shell.<span class="hljs-title function_">ls</span>(<span class="hljs-string">&#x27;*.js&#x27;</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">file</span>) {
  shell.<span class="hljs-title function_">sed</span>(<span class="hljs-string">&#x27;-i&#x27;</span>, <span class="hljs-string">&#x27;BUILD_VERSION&#x27;</span>, <span class="hljs-string">&#x27;v0.1.2&#x27;</span>, file)
  shell.<span class="hljs-title function_">sed</span>(<span class="hljs-string">&#x27;-i&#x27;</span>, <span class="hljs-regexp">/^.*REMOVE_THIS_LINE.*$/</span>, <span class="hljs-string">&#x27;&#x27;</span>, file)
  shell.<span class="hljs-title function_">sed</span>(<span class="hljs-string">&#x27;-i&#x27;</span>, <span class="hljs-regexp">/.*REPLACE_LINE_WITH_MACRO.*\n/</span>, shell.<span class="hljs-title function_">cat</span>(<span class="hljs-string">&#x27;macro.js&#x27;</span>), file)
})
shell.<span class="hljs-title function_">cd</span>(<span class="hljs-string">&#x27;..&#x27;</span>)
</code></pre>

<pre><code class="js"><span class="hljs-comment">// Run external tool synchronously</span>
<span class="hljs-keyword">if</span> (shell.<span class="hljs-title function_">exec</span>(<span class="hljs-string">&#x27;git commit -am &quot;Auto-commit&quot;&#x27;</span>).<span class="hljs-property">code</span> !== <span class="hljs-number">0</span>) {
  shell.<span class="hljs-title function_">echo</span>(<span class="hljs-string">&#x27;Error: Git commit failed&#x27;</span>)
  shell.<span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>)
}
</code></pre>
<p>Taken from the <a href="https://github.com/shelljs/shelljs">Readme</a>.</p>
<h3 id="require">Require</h3>

<pre><code class="js"><span class="hljs-keyword">const</span> sh = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;shelljs&#x27;</span>)
</code></pre>
<h3 id="paths">Paths</h3>

<pre><code class="js">sh.<span class="hljs-title function_">cd</span>(<span class="hljs-string">&#x27;dir&#x27;</span>)
</code></pre>

<pre><code class="js">sh.<span class="hljs-title function_">mkdir</span>(<span class="hljs-string">&#x27;dir&#x27;</span>)
sh.<span class="hljs-title function_">mkdir</span>(<span class="hljs-string">&#x27;-p&#x27;</span>, <span class="hljs-string">&#x27;dir&#x27;</span>)
</code></pre>
<h3 id="file-manipulation">File manipulation</h3>

<pre><code class="js">sh.<span class="hljs-title function_">cp</span>(<span class="hljs-string">&#x27;src&#x27;</span>, <span class="hljs-string">&#x27;dest&#x27;</span>)
sh.<span class="hljs-title function_">cp</span>(<span class="hljs-string">&#x27;-rf&#x27;</span>, <span class="hljs-string">&#x27;src&#x27;</span>, <span class="hljs-string">&#x27;dest&#x27;</span>)
</code></pre>

<pre><code class="js">sh.<span class="hljs-title function_">rm</span>(<span class="hljs-string">&#x27;file&#x27;</span>)
sh.<span class="hljs-title function_">rm</span>(<span class="hljs-string">&#x27;-rf&#x27;</span>, <span class="hljs-string">&#x27;file&#x27;</span>)
</code></pre>

<pre><code class="js">sh.<span class="hljs-title function_">mv</span>(<span class="hljs-string">&#x27;src&#x27;</span>, <span class="hljs-string">&#x27;dest&#x27;</span>)
sh.<span class="hljs-title function_">mv</span>([<span class="hljs-string">&#x27;src1&#x27;</span>,<span class="hljs-string">&#x27;src2&#x27;</span>], <span class="hljs-string">&#x27;dest&#x27;</span>)
</code></pre>

<pre><code class="js">sh.<span class="hljs-title function_">chmod</span>(<span class="hljs-string">&#x27;644&#x27;</span>, <span class="hljs-string">&#x27;file&#x27;</span>)
sh.<span class="hljs-title function_">chmod</span>(<span class="hljs-number">755</span>, <span class="hljs-string">&#x27;file&#x27;</span>)
sh.<span class="hljs-title function_">chmod</span>(<span class="hljs-string">&#x27;u+x&#x27;</span>, <span class="hljs-string">&#x27;file&#x27;</span>)
</code></pre>
<h3 id="tests">Tests</h3>

<pre><code class="js">sh.<span class="hljs-title function_">test</span>(<span class="hljs-string">&#x27;-b&#x27;</span>, <span class="hljs-string">&#x27;path&#x27;</span>)  <span class="hljs-comment">// block device</span>
sh.<span class="hljs-title function_">test</span>(<span class="hljs-string">&#x27;-d&#x27;</span>, <span class="hljs-string">&#x27;path&#x27;</span>)  <span class="hljs-comment">// dir</span>
sh.<span class="hljs-title function_">test</span>(<span class="hljs-string">&#x27;-e&#x27;</span>, <span class="hljs-string">&#x27;path&#x27;</span>)  <span class="hljs-comment">// exists</span>
sh.<span class="hljs-title function_">test</span>(<span class="hljs-string">&#x27;-f&#x27;</span>, <span class="hljs-string">&#x27;path&#x27;</span>)  <span class="hljs-comment">// file</span>
sh.<span class="hljs-title function_">test</span>(<span class="hljs-string">&#x27;-L&#x27;</span>, <span class="hljs-string">&#x27;path&#x27;</span>)  <span class="hljs-comment">// symlink</span>
</code></pre>
<h3 id="cat-and-output">Cat and output</h3>

<pre><code class="js">src = sh.<span class="hljs-title function_">cat</span>(<span class="hljs-string">&#x27;file*.txt&#x27;</span>)
</code></pre>

<pre><code class="js"><span class="hljs-string">&#x27;hello&#x27;</span>.<span class="hljs-title function_">to</span>(<span class="hljs-string">&#x27;output.txt&#x27;</span>)
<span class="hljs-string">&#x27;hello&#x27;</span>.<span class="hljs-title function_">toEnd</span>(<span class="hljs-string">&#x27;append.txt&#x27;</span>)
</code></pre>

<pre><code class="js">sh.<span class="hljs-title function_">cat</span>(<span class="hljs-string">&#x27;input.txt&#x27;</span>).<span class="hljs-title function_">to</span>(<span class="hljs-string">&#x27;output.txt&#x27;</span>)
</code></pre>
<h3 id="utils">Utils</h3>

<pre><code class="js">sh.<span class="hljs-title function_">which</span>(<span class="hljs-string">&#x27;x&#x27;</span>)
sh.<span class="hljs-title function_">pwd</span>()
</code></pre>

<pre><code class="js">sh.<span class="hljs-title function_">echo</span>(<span class="hljs-string">&#x27;hi&#x27;</span>)
</code></pre>

<pre><code class="js">sh.<span class="hljs-title function_">exec</span>(<span class="hljs-string">&#x27;node --version&#x27;</span>).<span class="hljs-property">code</span>
sh.<span class="hljs-title function_">exec</span>(<span class="hljs-string">&#x27;node --version&#x27;</span>).<span class="hljs-property">output</span>
sh.<span class="hljs-title function_">exec</span>(<span class="hljs-string">&#x27;node --version&#x27;</span>, { <span class="hljs-attr">silent</span>: <span class="hljs-literal">true</span> }).<span class="hljs-property">output</span>
</code></pre>

<pre><code class="js">sh.<span class="hljs-title function_">exec</span>(<span class="hljs-string">&#x27;node --version&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">code, output</span>) =&gt;</span> {
  sh.<span class="hljs-title function_">echo</span>(<span class="hljs-string">`exit code <span class="hljs-subst">${code}</span>`</span>)
})
</code></pre>

<pre><code class="js">sh.<span class="hljs-title function_">tempdir</span>()
</code></pre>

<pre><code class="js">sh.<span class="hljs-title function_">error</span>()  <span class="hljs-comment">// null if no error</span>
</code></pre>
<h2 id="also-see">Also see</h2>

<ul>
<li><a href="https://github.com/shelljs/shelljs">https://github.com/shelljs/shelljs</a></li>
</ul>

</div>
</body>  
</html>