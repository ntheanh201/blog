<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Bash scripting cheatsheet</title>
  <link href="s/main.css" rel="stylesheet" />
  <script src="s/main.js"></script>
</head>

<body onload="start()">
  <div class="breadcrumbs"><a href="/">Home</a> / <a href="index.html">cheatsheets</a> / Bash scripting cheatsheet</div>
  <div class="edit">
      <a href="https://github.com/kjk/blog/blob/master/www/cheatsheets/devhints\bash.md" >edit</a>
  </div>
  <div class="toc">
<b>Getting started</b>: <a href="#introduction">Introduction</a>, <a href="#example">Example</a>, <a href="#variables">Variables</a>, <a href="#string-quotes">String quotes</a>, <a href="#shell-execution">Shell execution</a>, <a href="#conditional-execution">Conditional execution</a>, <a href="#functions">Functions</a>, <a href="#conditionals">Conditionals</a>, <a href="#strict-mode">Strict mode</a>, <a href="#brace-expansion">Brace expansion</a><br>
<b>Parameter expansions</b>: <a href="#basics">Basics</a>, <a href="#substitution">Substitution</a>, <a href="#comments">Comments</a>, <a href="#substrings">Substrings</a>, <a href="#length">Length</a>, <a href="#manipulation">Manipulation</a>, <a href="#default-values">Default values</a><br>
<b>Loops</b>: <a href="#basic-for-loop">Basic for loop</a>, <a href="#c-like-for-loop">C-like for loop</a>, <a href="#ranges">Ranges</a>, <a href="#reading-lines">Reading lines</a>, <a href="#forever">Forever</a><br>
<b>Functions</b>: <a href="#defining-functions">Defining functions</a>, <a href="#returning-values">Returning values</a>, <a href="#raising-errors">Raising errors</a>, <a href="#arguments">Arguments</a><br>
<b>Conditionals</b>: <a href="#conditions">Conditions</a>, <a href="#file-conditions">File conditions</a>, <a href="#example">Example</a><br>
<b>Arrays</b>: <a href="#defining-arrays">Defining arrays</a>, <a href="#working-with-arrays">Working with arrays</a>, <a href="#operations">Operations</a>, <a href="#iteration">Iteration</a><br>
<b>Dictionaries</b>: <a href="#defining">Defining</a>, <a href="#working-with-dictionaries">Working with dictionaries</a>, <a href="#iteration">Iteration</a><br>
<b>Options</b>: <a href="#options">Options</a>, <a href="#glob-options">Glob options</a><br>
<b>History</b>: <a href="#commands">Commands</a>, <a href="#expansions">Expansions</a>, <a href="#operations">Operations</a>, <a href="#slices">Slices</a><br>
<b>Miscellaneous</b>: <a href="#numeric-calculations">Numeric calculations</a>, <a href="#subshells">Subshells</a>, <a href="#redirection">Redirection</a>, <a href="#inspecting-commands">Inspecting commands</a>, <a href="#trap-errors">Trap errors</a>, <a href="#case-switch">Case/switch</a>, <a href="#source-relative">Source relative</a>, <a href="#printf">printf</a>, <a href="#directory-of-script">Directory of script</a>, <a href="#getting-options">Getting options</a>, <a href="#heredoc">Heredoc</a>, <a href="#reading-input">Reading input</a>, <a href="#special-variables">Special variables</a>, <a href="#go-to-previous-directory">Go to previous directory</a>, <a href="#check-for-command-s-result">Check for command's result</a>, <a href="#grep-check">Grep check</a><br>
<a href="#also-see">Also see</a><br></div>


  <div id="start"></div>
  <div id="wrapped-content"></div>
<div id="content">
<h2 id="getting-started">Getting started</h2>
<h3 id="introduction">Introduction</h3>
<p>This is a quick reference to getting started with Bash scripting.</p>

<ul>
<li><a href="https://learnxinyminutes.com/docs/bash/">Learn bash in y minutes</a> <em>(learnxinyminutes.com)</em></li>
<li><a href="http://mywiki.wooledge.org/BashGuide">Bash Guide</a> <em>(mywiki.wooledge.org)</em></li>
</ul>
<h3 id="example">Example</h3>

<pre><code class="bash"><span class="hljs-meta">#!/usr/bin/env bash</span>

NAME=<span class="hljs-string">&quot;John&quot;</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Hello <span class="hljs-variable">$NAME</span>!&quot;</span>
</code></pre>
<h3 id="variables">Variables</h3>

<pre><code class="bash">NAME=<span class="hljs-string">&quot;John&quot;</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$NAME</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$NAME</span>&quot;</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">${NAME}</span>!&quot;</span>
</code></pre>
<h3 id="string-quotes">String quotes</h3>

<pre><code class="bash">NAME=<span class="hljs-string">&quot;John&quot;</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Hi <span class="hljs-variable">$NAME</span>&quot;</span>  <span class="hljs-comment">#=&gt; Hi John</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;Hi $NAME&#x27;</span>  <span class="hljs-comment">#=&gt; Hi $NAME</span>
</code></pre>
<h3 id="shell-execution">Shell execution</h3>

<pre><code class="bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;I&#x27;m in <span class="hljs-subst">$(pwd)</span>&quot;</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;I&#x27;m in `pwd`&quot;</span>
<span class="hljs-comment"># Same</span>
</code></pre>
<p>See <a href="http://wiki.bash-hackers.org/syntax/expansion/cmdsubst">Command substitution</a></p>
<h3 id="conditional-execution">Conditional execution</h3>

<pre><code class="bash">git commit &amp;&amp; git push
git commit || <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Commit failed&quot;</span>
</code></pre>
<h3 id="functions">Functions</h3>

<pre><code class="bash"><span class="hljs-function"><span class="hljs-title">get_name</span></span>() {
  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;John&quot;</span>
}

<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;You are <span class="hljs-subst">$(get_name)</span>&quot;</span>
</code></pre>
<p>See: <a href="#functions">Functions</a></p>
<h3 id="conditionals">Conditionals</h3>

<pre><code class="bash"><span class="hljs-keyword">if</span> [[ -z <span class="hljs-string">&quot;<span class="hljs-variable">$string</span>&quot;</span> ]]; <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;String is empty&quot;</span>
<span class="hljs-keyword">elif</span> [[ -n <span class="hljs-string">&quot;<span class="hljs-variable">$string</span>&quot;</span> ]]; <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;String is not empty&quot;</span>
<span class="hljs-keyword">fi</span>
</code></pre>
<p>See: <a href="#conditionals">Conditionals</a></p>
<h3 id="strict-mode">Strict mode</h3>

<pre><code class="bash"><span class="hljs-built_in">set</span> -euo pipefail
IFS=$<span class="hljs-string">&#x27;\n\t&#x27;</span>
</code></pre>
<p>See: <a href="http://redsymbol.net/articles/unofficial-bash-strict-mode/">Unofficial bash strict mode</a></p>
<h3 id="brace-expansion">Brace expansion</h3>

<pre><code class="bash"><span class="hljs-built_in">echo</span> {A,B}.js
</code></pre>

<table>
<thead>
<tr>
<th>Expression</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>{A,B}</code></td>
<td>Same as <code>A B</code></td>
</tr>
<tr>
<td><code>{A,B}.js</code></td>
<td>Same as <code>A.js B.js</code></td>
</tr>
<tr>
<td><code>{1..5}</code></td>
<td>Same as <code>1 2 3 4 5</code></td>
</tr>
</tbody>
</table>
<p>See: <a href="http://wiki.bash-hackers.org/syntax/expansion/brace">Brace expansion</a></p>
<h2 id="parameter-expansions">Parameter expansions</h2>
<h3 id="basics">Basics</h3>

<pre><code class="bash">name=<span class="hljs-string">&quot;John&quot;</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${name}</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${name/J/j}</span>    <span class="hljs-comment">#=&gt; &quot;john&quot; (substitution)</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${name:0:2}</span>    <span class="hljs-comment">#=&gt; &quot;Jo&quot; (slicing)</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${name::2}</span>     <span class="hljs-comment">#=&gt; &quot;Jo&quot; (slicing)</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${name::-1}</span>    <span class="hljs-comment">#=&gt; &quot;Joh&quot; (slicing)</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${name:(-1)}</span>   <span class="hljs-comment">#=&gt; &quot;n&quot; (slicing from right)</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${name:(-2):1}</span> <span class="hljs-comment">#=&gt; &quot;h&quot; (slicing from right)</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${food:-Cake}</span>  <span class="hljs-comment">#=&gt; $food or &quot;Cake&quot;</span>
</code></pre>

<pre><code class="bash">length=2
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${name:0:length}</span>  <span class="hljs-comment">#=&gt; &quot;Jo&quot;</span>
</code></pre>
<p>See: <a href="http://wiki.bash-hackers.org/syntax/pe">Parameter expansion</a></p>

<pre><code class="bash">STR=<span class="hljs-string">&quot;/path/to/foo.cpp&quot;</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${STR%.cpp}</span>    <span class="hljs-comment"># /path/to/foo</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${STR%.cpp}</span>.o  <span class="hljs-comment"># /path/to/foo.o</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${STR%/*}</span>      <span class="hljs-comment"># /path/to</span>

<span class="hljs-built_in">echo</span> <span class="hljs-variable">${STR##*.}</span>     <span class="hljs-comment"># cpp (extension)</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${STR##*/}</span>     <span class="hljs-comment"># foo.cpp (basepath)</span>

<span class="hljs-built_in">echo</span> <span class="hljs-variable">${STR#*/}</span>      <span class="hljs-comment"># path/to/foo.cpp</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${STR##*/}</span>     <span class="hljs-comment"># foo.cpp</span>

<span class="hljs-built_in">echo</span> <span class="hljs-variable">${STR/foo/bar}</span> <span class="hljs-comment"># /path/to/bar.cpp</span>
</code></pre>

<pre><code class="bash">STR=<span class="hljs-string">&quot;Hello world&quot;</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${STR:6:5}</span>   <span class="hljs-comment"># &quot;world&quot;</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${STR: -5:5}</span>  <span class="hljs-comment"># &quot;world&quot;</span>
</code></pre>

<pre><code class="bash">SRC=<span class="hljs-string">&quot;/path/to/foo.cpp&quot;</span>
BASE=<span class="hljs-variable">${SRC##*/}</span>   <span class="hljs-comment">#=&gt; &quot;foo.cpp&quot; (basepath)</span>
DIR=<span class="hljs-variable">${SRC%$BASE}</span>  <span class="hljs-comment">#=&gt; &quot;/path/to/&quot; (dirpath)</span>
</code></pre>
<h3 id="substitution">Substitution</h3>

<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>${FOO%suffix}</code></td>
<td>Remove suffix</td>
</tr>
<tr>
<td><code>${FOO#prefix}</code></td>
<td>Remove prefix</td>
</tr>
<tr>
<td>---</td>
<td>---</td>
</tr>
<tr>
<td><code>${FOO%%suffix}</code></td>
<td>Remove long suffix</td>
</tr>
<tr>
<td><code>${FOO##prefix}</code></td>
<td>Remove long prefix</td>
</tr>
<tr>
<td>---</td>
<td>---</td>
</tr>
<tr>
<td><code>${FOO/from/to}</code></td>
<td>Replace first match</td>
</tr>
<tr>
<td><code>${FOO//from/to}</code></td>
<td>Replace all</td>
</tr>
<tr>
<td>---</td>
<td>---</td>
</tr>
<tr>
<td><code>${FOO/%from/to}</code></td>
<td>Replace suffix</td>
</tr>
<tr>
<td><code>${FOO/#from/to}</code></td>
<td>Replace prefix</td>
</tr>
</tbody>
</table>
<h3 id="comments">Comments</h3>

<pre><code class="bash"><span class="hljs-comment"># Single line comment</span>
</code></pre>

<pre><code class="bash">: <span class="hljs-string">&#x27;
This is a
multi line
comment
&#x27;</span>
</code></pre>
<h3 id="substrings">Substrings</h3>

<table>
<thead>
<tr>
<th>Expression</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>${FOO:0:3}</code></td>
<td>Substring <em>(position, length)</em></td>
</tr>
<tr>
<td><code>${FOO:(-3):3}</code></td>
<td>Substring from the right</td>
</tr>
</tbody>
</table>
<h3 id="length">Length</h3>

<table>
<thead>
<tr>
<th>Expression</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>${#FOO}</code></td>
<td>Length of <code>$FOO</code></td>
</tr>
</tbody>
</table>
<h3 id="manipulation">Manipulation</h3>

<pre><code class="bash">STR=<span class="hljs-string">&quot;HELLO WORLD!&quot;</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${STR,}</span>   <span class="hljs-comment">#=&gt; &quot;hELLO WORLD!&quot; (lowercase 1st letter)</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${STR,,}</span>  <span class="hljs-comment">#=&gt; &quot;hello world!&quot; (all lowercase)</span>

STR=<span class="hljs-string">&quot;hello world!&quot;</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${STR^}</span>   <span class="hljs-comment">#=&gt; &quot;Hello world!&quot; (uppercase 1st letter)</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${STR^^}</span>  <span class="hljs-comment">#=&gt; &quot;HELLO WORLD!&quot; (all uppercase)</span>
</code></pre>
<h3 id="default-values">Default values</h3>

<table>
<thead>
<tr>
<th>Expression</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>${FOO:-val}</code></td>
<td><code>$FOO</code>, or <code>val</code> if unset (or null)</td>
</tr>
<tr>
<td><code>${FOO:=val}</code></td>
<td>Set <code>$FOO</code> to <code>val</code> if unset (or null)</td>
</tr>
<tr>
<td><code>${FOO:+val}</code></td>
<td><code>val</code> if <code>$FOO</code> is set (and not null)</td>
</tr>
<tr>
<td><code>${FOO:?message}</code></td>
<td>Show error message and exit if <code>$FOO</code> is unset (or null)</td>
</tr>
</tbody>
</table>
<p>Omitting the <code>:</code> removes the (non)nullity checks, e.g. <code>${FOO-val}</code> expands to <code>val</code> if unset otherwise <code>$FOO</code>.</p>
<h2 id="loops">Loops</h2>
<h3 id="basic-for-loop">Basic for loop</h3>

<pre><code class="bash"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> /etc/rc.*; <span class="hljs-keyword">do</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-variable">$i</span>
<span class="hljs-keyword">done</span>
</code></pre>
<h3 id="c-like-for-loop">C-like for loop</h3>

<pre><code class="bash"><span class="hljs-keyword">for</span> ((i = 0 ; i &lt; 100 ; i++)); <span class="hljs-keyword">do</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-variable">$i</span>
<span class="hljs-keyword">done</span>
</code></pre>
<h3 id="ranges">Ranges</h3>

<pre><code class="bash"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> {1..5}; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Welcome <span class="hljs-variable">$i</span>&quot;</span>
<span class="hljs-keyword">done</span>
</code></pre>
<h4 id="with-step-size">With step size</h4>

<pre><code class="bash"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> {5..50..5}; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Welcome <span class="hljs-variable">$i</span>&quot;</span>
<span class="hljs-keyword">done</span>
</code></pre>
<h3 id="reading-lines">Reading lines</h3>

<pre><code class="bash">cat file.txt | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> line; <span class="hljs-keyword">do</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-variable">$line</span>
<span class="hljs-keyword">done</span>
</code></pre>
<h3 id="forever">Forever</h3>

<pre><code class="bash"><span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span>
  ···
<span class="hljs-keyword">done</span>
</code></pre>
<h2 id="functions">Functions</h2>
<h3 id="defining-functions">Defining functions</h3>

<pre><code class="bash"><span class="hljs-function"><span class="hljs-title">myfunc</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;hello <span class="hljs-variable">$1</span>&quot;</span>
}
</code></pre>

<pre><code class="bash"><span class="hljs-comment"># Same as above (alternate syntax)</span>
<span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">myfunc</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;hello <span class="hljs-variable">$1</span>&quot;</span>
}
</code></pre>

<pre><code class="bash">myfunc <span class="hljs-string">&quot;John&quot;</span>
</code></pre>
<h3 id="returning-values">Returning values</h3>

<pre><code class="bash"><span class="hljs-function"><span class="hljs-title">myfunc</span></span>() {
    <span class="hljs-built_in">local</span> myresult=<span class="hljs-string">&#x27;some value&#x27;</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-variable">$myresult</span>
}
</code></pre>

<pre><code class="bash">result=<span class="hljs-string">&quot;<span class="hljs-subst">$(myfunc)</span>&quot;</span>
</code></pre>
<h3 id="raising-errors">Raising errors</h3>

<pre><code class="bash"><span class="hljs-function"><span class="hljs-title">myfunc</span></span>() {
  <span class="hljs-built_in">return</span> 1
}
</code></pre>

<pre><code class="bash"><span class="hljs-keyword">if</span> myfunc; <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;success&quot;</span>
<span class="hljs-keyword">else</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;failure&quot;</span>
<span class="hljs-keyword">fi</span>
</code></pre>
<h3 id="arguments">Arguments</h3>

<table>
<thead>
<tr>
<th>Expression</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$#</code></td>
<td>Number of arguments</td>
</tr>
<tr>
<td><code>$*</code></td>
<td>All postional arguments  (as a single word)</td>
</tr>
<tr>
<td><code>$@</code></td>
<td>All postitional arguments (as separate strings)</td>
</tr>
<tr>
<td><code>$1</code></td>
<td>First argument</td>
</tr>
<tr>
<td><code>$_</code></td>
<td>Last argument of the previous command</td>
</tr>
</tbody>
</table>
<p><strong>Note</strong>: <code>$@</code> and <code>$*</code> must be quoted in order to perform as described.
Otherwise, they do exactly the same thing (arguments as separate strings).</p>
<p>See <a href="http://wiki.bash-hackers.org/syntax/shellvars#special_parameters_and_shell_variables">Special parameters</a>.</p>
<h2 id="conditionals">Conditionals</h2>
<h3 id="conditions">Conditions</h3>
<p>Note that <code>[[</code> is actually a command/program that returns either <code>0</code> (true) or <code>1</code> (false). Any program that obeys the same logic (like all base utils, such as <code>grep(1)</code> or <code>ping(1)</code>) can be used as condition, see examples.</p>

<table>
<thead>
<tr>
<th>Condition</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>[[ -z STRING ]]</code></td>
<td>Empty string</td>
</tr>
<tr>
<td><code>[[ -n STRING ]]</code></td>
<td>Not empty string</td>
</tr>
<tr>
<td><code>[[ STRING == STRING ]]</code></td>
<td>Equal</td>
</tr>
<tr>
<td><code>[[ STRING != STRING ]]</code></td>
<td>Not Equal</td>
</tr>
<tr>
<td>---</td>
<td>---</td>
</tr>
<tr>
<td><code>[[ NUM -eq NUM ]]</code></td>
<td>Equal</td>
</tr>
<tr>
<td><code>[[ NUM -ne NUM ]]</code></td>
<td>Not equal</td>
</tr>
<tr>
<td><code>[[ NUM -lt NUM ]]</code></td>
<td>Less than</td>
</tr>
<tr>
<td><code>[[ NUM -le NUM ]]</code></td>
<td>Less than or equal</td>
</tr>
<tr>
<td><code>[[ NUM -gt NUM ]]</code></td>
<td>Greater than</td>
</tr>
<tr>
<td><code>[[ NUM -ge NUM ]]</code></td>
<td>Greater than or equal</td>
</tr>
<tr>
<td>---</td>
<td>---</td>
</tr>
<tr>
<td><code>[[ STRING =~ STRING ]]</code></td>
<td>Regexp</td>
</tr>
<tr>
<td>---</td>
<td>---</td>
</tr>
<tr>
<td><code>(( NUM &lt; NUM ))</code></td>
<td>Numeric conditions</td>
</tr>
</tbody>
</table>
<h4 id="more-conditions">More conditions</h4>

<table>
<thead>
<tr>
<th>Condition</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>[[ -o noclobber ]]</code></td>
<td>If OPTIONNAME is enabled</td>
</tr>
<tr>
<td>---</td>
<td>---</td>
</tr>
<tr>
<td><code>[[ ! EXPR ]]</code></td>
<td>Not</td>
</tr>
<tr>
<td><code>[[ X &amp;&amp; Y ]]</code></td>
<td>And</td>
</tr>
<tr>
<td>`[[ X</td>
<td></td>
<td>Y ]]`</td>
<td>Or</td>
</tr>
</tbody>
</table>
<h3 id="file-conditions">File conditions</h3>

<table>
<thead>
<tr>
<th>Condition</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>[[ -e FILE ]]</code></td>
<td>Exists</td>
</tr>
<tr>
<td><code>[[ -r FILE ]]</code></td>
<td>Readable</td>
</tr>
<tr>
<td><code>[[ -h FILE ]]</code></td>
<td>Symlink</td>
</tr>
<tr>
<td><code>[[ -d FILE ]]</code></td>
<td>Directory</td>
</tr>
<tr>
<td><code>[[ -w FILE ]]</code></td>
<td>Writable</td>
</tr>
<tr>
<td><code>[[ -s FILE ]]</code></td>
<td>Size is &gt; 0 bytes</td>
</tr>
<tr>
<td><code>[[ -f FILE ]]</code></td>
<td>File</td>
</tr>
<tr>
<td><code>[[ -x FILE ]]</code></td>
<td>Executable</td>
</tr>
<tr>
<td>---</td>
<td>---</td>
</tr>
<tr>
<td><code>[[ FILE1 -nt FILE2 ]]</code></td>
<td>1 is more recent than 2</td>
</tr>
<tr>
<td><code>[[ FILE1 -ot FILE2 ]]</code></td>
<td>2 is more recent than 1</td>
</tr>
<tr>
<td><code>[[ FILE1 -ef FILE2 ]]</code></td>
<td>Same files</td>
</tr>
</tbody>
</table>
<h3 id="example">Example</h3>

<pre><code class="bash"><span class="hljs-comment"># String</span>
<span class="hljs-keyword">if</span> [[ -z <span class="hljs-string">&quot;<span class="hljs-variable">$string</span>&quot;</span> ]]; <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;String is empty&quot;</span>
<span class="hljs-keyword">elif</span> [[ -n <span class="hljs-string">&quot;<span class="hljs-variable">$string</span>&quot;</span> ]]; <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;String is not empty&quot;</span>
<span class="hljs-keyword">else</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;This never happens&quot;</span>
<span class="hljs-keyword">fi</span>
</code></pre>

<pre><code class="bash"><span class="hljs-comment"># Combinations</span>
<span class="hljs-keyword">if</span> [[ X &amp;&amp; Y ]]; <span class="hljs-keyword">then</span>
  ...
<span class="hljs-keyword">fi</span>
</code></pre>

<pre><code class="bash"><span class="hljs-comment"># Equal</span>
<span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$A</span>&quot;</span> == <span class="hljs-string">&quot;<span class="hljs-variable">$B</span>&quot;</span> ]]
</code></pre>

<pre><code class="bash"><span class="hljs-comment"># Regex</span>
<span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;A&quot;</span> =~ . ]]
</code></pre>

<pre><code class="bash"><span class="hljs-keyword">if</span> (( <span class="hljs-variable">$a</span> &lt; <span class="hljs-variable">$b</span> )); <span class="hljs-keyword">then</span>
   <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$a</span> is smaller than <span class="hljs-variable">$b</span>&quot;</span>
<span class="hljs-keyword">fi</span>
</code></pre>

<pre><code class="bash"><span class="hljs-keyword">if</span> [[ -e <span class="hljs-string">&quot;file.txt&quot;</span> ]]; <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;file exists&quot;</span>
<span class="hljs-keyword">fi</span>
</code></pre>
<h2 id="arrays">Arrays</h2>
<h3 id="defining-arrays">Defining arrays</h3>

<pre><code class="bash">Fruits=(<span class="hljs-string">&#x27;Apple&#x27;</span> <span class="hljs-string">&#x27;Banana&#x27;</span> <span class="hljs-string">&#x27;Orange&#x27;</span>)
</code></pre>

<pre><code class="bash">Fruits[0]=<span class="hljs-string">&quot;Apple&quot;</span>
Fruits[1]=<span class="hljs-string">&quot;Banana&quot;</span>
Fruits[2]=<span class="hljs-string">&quot;Orange&quot;</span>
</code></pre>
<h3 id="working-with-arrays">Working with arrays</h3>

<pre><code class="bash"><span class="hljs-built_in">echo</span> <span class="hljs-variable">${Fruits[0]}</span>           <span class="hljs-comment"># Element #0</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${Fruits[-1]}</span>          <span class="hljs-comment"># Last element</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${Fruits[@]}</span>           <span class="hljs-comment"># All elements, space-separated</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${#Fruits[@]}</span>          <span class="hljs-comment"># Number of elements</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${#Fruits}</span>             <span class="hljs-comment"># String length of the 1st element</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${#Fruits[3]}</span>          <span class="hljs-comment"># String length of the Nth element</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${Fruits[@]:3:2}</span>       <span class="hljs-comment"># Range (from position 3, length 2)</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${!Fruits[@]}</span>          <span class="hljs-comment"># Keys of all elements, space-separated</span>
</code></pre>
<h3 id="operations">Operations</h3>

<pre><code class="bash">Fruits=(<span class="hljs-string">&quot;<span class="hljs-variable">${Fruits[@]}</span>&quot;</span> <span class="hljs-string">&quot;Watermelon&quot;</span>)    <span class="hljs-comment"># Push</span>
Fruits+=(<span class="hljs-string">&#x27;Watermelon&#x27;</span>)                  <span class="hljs-comment"># Also Push</span>
Fruits=( <span class="hljs-variable">${Fruits[@]/Ap*/}</span> )            <span class="hljs-comment"># Remove by regex match</span>
<span class="hljs-built_in">unset</span> Fruits[2]                         <span class="hljs-comment"># Remove one item</span>
Fruits=(<span class="hljs-string">&quot;<span class="hljs-variable">${Fruits[@]}</span>&quot;</span>)                 <span class="hljs-comment"># Duplicate</span>
Fruits=(<span class="hljs-string">&quot;<span class="hljs-variable">${Fruits[@]}</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">${Veggies[@]}</span>&quot;</span>) <span class="hljs-comment"># Concatenate</span>
lines=(`cat <span class="hljs-string">&quot;logfile&quot;</span>`)                 <span class="hljs-comment"># Read from file</span>
</code></pre>
<h3 id="iteration">Iteration</h3>

<pre><code class="bash"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;<span class="hljs-variable">${arrayName[@]}</span>&quot;</span>; <span class="hljs-keyword">do</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-variable">$i</span>
<span class="hljs-keyword">done</span>
</code></pre>
<h2 id="dictionaries">Dictionaries</h2>
<h3 id="defining">Defining</h3>

<pre><code class="bash"><span class="hljs-built_in">declare</span> -A sounds
</code></pre>

<pre><code class="bash">sounds[dog]=<span class="hljs-string">&quot;bark&quot;</span>
sounds[cow]=<span class="hljs-string">&quot;moo&quot;</span>
sounds[bird]=<span class="hljs-string">&quot;tweet&quot;</span>
sounds[wolf]=<span class="hljs-string">&quot;howl&quot;</span>
</code></pre>
<p>Declares <code>sound</code> as a Dictionary object (aka associative array).</p>
<h3 id="working-with-dictionaries">Working with dictionaries</h3>

<pre><code class="bash"><span class="hljs-built_in">echo</span> <span class="hljs-variable">${sounds[dog]}</span> <span class="hljs-comment"># Dog&#x27;s sound</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${sounds[@]}</span>   <span class="hljs-comment"># All values</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${!sounds[@]}</span>  <span class="hljs-comment"># All keys</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">${#sounds[@]}</span>  <span class="hljs-comment"># Number of elements</span>
<span class="hljs-built_in">unset</span> sounds[dog]   <span class="hljs-comment"># Delete dog</span>
</code></pre>
<h3 id="iteration">Iteration</h3>
<h4 id="iterate-over-values">Iterate over values</h4>

<pre><code class="bash"><span class="hljs-keyword">for</span> val <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;<span class="hljs-variable">${sounds[@]}</span>&quot;</span>; <span class="hljs-keyword">do</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-variable">$val</span>
<span class="hljs-keyword">done</span>
</code></pre>
<h4 id="iterate-over-keys">Iterate over keys</h4>

<pre><code class="bash"><span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;<span class="hljs-variable">${!sounds[@]}</span>&quot;</span>; <span class="hljs-keyword">do</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-variable">$key</span>
<span class="hljs-keyword">done</span>
</code></pre>
<h2 id="options">Options</h2>
<h3 id="options">Options</h3>

<pre><code class="bash"><span class="hljs-built_in">set</span> -o noclobber  <span class="hljs-comment"># Avoid overlay files (echo &quot;hi&quot; &gt; foo)</span>
<span class="hljs-built_in">set</span> -o errexit    <span class="hljs-comment"># Used to exit upon error, avoiding cascading errors</span>
<span class="hljs-built_in">set</span> -o pipefail   <span class="hljs-comment"># Unveils hidden failures</span>
<span class="hljs-built_in">set</span> -o nounset    <span class="hljs-comment"># Exposes unset variables</span>
</code></pre>
<h3 id="glob-options">Glob options</h3>

<pre><code class="bash"><span class="hljs-built_in">shopt</span> -s nullglob    <span class="hljs-comment"># Non-matching globs are removed  (&#x27;*.foo&#x27; =&gt; &#x27;&#x27;)</span>
<span class="hljs-built_in">shopt</span> -s failglob    <span class="hljs-comment"># Non-matching globs throw errors</span>
<span class="hljs-built_in">shopt</span> -s nocaseglob  <span class="hljs-comment"># Case insensitive globs</span>
<span class="hljs-built_in">shopt</span> -s dotglob     <span class="hljs-comment"># Wildcards match dotfiles (&quot;*.sh&quot; =&gt; &quot;.foo.sh&quot;)</span>
<span class="hljs-built_in">shopt</span> -s globstar    <span class="hljs-comment"># Allow ** for recursive matches (&#x27;lib/**/*.rb&#x27; =&gt; &#x27;lib/a/b/c.rb&#x27;)</span>
</code></pre>
<p>Set <code>GLOBIGNORE</code> as a colon-separated list of patterns to be removed from glob
matches.</p>
<h2 id="history">History</h2>
<h3 id="commands">Commands</h3>

<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>history</code></td>
<td>Show history</td>
</tr>
<tr>
<td><code>shopt -s histverify</code></td>
<td>Don&#39;t execute expanded result immediately</td>
</tr>
</tbody>
</table>
<h3 id="expansions">Expansions</h3>

<table>
<thead>
<tr>
<th>Expression</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>!$</code></td>
<td>Expand last parameter of most recent command</td>
</tr>
<tr>
<td><code>!*</code></td>
<td>Expand all parameters of most recent command</td>
</tr>
<tr>
<td><code>!-n</code></td>
<td>Expand <code>n</code>th most recent command</td>
</tr>
<tr>
<td><code>!n</code></td>
<td>Expand <code>n</code>th command in history</td>
</tr>
<tr>
<td><code>!&lt;command&gt;</code></td>
<td>Expand most recent invocation of command <code>&lt;command&gt;</code></td>
</tr>
</tbody>
</table>
<h3 id="operations">Operations</h3>

<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>!!</code></td>
<td>Execute last command again</td>
</tr>
<tr>
<td><code>!!:s/&lt;FROM&gt;/&lt;TO&gt;/</code></td>
<td>Replace first occurrence of <code>&lt;FROM&gt;</code> to <code>&lt;TO&gt;</code> in most recent command</td>
</tr>
<tr>
<td><code>!!:gs/&lt;FROM&gt;/&lt;TO&gt;/</code></td>
<td>Replace all occurrences of <code>&lt;FROM&gt;</code> to <code>&lt;TO&gt;</code> in most recent command</td>
</tr>
<tr>
<td><code>!$:t</code></td>
<td>Expand only basename from last parameter of most recent command</td>
</tr>
<tr>
<td><code>!$:h</code></td>
<td>Expand only directory from last parameter of most recent command</td>
</tr>
</tbody>
</table>
<p><code>!!</code> and <code>!$</code> can be replaced with any valid expansion.</p>
<h3 id="slices">Slices</h3>

<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>!!:n</code></td>
<td>Expand only <code>n</code>th token from most recent command (command is <code>0</code>; first argument is <code>1</code>)</td>
</tr>
<tr>
<td><code>!^</code></td>
<td>Expand first argument from most recent command</td>
</tr>
<tr>
<td><code>!$</code></td>
<td>Expand last token from most recent command</td>
</tr>
<tr>
<td><code>!!:n-m</code></td>
<td>Expand range of tokens from most recent command</td>
</tr>
<tr>
<td><code>!!:n-$</code></td>
<td>Expand <code>n</code>th token to last from most recent command</td>
</tr>
</tbody>
</table>
<p><code>!!</code> can be replaced with any valid expansion i.e. <code>!cat</code>, <code>!-2</code>, <code>!42</code>, etc.</p>
<h2 id="miscellaneous">Miscellaneous</h2>
<h3 id="numeric-calculations">Numeric calculations</h3>

<pre><code class="bash">$((a + <span class="hljs-number">200</span>))      <span class="hljs-comment"># Add 200 to $a</span>
</code></pre>

<pre><code class="bash">$((<span class="hljs-variable">$RANDOM</span>%<span class="hljs-number">200</span>))  <span class="hljs-comment"># Random number 0..199</span>
</code></pre>
<h3 id="subshells">Subshells</h3>

<pre><code class="bash">(<span class="hljs-built_in">cd</span> somedir; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;I&#x27;m now in <span class="hljs-variable">$PWD</span>&quot;</span>)
<span class="hljs-built_in">pwd</span> <span class="hljs-comment"># still in first directory</span>
</code></pre>
<h3 id="redirection">Redirection</h3>

<pre><code class="bash">python hello.py &gt; output.txt   <span class="hljs-comment"># stdout to (file)</span>
python hello.py &gt;&gt; output.txt  <span class="hljs-comment"># stdout to (file), append</span>
python hello.py 2&gt; error.log   <span class="hljs-comment"># stderr to (file)</span>
python hello.py 2&gt;&amp;1           <span class="hljs-comment"># stderr to stdout</span>
python hello.py 2&gt;/dev/null    <span class="hljs-comment"># stderr to (null)</span>
python hello.py &amp;&gt;/dev/null    <span class="hljs-comment"># stdout and stderr to (null)</span>
</code></pre>

<pre><code class="bash">python hello.py &lt; foo.txt      <span class="hljs-comment"># feed foo.txt to stdin for python</span>
</code></pre>
<h3 id="inspecting-commands">Inspecting commands</h3>

<pre><code class="bash"><span class="hljs-built_in">command</span> -V <span class="hljs-built_in">cd</span>
<span class="hljs-comment">#=&gt; &quot;cd is a function/alias/whatever&quot;</span>
</code></pre>
<h3 id="trap-errors">Trap errors</h3>

<pre><code class="bash"><span class="hljs-built_in">trap</span> <span class="hljs-string">&#x27;echo Error at about $LINENO&#x27;</span> ERR
</code></pre>
<p>or</p>

<pre><code class="bash"><span class="hljs-function"><span class="hljs-title">traperr</span></span>() {
  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;ERROR: <span class="hljs-variable">${BASH_SOURCE[1]}</span> at about <span class="hljs-variable">${BASH_LINENO[0]}</span>&quot;</span>
}

<span class="hljs-built_in">set</span> -o errtrace
<span class="hljs-built_in">trap</span> traperr ERR
</code></pre>
<h3 id="case-switch">Case/switch</h3>

<pre><code class="bash"><span class="hljs-keyword">case</span> <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span> <span class="hljs-keyword">in</span>
  start | up)
    vagrant up
    ;;

  *)
    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Usage: <span class="hljs-variable">$0</span> {start|stop|ssh}&quot;</span>
    ;;
<span class="hljs-keyword">esac</span>
</code></pre>
<h3 id="source-relative">Source relative</h3>

<pre><code class="bash"><span class="hljs-built_in">source</span> <span class="hljs-string">&quot;<span class="hljs-variable">${0%/*}</span>/../share/foo.sh&quot;</span>
</code></pre>
<h3 id="printf">printf</h3>

<pre><code class="bash"><span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;Hello %s, I&#x27;m %s&quot;</span> Sven Olga
<span class="hljs-comment">#=&gt; &quot;Hello Sven, I&#x27;m Olga</span>

<span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;1 + 1 = %d&quot;</span> 2
<span class="hljs-comment">#=&gt; &quot;1 + 1 = 2&quot;</span>

<span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;This is how you print a float: %f&quot;</span> 2
<span class="hljs-comment">#=&gt; &quot;This is how you print a float: 2.000000&quot;</span>
</code></pre>
<h3 id="directory-of-script">Directory of script</h3>

<pre><code class="bash">DIR=<span class="hljs-string">&quot;<span class="hljs-variable">${0%/*}</span>&quot;</span>
</code></pre>
<h3 id="getting-options">Getting options</h3>

<pre><code class="bash"><span class="hljs-keyword">while</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span> =~ ^- &amp;&amp; ! <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span> == <span class="hljs-string">&quot;--&quot;</span> ]]; <span class="hljs-keyword">do</span> <span class="hljs-keyword">case</span> <span class="hljs-variable">$1</span> <span class="hljs-keyword">in</span>
  -V | --version )
    <span class="hljs-built_in">echo</span> <span class="hljs-variable">$version</span>
    <span class="hljs-built_in">exit</span>
    ;;
  -s | --string )
    <span class="hljs-built_in">shift</span>; string=<span class="hljs-variable">$1</span>
    ;;
  -f | --flag )
    flag=1
    ;;
<span class="hljs-keyword">esac</span>; <span class="hljs-built_in">shift</span>; <span class="hljs-keyword">done</span>
<span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span> == <span class="hljs-string">&#x27;--&#x27;</span> ]]; <span class="hljs-keyword">then</span> <span class="hljs-built_in">shift</span>; <span class="hljs-keyword">fi</span>
</code></pre>
<h3 id="heredoc">Heredoc</h3>

<pre><code class="sh">cat &lt;&lt;<span class="hljs-string">END
hello world
END</span>
</code></pre>
<h3 id="reading-input">Reading input</h3>

<pre><code class="bash"><span class="hljs-built_in">echo</span> -n <span class="hljs-string">&quot;Proceed? [y/n]: &quot;</span>
<span class="hljs-built_in">read</span> ans
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$ans</span>
</code></pre>

<pre><code class="bash"><span class="hljs-built_in">read</span> -n 1 ans    <span class="hljs-comment"># Just one character</span>
</code></pre>
<h3 id="special-variables">Special variables</h3>

<table>
<thead>
<tr>
<th>Expression</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$?</code></td>
<td>Exit status of last task</td>
</tr>
<tr>
<td><code>$!</code></td>
<td>PID of last background task</td>
</tr>
<tr>
<td><code>$$</code></td>
<td>PID of shell</td>
</tr>
<tr>
<td><code>$0</code></td>
<td>Filename of the shell script</td>
</tr>
</tbody>
</table>
<p>See <a href="http://wiki.bash-hackers.org/syntax/shellvars#special_parameters_and_shell_variables">Special parameters</a>.</p>
<h3 id="go-to-previous-directory">Go to previous directory</h3>

<pre><code class="bash"><span class="hljs-built_in">pwd</span> <span class="hljs-comment"># /home/user/foo</span>
<span class="hljs-built_in">cd</span> bar/
<span class="hljs-built_in">pwd</span> <span class="hljs-comment"># /home/user/foo/bar</span>
<span class="hljs-built_in">cd</span> -
<span class="hljs-built_in">pwd</span> <span class="hljs-comment"># /home/user/foo</span>
</code></pre>
<h3 id="check-for-command-s-result">Check for command&#39;s result</h3>

<pre><code class="bash"><span class="hljs-keyword">if</span> ping -c 1 google.com; <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;It appears you have a working internet connection&quot;</span>
<span class="hljs-keyword">fi</span>
</code></pre>
<h3 id="grep-check">Grep check</h3>

<pre><code class="bash"><span class="hljs-keyword">if</span> grep -q <span class="hljs-string">&#x27;foo&#x27;</span> ~/.bash_history; <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;You appear to have typed &#x27;foo&#x27; in the past&quot;</span>
<span class="hljs-keyword">fi</span>
</code></pre>
<h2 id="also-see">Also see</h2>

<ul>
<li><a href="http://wiki.bash-hackers.org/">Bash-hackers wiki</a> <em>(bash-hackers.org)</em></li>
<li><a href="http://wiki.bash-hackers.org/syntax/shellvars">Shell vars</a> <em>(bash-hackers.org)</em></li>
<li><a href="https://learnxinyminutes.com/docs/bash/">Learn bash in y minutes</a> <em>(learnxinyminutes.com)</em></li>
<li><a href="http://mywiki.wooledge.org/BashGuide">Bash Guide</a> <em>(mywiki.wooledge.org)</em></li>
<li><a href="https://www.shellcheck.net/">ShellCheck</a> <em>(shellcheck.net)</em></li>
</ul>

</div>
</body>  
</html>