<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Phoenix cheatsheet</title>
  <link href="s/main.css" rel="stylesheet" />
  <script src="s/main.js"></script>
</head>

<body onload="start()">
  <div class="breadcrumbs"><a href="/">Home</a> / <a href="index.html">cheatsheets</a> / Phoenix cheatsheet</div>
  <div class="edit">
      <a href="https://github.com/kjk/blog/blob/master/www/cheatsheets/devhints\phoenix.md" >edit</a>
  </div>
  <div class="toc">
<b>Main</b>: <a href="#quick-start">Quick start</a>, <a href="#directory-structure">Directory structure</a>, <a href="#migrations">Migrations</a>, <a href="#routing">Routing</a>, <a href="#conn">Conn</a>, <a href="#ecto">Ecto</a>, <a href="#also-see">Also see</a><br></div>


  <div id="start"></div>
  <div id="wrapped-content"></div>
<div id="content">
<h3 id="quick-start">Quick start</h3>

<pre><code class="bash"><span class="hljs-comment"># Install Phoenix</span>
mix local.hex
mix archive.install https://github.com/phoenixframework/archives/raw/master/phx_new.ez
</code></pre>

<pre><code class="bash"><span class="hljs-comment"># Create a new project</span>
mix phx.new hello
</code></pre>

<pre><code class="bash"><span class="hljs-comment"># Start the application</span>
mix phx.server
</code></pre>
<p>Install Erlang, Elixir, Node.js, PostgreSQL first.
See: <a href="https://hexdocs.pm/phoenix/installation.html">Installation</a> <em>(hexdocs.pm)</em></p>
<h3 id="directory-structure">Directory structure</h3>

<pre><code>./
├── _build
├── assets/
│   ├── css/
│   ├── js/
│   ├── static/
│   └── node_modules/
├── config/
├── deps/
├── lib/
│   ├── hello/
│   ├── hello.<span class="hljs-keyword">ex</span>
│   ├── hello_web/
│   │   ├── channels/
│   │   ├── controllers/
│   │   ├── templates/
│   │   ├── views/
│   │   ├── router.<span class="hljs-keyword">ex</span>
│   │   └── gettext.<span class="hljs-keyword">ex</span>
│   └── hello_web.<span class="hljs-keyword">ex</span>
├── priv/
└── <span class="hljs-keyword">test</span>/
</code></pre>
<p>See: <a href="https://hexdocs.pm/phoenix/adding_pages.html">Adding pages</a> <em>(hexdocs.pm)</em></p>
<h3 id="migrations">Migrations</h3>

<pre><code class="bash">$ mix ecto.gen.migration update_posts_table
  creating priv/repo/migrations/20160602085927_update_posts_table.exs
  ···
</code></pre>

<pre><code class="elixir">create table(<span class="hljs-symbol">:documents</span>) <span class="hljs-keyword">do</span>
  add <span class="hljs-symbol">:title</span>, <span class="hljs-symbol">:string</span>
  add <span class="hljs-symbol">:title</span>, <span class="hljs-symbol">:string</span>, <span class="hljs-symbol">default:</span> <span class="hljs-string">&quot;Hello&quot;</span>
  add <span class="hljs-symbol">:body</span>, <span class="hljs-symbol">:text</span>
  add <span class="hljs-symbol">:age</span>, <span class="hljs-symbol">:integer</span>
  add <span class="hljs-symbol">:price</span>, <span class="hljs-symbol">:float</span>, <span class="hljs-symbol">precision:</span> <span class="hljs-number">10</span>, <span class="hljs-symbol">scale:</span> <span class="hljs-number">2</span>
  timestamps
<span class="hljs-keyword">end</span>
</code></pre>
<p><a href="./phoenix-migrations">Ecto migrations cheatsheet</a></p>
<h3 id="routing">Routing</h3>

<pre><code class="elixir">get <span class="hljs-string">&quot;/&quot;</span>, PageController, <span class="hljs-symbol">:index</span>

resources <span class="hljs-string">&quot;/users&quot;</span>, UserController <span class="hljs-keyword">do</span>
  resources <span class="hljs-string">&quot;/posts&quot;</span>, PostController
<span class="hljs-keyword">end</span>
</code></pre>

<pre><code class="elixir">user_post_path(conn, <span class="hljs-symbol">:index</span>, <span class="hljs-number">17</span>)     <span class="hljs-comment"># → /users/17/posts</span>
user_post_path(conn, <span class="hljs-symbol">:show</span>, <span class="hljs-number">17</span>, <span class="hljs-number">12</span>)  <span class="hljs-comment"># → /users/17/posts/12</span>
</code></pre>
<p><a href="./phoenix-routing">Phoenix routing cheatsheet</a></p>
<h3 id="conn">Conn</h3>

<pre><code class="elixir">conn.host          <span class="hljs-comment"># → &quot;example.com&quot;</span>
conn.method        <span class="hljs-comment"># → &quot;GET&quot;</span>
conn.path_info     <span class="hljs-comment"># → [&quot;posts&quot;, &quot;1&quot;]</span>
conn.request_path  <span class="hljs-comment"># → &quot;/posts/1&quot;</span>
</code></pre>

<pre><code class="elixir">conn
|&gt; put_status(<span class="hljs-number">202</span>)
|&gt; html(<span class="hljs-string">&quot;&lt;html&gt;&lt;head&gt;···&quot;</span>)
|&gt; json(%{ <span class="hljs-symbol">message:</span> <span class="hljs-string">&quot;Hello&quot;</span> })
|&gt; text(<span class="hljs-string">&quot;Hello&quot;</span>)
|&gt; redirect(<span class="hljs-symbol">to:</span> <span class="hljs-string">&quot;/foo&quot;</span>)
|&gt; render(<span class="hljs-string">&quot;index.html&quot;</span>)
|&gt; render(<span class="hljs-string">&quot;index.html&quot;</span>, <span class="hljs-symbol">hello:</span> <span class="hljs-string">&quot;world&quot;</span>)
|&gt; render(MyApp.ErrorView, <span class="hljs-string">&quot;404.html&quot;</span>)
</code></pre>
<p><a href="./phoenix-conn">Phoenix conn cheatsheet</a></p>
<h3 id="ecto">Ecto</h3>

<pre><code class="bash">$ mix phx.gen.html \
    Accounts \       <span class="hljs-comment"># domain</span>
    Profile \        <span class="hljs-comment"># schema</span>
    profiles \       <span class="hljs-comment"># table name</span>
    email:string \
    age:<span class="hljs-built_in">integer</span>
</code></pre>
<p><a href="./phoenix-ecto">Ecto cheatsheet</a></p>
<h3 id="also-see">Also see</h3>

<ul>
<li><a href="http://phoenixframework.org/">Phoenix framework site</a> <em>(phoenixframework.org)</em></li>
<li><a href="https://hexdocs.pm/phoenix/overview.html">Phoenix: getting started</a> <em>(hexdocs.pm)</em></li>
</ul>

</div>
</body>  
</html>