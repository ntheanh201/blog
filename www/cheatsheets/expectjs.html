<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>expect.js cheatsheet</title>
  <link href="s/main.css" rel="stylesheet" />
  <script src="s/main.js"></script>
</head>

<body onload="start()">
  <div class="breadcrumbs"><a href="/">Home</a> / <a href="index.html">cheatsheets</a> / expect.js cheatsheet</div>
  <div class="edit">
      <a href="https://github.com/kjk/blog/blob/master/www/cheatsheets/devhints\expectjs.md" >edit</a>
  </div>
  <div class="toc">
<b>Main</b>: <a href="#using">Using</a>, <a href="#assertions">Assertions</a>, <a href="#chaining-assertions">Chaining assertions</a>, <a href="#spies">Spies</a>, <a href="#assertions-on-spies">Assertions on spies</a>, <a href="#references">References</a><br></div>


  <div id="start"></div>
  <div id="wrapped-content"></div>
<div id="content">
<h3 id="using">Using</h3>

<pre><code>npm install --<span class="hljs-built_in">save</span>-<span class="hljs-built_in">dev</span> expect
</code></pre>

<pre><code class="js"><span class="hljs-comment">// using ES6 modules</span>
<span class="hljs-keyword">import</span> expect, { createSpy, spyOn, isSpy } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;expect&#x27;</span>
</code></pre>

<pre><code class="js"><span class="hljs-comment">// using CommonJS modules</span>
<span class="hljs-keyword">var</span> expect = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;expect&#x27;</span>)
<span class="hljs-keyword">var</span> createSpy = expect.<span class="hljs-property">createSpy</span>
<span class="hljs-keyword">var</span> spyOn = expect.<span class="hljs-property">spyOn</span>
<span class="hljs-keyword">var</span> isSpy = expect.<span class="hljs-property">isSpy</span>
</code></pre>
<p>Expect is a library for assertions in tests.
See: <a href="https://github.com/mjackson/expect">mjackson/expect</a></p>
<h3 id="assertions">Assertions</h3>

<pre><code class="js"><span class="hljs-title function_">expect</span>(x).<span class="hljs-title function_">toBe</span>(y)
  .<span class="hljs-title function_">toBe</span>(val)
  .<span class="hljs-title function_">toEqual</span>(val)
  .<span class="hljs-title function_">toThrow</span>(err)
  .<span class="hljs-title function_">toExist</span>()          <span class="hljs-comment">// aka: toBeTruthy()</span>
  .<span class="hljs-title function_">toNotExist</span>()       <span class="hljs-comment">// aka: toBeFalsy()</span>
  .<span class="hljs-title function_">toBeA</span>(constructor)
  .<span class="hljs-title function_">toBeA</span>(<span class="hljs-string">&#x27;string&#x27;</span>)
  .<span class="hljs-title function_">toMatch</span>(<span class="hljs-regexp">/expr/</span>)
  .<span class="hljs-title function_">toBeLessThan</span>(n)
  .<span class="hljs-title function_">toBeGreaterThan</span>(n)
  .<span class="hljs-title function_">toBeLessThanOrEqualTo</span>(n)
  .<span class="hljs-title function_">toBeGreaterThanOrEqualTo</span>(n)
  .<span class="hljs-title function_">toInclude</span>(val)     <span class="hljs-comment">// aka: toContain(val)</span>
  .<span class="hljs-title function_">toExclude</span>(val)
  .<span class="hljs-title function_">toIncludeKey</span>(key)
  .<span class="hljs-title function_">toExcludeKey</span>(key)
</code></pre>
<p>Also: <code>toNotBe</code>, <code>toNotEqual</code>, etc for negatives.</p>
<h3 id="chaining-assertions">Chaining assertions</h3>

<pre><code class="js"><span class="hljs-title function_">expect</span>(<span class="hljs-number">3.14</span>)
  .<span class="hljs-title function_">toExist</span>()
  .<span class="hljs-title function_">toBeLessThan</span>(<span class="hljs-number">4</span>)
  .<span class="hljs-title function_">toBeGreaterThan</span>(<span class="hljs-number">3</span>)
</code></pre>
<p>Assertions can be chained.</p>
<h3 id="spies">Spies</h3>

<pre><code class="js"><span class="hljs-keyword">const</span> video = {
  <span class="hljs-attr">play</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) { ··· }
}
</code></pre>

<pre><code class="js">spy = expect.<span class="hljs-title function_">spyOn</span>(video, <span class="hljs-string">&#x27;play&#x27;</span>)
</code></pre>

<pre><code class="js">spy = expect.<span class="hljs-title function_">spyOn</span>(···)
  .<span class="hljs-title function_">andCallThrough</span>()      <span class="hljs-comment">// pass through</span>
  .<span class="hljs-title function_">andCall</span>(fn)
  .<span class="hljs-title function_">andThrow</span>(exception)
  .<span class="hljs-title function_">andReturn</span>(value)
</code></pre>
<h3 id="assertions-on-spies">Assertions on spies</h3>

<pre><code class="js"><span class="hljs-title function_">expect</span>(spy.<span class="hljs-property">calls</span>.<span class="hljs-property">length</span>).<span class="hljs-title function_">toEqual</span>(<span class="hljs-number">1</span>)
<span class="hljs-title function_">expect</span>(spy.<span class="hljs-property">calls</span>[<span class="hljs-number">0</span>].<span class="hljs-property">context</span>).<span class="hljs-title function_">toBe</span>(video)
<span class="hljs-title function_">expect</span>(spy.<span class="hljs-property">calls</span>[<span class="hljs-number">0</span>].<span class="hljs-property">arguments</span>).<span class="hljs-title function_">toEqual</span>([ <span class="hljs-string">&#x27;some&#x27;</span>, <span class="hljs-string">&#x27;args&#x27;</span> ])
<span class="hljs-title function_">expect</span>(spy.<span class="hljs-title function_">getLastCall</span>().<span class="hljs-property">arguments</span>).<span class="hljs-title function_">toEqual</span>(...)
</code></pre>

<pre><code class="js"><span class="hljs-title function_">expect</span>(spy).<span class="hljs-title function_">toHaveBeenCalled</span>()
<span class="hljs-title function_">expect</span>(spy).<span class="hljs-title function_">toHaveBeenCalledWith</span>(<span class="hljs-string">&#x27;some&#x27;</span>, <span class="hljs-string">&#x27;args&#x27;</span>)
</code></pre>
<h3 id="references">References</h3>

<ul>
<li><a href="https://www.npmjs.com/package/expect">https://www.npmjs.com/package/expect</a></li>
<li><a href="https://github.com/mjackson/expect">https://github.com/mjackson/expect</a></li>
</ul>

</div>
</body>  
</html>