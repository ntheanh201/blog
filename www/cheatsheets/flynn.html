<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Flynn cheatsheet</title>
  <link href="s/main.css" rel="stylesheet" />
  <script src="s/main.js"></script>
</head>

<body onload="start()">
  <div class="breadcrumbs"><a href="/">Home</a> / <a href="index.html">cheatsheets</a> / Flynn cheatsheet</div>
  <div class="edit">
      <a href="https://github.com/kjk/blog/blob/master/www/cheatsheets/devhints\flynn.md" >edit</a>
  </div>
  <div class="toc">
<b>Main</b>: <a href="#general-workflow">General workflow</a>, <a href="#creating-a-cluster-aws-">Creating a cluster (AWS)</a>, <a href="#using-a-flynn-cluster">Using a flynn cluster</a>, <a href="#setting-up-a-new-app">Setting up a new app</a><br>
<b>Commands</b>: <a href="#environment-vars">Environment vars</a>, <a href="#scale">Scale</a>, <a href="#logs">Logs</a>, <a href="#running-commands">Running commands</a>, <a href="#manage-routes">Manage routes</a>, <a href="#more">More</a><br>
<a href="#also-see">Also see</a><br></div>


  <div id="start"></div>
  <div id="wrapped-content"></div>
<div id="content">
<h3 id="general-workflow">General workflow</h3>

<ul>
<li>Start a flynn cluster (on amazon or vagrant)</li>
<li><code>flynn cluster add</code> to add that cluster</li>
<li><code>flynn create NAME</code> in your app</li>
<li><code>git push flynn master</code> to deploy</li>
</ul>
<h3 id="creating-a-cluster-aws-">Creating a cluster (AWS)</h3>

<pre><code class="bash">flynn install  <span class="hljs-comment"># (provisions AWS EC2 stuff)</span>
flynn key add  <span class="hljs-comment"># (adds your pubkey to AWS)</span>
</code></pre>
<h4 id="what-it-does">What it does</h4>

<ul>
<li>This creates <code>XXXX.flynnhub.com</code></li>
<li>Dashboard in <code>dashboard.XXXX.flynnhub.com</code></li>
<li>Use <code>flynn -a dashboard env get LOGIN_TOKEN</code> to get login token</li>
<li>Apps live in <code>APP.XXXX.flynnhub.com</code></li>
</ul>
<h3 id="using-a-flynn-cluster">Using a flynn cluster</h3>
<p>Managed in <code>~/.flynnrc</code>:</p>

<pre><code class="bash">flynn cluster
flynn cluster add [-g githost] [-p pin] NAME URL KEY
flynn cluster remove NAME
flynn cluster default NAME <span class="hljs-comment"># use this current</span>
</code></pre>
<h3 id="setting-up-a-new-app">Setting up a new app</h3>

<pre><code class="bash"><span class="hljs-built_in">cd</span> ~/project
flynn create example <span class="hljs-comment"># adds the `flynn` remote</span>
flynn route <span class="hljs-comment"># prints http routes</span>
git push flynn master
</code></pre>
<h2 id="commands">Commands</h2>
<h3 id="environment-vars">Environment vars</h3>

<pre><code class="bash">flynn env
flynn env <span class="hljs-built_in">set</span> FOO=bar BAZ=foobar
flynn env <span class="hljs-built_in">unset</span> FOO
</code></pre>
<h3 id="scale">Scale</h3>

<pre><code class="bash">flynn ps
flynn scale web=3
</code></pre>
<h3 id="logs">Logs</h3>

<pre><code class="bash">flynn <span class="hljs-built_in">log</span>
flynn <span class="hljs-built_in">log</span> flynn-d55c7a...
</code></pre>
<h3 id="running-commands">Running commands</h3>

<pre><code class="bash">flynn run rake db:migrate
</code></pre>
<h3 id="manage-routes">Manage routes</h3>

<pre><code class="bash">flynn route
flynn route add http example.com
<span class="hljs-comment"># then make a CNAME from example.com to myapp.xxxx.flynnhub.com</span>
</code></pre>
<h3 id="more">More</h3>

<pre><code class="bash">flynn ps
flynn <span class="hljs-built_in">kill</span> &lt;job&gt;

flynn meta
flynn meta <span class="hljs-built_in">set</span> foo=baz
</code></pre>
<h2 id="also-see">Also see</h2>

<ul>
<li><a href="https://flynn.io/">Flynn website</a> <em>(flynn.io)</em></li>
</ul>

</div>
</body>  
</html>