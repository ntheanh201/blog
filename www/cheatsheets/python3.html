<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Python 3 cheatsheet</title>
  <link href="s/main.css" rel="stylesheet" />
  <script src="s/main.js"></script>
</head>

<body onload="start()">
  <div class="breadcrumbs"><a href="/">Home</a> / <a href="index.html">cheatsheets</a> / Python 3 cheatsheet</div>
  <div class="edit">
      <a href="https://github.com/kjk/blog/blob/master/www/cheatsheets/other/python3.md" >edit</a>
  </div>
  <div class="toc">
<b>Collections</b>: <a href="#list">List</a>, <a href="#dictionary">Dictionary</a>, <a href="#counter">Counter</a>, <a href="#set">Set</a>, <a href="#frozenset">Frozenset</a>, <a href="#range">Range</a>, <a href="#enumerate">Enumerate</a>, <a href="#named-tuple">Named Tuple</a>, <a href="#iterator">Iterator</a>, <a href="#generator">Generator</a><br>
<b>Types</b>: <a href="#abc">ABC</a>, <a href="#string">String</a>, <a href="#char">Char</a>, <a href="#regex">Regex</a>, <a href="#format">Format</a>, <a href="#numbers">Numbers</a>, <a href="#combinatorics">Combinatorics</a>, <a href="#datetime">Datetime</a><br>
<b>Syntax</b>: <a href="#arguments">Arguments</a>, <a href="#splat-operator">Splat Operator</a>, <a href="#inline">Inline</a>, <a href="#dataclass">Dataclass</a>, <a href="#closure">Closure</a>, <a href="#decorator">Decorator</a>, <a href="#class">Class</a>, <a href="#duck-types">Duck Types</a>, <a href="#enum">Enum</a>, <a href="#exceptions">Exceptions</a><br>
<b>System</b>: <a href="#print">Print</a>, <a href="#input">Input</a>, <a href="#command-line-arguments">Command Line Arguments</a>, <a href="#open">Open</a>, <a href="#path">Path</a>, <a href="#command-execution">Command Execution</a><br>
<b>Data</b>: <a href="#csv">CSV</a>, <a href="#json">JSON</a>, <a href="#pickle">Pickle</a>, <a href="#sqlite">SQLite</a>, <a href="#bytes">Bytes</a>, <a href="#struct">Struct</a>, <a href="#array">Array</a>, <a href="#memory-view">Memory View</a>, <a href="#deque">Deque</a><br>
<b>Advanced</b>: <a href="#threading">Threading</a>, <a href="#introspection">Introspection</a>, <a href="#metaprograming">Metaprograming</a>, <a href="#operator">Operator</a>, <a href="#eval">Eval</a>, <a href="#coroutine">Coroutine</a><br>
<b>Libraries</b>: <a href="#progress-bar">Progress Bar</a>, <a href="#plot">Plot</a>, <a href="#table">Table</a>, <a href="#curses">Curses</a>, <a href="#logging">Logging</a>, <a href="#web-scraping">Web Scraping</a>, <a href="#web">Web</a>, <a href="#profile">Profile</a>, <a href="#numpy">NumPy</a>, <a href="#image">Image</a>, <a href="#audio">Audio</a><br>
<a href="#intro">Intro</a><br></div>


  <div id="start"></div>
  <div id="wrapped-content"></div>
<div id="content">
<h2 id="collections">Collections</h2>
<h3 id="list">List</h3>

<pre><code class="python">&lt;<span class="hljs-built_in">list</span>&gt; = &lt;<span class="hljs-built_in">list</span>&gt;[from_inclusive : to_exclusive : Â±step_size]
</code></pre>

<pre><code class="python">&lt;<span class="hljs-built_in">list</span>&gt;.append(&lt;el&gt;)            <span class="hljs-comment"># Or: &lt;list&gt; += [&lt;el&gt;]</span>
&lt;<span class="hljs-built_in">list</span>&gt;.extend(&lt;collection&gt;)    <span class="hljs-comment"># Or: &lt;list&gt; += &lt;collection&gt;</span>
</code></pre>

<pre><code class="python">&lt;<span class="hljs-built_in">list</span>&gt;.sort()
&lt;<span class="hljs-built_in">list</span>&gt;.reverse()
&lt;<span class="hljs-built_in">list</span>&gt; = <span class="hljs-built_in">sorted</span>(&lt;collection&gt;)
&lt;<span class="hljs-built_in">iter</span>&gt; = <span class="hljs-built_in">reversed</span>(&lt;<span class="hljs-built_in">list</span>&gt;)
</code></pre>

<pre><code class="python">sum_of_elements  = <span class="hljs-built_in">sum</span>(&lt;collection&gt;)
elementwise_sum  = [<span class="hljs-built_in">sum</span>(pair) <span class="hljs-keyword">for</span> pair <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(list_a, list_b)]
sorted_by_second = <span class="hljs-built_in">sorted</span>(&lt;collection&gt;, key=<span class="hljs-keyword">lambda</span> el: el[<span class="hljs-number">1</span>])
sorted_by_both   = <span class="hljs-built_in">sorted</span>(&lt;collection&gt;, key=<span class="hljs-keyword">lambda</span> el: (el[<span class="hljs-number">1</span>], el[<span class="hljs-number">0</span>]))
flatter_list     = <span class="hljs-built_in">list</span>(itertools.chain.from_iterable(&lt;<span class="hljs-built_in">list</span>&gt;))
product_of_elems = functools.reduce(<span class="hljs-keyword">lambda</span> out, x: out * x, &lt;collection&gt;)
list_of_chars    = <span class="hljs-built_in">list</span>(&lt;<span class="hljs-built_in">str</span>&gt;)
</code></pre>

<pre><code class="python">index = &lt;<span class="hljs-built_in">list</span>&gt;.index(&lt;el&gt;)     <span class="hljs-comment"># Returns first index of item.</span>
&lt;<span class="hljs-built_in">list</span>&gt;.insert(index, &lt;el&gt;)     <span class="hljs-comment"># Inserts item at index and moves the rest to the right.</span>
&lt;el&gt; = &lt;<span class="hljs-built_in">list</span>&gt;.pop([index])     <span class="hljs-comment"># Removes and returns item at index or from the end.</span>
&lt;<span class="hljs-built_in">list</span>&gt;.remove(&lt;el&gt;)            <span class="hljs-comment"># Removes first occurrence of item or raises ValueError.</span>
&lt;<span class="hljs-built_in">list</span>&gt;.clear()                 <span class="hljs-comment"># Removes all items.</span>
</code></pre>
<h3 id="dictionary">Dictionary</h3>

<pre><code class="python">&lt;view&gt; = &lt;<span class="hljs-built_in">dict</span>&gt;.keys()                          <span class="hljs-comment"># Coll. of keys that reflects changes.</span>
&lt;view&gt; = &lt;<span class="hljs-built_in">dict</span>&gt;.values()                        <span class="hljs-comment"># Coll. of values that reflects changes.</span>
&lt;view&gt; = &lt;<span class="hljs-built_in">dict</span>&gt;.items()                         <span class="hljs-comment"># Coll. of key-value tuples.</span>
</code></pre>

<pre><code class="python">value  = &lt;<span class="hljs-built_in">dict</span>&gt;.get(key, default=<span class="hljs-literal">None</span>)          <span class="hljs-comment"># Returns default if key does not exist.</span>
value  = &lt;<span class="hljs-built_in">dict</span>&gt;.setdefault(key, default=<span class="hljs-literal">None</span>)   <span class="hljs-comment"># Same, but also adds default to dict.</span>
&lt;<span class="hljs-built_in">dict</span>&gt; = collections.defaultdict(&lt;<span class="hljs-built_in">type</span>&gt;)        <span class="hljs-comment"># Creates a dict with default value of type.</span>
&lt;<span class="hljs-built_in">dict</span>&gt; = collections.defaultdict(<span class="hljs-keyword">lambda</span>: <span class="hljs-number">1</span>)     <span class="hljs-comment"># Creates a dict with default value 1.</span>
</code></pre>

<pre><code class="python">&lt;<span class="hljs-built_in">dict</span>&gt;.update(&lt;<span class="hljs-built_in">dict</span>&gt;)                           <span class="hljs-comment"># Or: dict_a = {**dict_a, **dict_b}.</span>
&lt;<span class="hljs-built_in">dict</span>&gt; = <span class="hljs-built_in">dict</span>(&lt;collection&gt;)                     <span class="hljs-comment"># Creates a dict from coll. of key-value pairs.</span>
&lt;<span class="hljs-built_in">dict</span>&gt; = <span class="hljs-built_in">dict</span>(<span class="hljs-built_in">zip</span>(keys, values))                <span class="hljs-comment"># Creates a dict from two collections.</span>
&lt;<span class="hljs-built_in">dict</span>&gt; = <span class="hljs-built_in">dict</span>.fromkeys(keys [, value])          <span class="hljs-comment"># Creates a dict from collection of keys.</span>
</code></pre>

<pre><code class="python">value = &lt;<span class="hljs-built_in">dict</span>&gt;.pop(key)                         <span class="hljs-comment"># Removes item from dictionary.</span>
{k: v <span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">in</span> &lt;<span class="hljs-built_in">dict</span>&gt;.items() <span class="hljs-keyword">if</span> k <span class="hljs-keyword">in</span> keys}  <span class="hljs-comment"># Filters dictionary by keys.</span>
</code></pre>
<h3 id="counter">Counter</h3>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> Counter
<span class="hljs-meta">&gt;&gt;&gt; </span>colors = [<span class="hljs-string">&#x27;red&#x27;</span>, <span class="hljs-string">&#x27;blue&#x27;</span>, <span class="hljs-string">&#x27;yellow&#x27;</span>, <span class="hljs-string">&#x27;blue&#x27;</span>, <span class="hljs-string">&#x27;red&#x27;</span>, <span class="hljs-string">&#x27;blue&#x27;</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>counter = Counter(colors)
Counter({<span class="hljs-string">&#x27;blue&#x27;</span>: <span class="hljs-number">3</span>, <span class="hljs-string">&#x27;red&#x27;</span>: <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;yellow&#x27;</span>: <span class="hljs-number">1</span>})
<span class="hljs-meta">&gt;&gt;&gt; </span>counter.most_common()[<span class="hljs-number">0</span>]
(<span class="hljs-string">&#x27;blue&#x27;</span>, <span class="hljs-number">3</span>)
</code></pre>
<h3 id="set">Set</h3>

<pre><code class="python">&lt;<span class="hljs-built_in">set</span>&gt; = <span class="hljs-built_in">set</span>()
</code></pre>

<pre><code class="python">&lt;<span class="hljs-built_in">set</span>&gt;.add(&lt;el&gt;)                               <span class="hljs-comment"># Or: &lt;set&gt; |= {&lt;el&gt;}</span>
&lt;<span class="hljs-built_in">set</span>&gt;.update(&lt;collection&gt;)                    <span class="hljs-comment"># Or: &lt;set&gt; |= &lt;set&gt;</span>
</code></pre>

<pre><code class="python">&lt;<span class="hljs-built_in">set</span>&gt;  = &lt;<span class="hljs-built_in">set</span>&gt;.union(&lt;coll.&gt;)                 <span class="hljs-comment"># Or: &lt;set&gt; | &lt;set&gt;</span>
&lt;<span class="hljs-built_in">set</span>&gt;  = &lt;<span class="hljs-built_in">set</span>&gt;.intersection(&lt;coll.&gt;)          <span class="hljs-comment"># Or: &lt;set&gt; &amp; &lt;set&gt;</span>
&lt;<span class="hljs-built_in">set</span>&gt;  = &lt;<span class="hljs-built_in">set</span>&gt;.difference(&lt;coll.&gt;)            <span class="hljs-comment"># Or: &lt;set&gt; - &lt;set&gt;</span>
&lt;<span class="hljs-built_in">set</span>&gt;  = &lt;<span class="hljs-built_in">set</span>&gt;.symmetric_difference(&lt;coll.&gt;)  <span class="hljs-comment"># Or: &lt;set&gt; ^ &lt;set&gt;</span>
&lt;<span class="hljs-built_in">bool</span>&gt; = &lt;<span class="hljs-built_in">set</span>&gt;.issubset(&lt;coll.&gt;)              <span class="hljs-comment"># Or: &lt;set&gt; &lt;= &lt;set&gt;</span>
&lt;<span class="hljs-built_in">bool</span>&gt; = &lt;<span class="hljs-built_in">set</span>&gt;.issuperset(&lt;coll.&gt;)            <span class="hljs-comment"># Or: &lt;set&gt; &gt;= &lt;set&gt;</span>
</code></pre>

<pre><code class="python">&lt;<span class="hljs-built_in">set</span>&gt;.remove(&lt;el&gt;)                            <span class="hljs-comment"># Raises KeyError.</span>
&lt;<span class="hljs-built_in">set</span>&gt;.discard(&lt;el&gt;)                           <span class="hljs-comment"># Doesn&#x27;t raise an error.</span>
</code></pre>
<h3 id="frozenset">Frozenset</h3>
<p>Is hashable, meaning it can be used as a key in a dictionary or as an element in a set.</p>

<pre><code class="python">&lt;<span class="hljs-built_in">frozenset</span>&gt; = <span class="hljs-built_in">frozenset</span>(&lt;collection&gt;)
</code></pre>
<h3 id="range">Range</h3>

<pre><code class="python">&lt;<span class="hljs-built_in">range</span>&gt; = <span class="hljs-built_in">range</span>(to_exclusive)
&lt;<span class="hljs-built_in">range</span>&gt; = <span class="hljs-built_in">range</span>(from_inclusive, to_exclusive)
&lt;<span class="hljs-built_in">range</span>&gt; = <span class="hljs-built_in">range</span>(from_inclusive, to_exclusive, Â±step_size)
</code></pre>

<pre><code class="python">from_inclusive = &lt;<span class="hljs-built_in">range</span>&gt;.start
to_exclusive   = &lt;<span class="hljs-built_in">range</span>&gt;.stop
</code></pre>
<h3 id="enumerate">Enumerate</h3>

<pre><code class="python"><span class="hljs-keyword">for</span> i, el <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(&lt;collection&gt; [, i_start]):
    ...
</code></pre>
<h3 id="named-tuple">Named Tuple</h3>

<ul>
<li>Tuple is an immutable and hashable list.</li>
<li>Named tuple is its subclass with named elements.</li>
</ul>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> namedtuple
<span class="hljs-meta">&gt;&gt;&gt; </span>Point = namedtuple(<span class="hljs-string">&#x27;Point&#x27;</span>, <span class="hljs-string">&#x27;x y&#x27;</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>p = Point(<span class="hljs-number">1</span>, y=<span class="hljs-number">2</span>)
Point(x=<span class="hljs-number">1</span>, y=<span class="hljs-number">2</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>p[<span class="hljs-number">0</span>]
<span class="hljs-number">1</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>p.x
<span class="hljs-number">1</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">getattr</span>(p, <span class="hljs-string">&#x27;y&#x27;</span>)
<span class="hljs-number">2</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>p._fields  <span class="hljs-comment"># Or: Point._fields</span>
(<span class="hljs-string">&#x27;x&#x27;</span>, <span class="hljs-string">&#x27;y&#x27;</span>)
</code></pre>
<h3 id="iterator">Iterator</h3>

<pre><code class="python"><span class="hljs-keyword">from</span> itertools <span class="hljs-keyword">import</span> count, repeat, cycle, chain, islice
</code></pre>

<pre><code class="python">&lt;<span class="hljs-built_in">iter</span>&gt; = <span class="hljs-built_in">iter</span>(&lt;collection&gt;)
&lt;<span class="hljs-built_in">iter</span>&gt; = <span class="hljs-built_in">iter</span>(&lt;function&gt;, to_exclusive)     <span class="hljs-comment"># Sequence of return values until &#x27;to_exclusive&#x27;.</span>
&lt;el&gt;   = <span class="hljs-built_in">next</span>(&lt;<span class="hljs-built_in">iter</span>&gt; [, default])           <span class="hljs-comment"># Raises StopIteration or returns &#x27;default&#x27; on end.</span>
</code></pre>

<pre><code class="python">&lt;<span class="hljs-built_in">iter</span>&gt; = count(start=<span class="hljs-number">0</span>, step=<span class="hljs-number">1</span>)             <span class="hljs-comment"># Returns incremented value endlessly.</span>
&lt;<span class="hljs-built_in">iter</span>&gt; = repeat(&lt;el&gt; [, times])             <span class="hljs-comment"># Returns element endlessly or &#x27;times&#x27; times.</span>
&lt;<span class="hljs-built_in">iter</span>&gt; = cycle(&lt;collection&gt;)                <span class="hljs-comment"># Repeats the sequence indefinitely.</span>
</code></pre>

<pre><code class="python">&lt;<span class="hljs-built_in">iter</span>&gt; = chain(&lt;coll.&gt;, &lt;coll.&gt;, ...)       <span class="hljs-comment"># Empties collections in order.</span>
&lt;<span class="hljs-built_in">iter</span>&gt; = chain.from_iterable(&lt;collection&gt;)  <span class="hljs-comment"># Empties collections inside a collection in order.</span>
</code></pre>

<pre><code class="python">&lt;<span class="hljs-built_in">iter</span>&gt; = islice(&lt;collection&gt;, to_exclusive)
&lt;<span class="hljs-built_in">iter</span>&gt; = islice(&lt;collection&gt;, from_inclusive, to_exclusive)
&lt;<span class="hljs-built_in">iter</span>&gt; = islice(&lt;collection&gt;, from_inclusive, to_exclusive, step_size)
</code></pre>
<h3 id="generator">Generator</h3>
<p>Convenient way to implement the iterator protocol.</p>

<pre><code class="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">count</span>(<span class="hljs-params">start, step</span>):
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        <span class="hljs-keyword">yield</span> start
        start += step
</code></pre>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span>counter = count(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">next</span>(counter), <span class="hljs-built_in">next</span>(counter), <span class="hljs-built_in">next</span>(counter)
(<span class="hljs-number">10</span>, <span class="hljs-number">12</span>, <span class="hljs-number">14</span>)
</code></pre>
<h2 id="types">Types</h2>

<ul>
<li>Everything is an object.</li>
<li>Every object has a type.</li>
<li>Type and class are synonymous.</li>
</ul>

<pre><code class="python">&lt;<span class="hljs-built_in">type</span>&gt; = <span class="hljs-built_in">type</span>(&lt;el&gt;)                <span class="hljs-comment"># Or: &lt;el&gt;.__class__</span>
&lt;<span class="hljs-built_in">bool</span>&gt; = <span class="hljs-built_in">isinstance</span>(&lt;el&gt;, &lt;<span class="hljs-built_in">type</span>&gt;)  <span class="hljs-comment"># Or: issubclass(type(&lt;el&gt;), &lt;type&gt;)</span>
</code></pre>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">type</span>(<span class="hljs-string">&#x27;a&#x27;</span>), <span class="hljs-string">&#x27;a&#x27;</span>.__class__, <span class="hljs-built_in">str</span>
(&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;str&#x27;</span>&gt;, &lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;str&#x27;</span>&gt;, &lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;str&#x27;</span>&gt;)
</code></pre>
<p><strong>Some types do not have builtin names, so they must be imported</strong>:</p>

<pre><code class="python"><span class="hljs-keyword">from</span> types <span class="hljs-keyword">import</span> FunctionType, MethodType, LambdaType, GeneratorType
</code></pre>
<h3 id="abc">ABC</h3>
<p>An abstract base class introduces virtual subclasses, that donât inherit from it but are still recognized by isinstance() and issubclass().</p>

<pre><code class="python"><span class="hljs-keyword">from</span> numbers <span class="hljs-keyword">import</span> Integral, Rational, Real, Complex, Number
<span class="hljs-keyword">from</span> collections.abc <span class="hljs-keyword">import</span> <span class="hljs-type">Sequence</span>, Collection, Iterable
</code></pre>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">isinstance</span>(<span class="hljs-number">123</span>, Number)
<span class="hljs-literal">True</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">isinstance</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], Iterable)
<span class="hljs-literal">True</span>
</code></pre>
<h3 id="string">String</h3>

<pre><code class="python">&lt;<span class="hljs-built_in">str</span>&gt;  = &lt;<span class="hljs-built_in">str</span>&gt;.strip()                       <span class="hljs-comment"># Strips all whitespace characters from both ends.</span>
&lt;<span class="hljs-built_in">str</span>&gt;  = &lt;<span class="hljs-built_in">str</span>&gt;.strip(<span class="hljs-string">&#x27;&lt;chars&gt;&#x27;</span>)              <span class="hljs-comment"># Strips all passed characters from both ends.</span>
</code></pre>

<pre><code class="python">&lt;<span class="hljs-built_in">list</span>&gt; = &lt;<span class="hljs-built_in">str</span>&gt;.split()                       <span class="hljs-comment"># Splits on any whitespace character.</span>
&lt;<span class="hljs-built_in">list</span>&gt; = &lt;<span class="hljs-built_in">str</span>&gt;.split(sep=<span class="hljs-literal">None</span>, maxsplit=-<span class="hljs-number">1</span>)  <span class="hljs-comment"># Splits on &#x27;sep&#x27; str at most &#x27;maxsplit&#x27; times.</span>
&lt;<span class="hljs-built_in">str</span>&gt;  = &lt;<span class="hljs-built_in">str</span>&gt;.join(&lt;collection&gt;)            <span class="hljs-comment"># Joins elements using string as separator.</span>
</code></pre>

<pre><code class="python">&lt;<span class="hljs-built_in">str</span>&gt;  = &lt;<span class="hljs-built_in">str</span>&gt;.replace(old, new [, count])   <span class="hljs-comment"># Replaces &#x27;old&#x27; with &#x27;new&#x27; at most &#x27;count&#x27; times.</span>
&lt;<span class="hljs-built_in">bool</span>&gt; = &lt;<span class="hljs-built_in">str</span>&gt;.startswith(&lt;sub_str&gt;)         <span class="hljs-comment"># Pass tuple of strings for multiple options.</span>
&lt;<span class="hljs-built_in">bool</span>&gt; = &lt;<span class="hljs-built_in">str</span>&gt;.endswith(&lt;sub_str&gt;)           <span class="hljs-comment"># Pass tuple of strings for multiple options.</span>
&lt;<span class="hljs-built_in">int</span>&gt;  = &lt;<span class="hljs-built_in">str</span>&gt;.index(&lt;sub_str&gt;)              <span class="hljs-comment"># Returns start index of first match.</span>
</code></pre>

<pre><code class="python">&lt;<span class="hljs-built_in">bool</span>&gt; = &lt;<span class="hljs-built_in">str</span>&gt;.isnumeric()                   <span class="hljs-comment"># True if str contains only numeric characters.</span>
&lt;<span class="hljs-built_in">list</span>&gt; = textwrap.wrap(&lt;<span class="hljs-built_in">str</span>&gt;, width)         <span class="hljs-comment"># Nicely breaks string into lines.</span>
</code></pre>
<h3 id="char">Char</h3>

<pre><code class="python">&lt;<span class="hljs-built_in">str</span>&gt; = <span class="hljs-built_in">chr</span>(&lt;<span class="hljs-built_in">int</span>&gt;)  <span class="hljs-comment"># Converts int to unicode char.</span>
&lt;<span class="hljs-built_in">int</span>&gt; = <span class="hljs-built_in">ord</span>(&lt;<span class="hljs-built_in">str</span>&gt;)  <span class="hljs-comment"># Converts unicode char to int.</span>
</code></pre>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;0&#x27;</span>), <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;9&#x27;</span>)
(<span class="hljs-number">48</span>, <span class="hljs-number">57</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;A&#x27;</span>), <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;Z&#x27;</span>)
(<span class="hljs-number">65</span>, <span class="hljs-number">90</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;a&#x27;</span>), <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;z&#x27;</span>)
(<span class="hljs-number">97</span>, <span class="hljs-number">122</span>)
</code></pre>
<h3 id="regex">Regex</h3>

<pre><code class="python"><span class="hljs-keyword">import</span> re
&lt;<span class="hljs-built_in">str</span>&gt;   = re.sub(&lt;regex&gt;, new, text, count=<span class="hljs-number">0</span>)  <span class="hljs-comment"># Substitutes all occurrences.</span>
&lt;<span class="hljs-built_in">list</span>&gt;  = re.findall(&lt;regex&gt;, text)            <span class="hljs-comment"># Returns all occurrences.</span>
&lt;<span class="hljs-built_in">list</span>&gt;  = re.split(&lt;regex&gt;, text, maxsplit=<span class="hljs-number">0</span>)  <span class="hljs-comment"># Use brackets in regex to keep the matches.</span>
&lt;Match&gt; = re.search(&lt;regex&gt;, text)             <span class="hljs-comment"># Searches for first occurrence of pattern.</span>
&lt;Match&gt; = re.match(&lt;regex&gt;, text)              <span class="hljs-comment"># Searches only at the beginning of the text.</span>
&lt;<span class="hljs-built_in">iter</span>&gt;  = re.finditer(&lt;regex&gt;, text)           <span class="hljs-comment"># Returns all occurrences as match objects.</span>
</code></pre>

<ul>
<li>Parameter <code>&#39;flags=re.IGNORECASE&#39;</code> can be used with all functions.</li>
<li>Parameter <code>&#39;flags=re.DOTALL&#39;</code> makes dot also accept newline.</li>
<li>Use <code>r&#39;\1&#39;</code> or <code>&#39;\\1&#39;</code> for backreference.</li>
<li>Use <code>&#39;?&#39;</code> to make an operator non-greedy.</li>
</ul>
<h4 id="match-object">Match Object</h4>

<pre><code class="python">&lt;<span class="hljs-built_in">str</span>&gt;   = &lt;Match&gt;.group()   <span class="hljs-comment"># Whole match.</span>
&lt;<span class="hljs-built_in">str</span>&gt;   = &lt;Match&gt;.group(<span class="hljs-number">1</span>)  <span class="hljs-comment"># Part in first bracket.</span>
&lt;<span class="hljs-built_in">tuple</span>&gt; = &lt;Match&gt;.groups()  <span class="hljs-comment"># All bracketed parts.</span>
&lt;<span class="hljs-built_in">int</span>&gt;   = &lt;Match&gt;.start()   <span class="hljs-comment"># Start index of a match.</span>
&lt;<span class="hljs-built_in">int</span>&gt;   = &lt;Match&gt;.end()     <span class="hljs-comment"># Exclusive end index of a match.</span>
</code></pre>
<h4 id="special-sequences">Special Sequences</h4>
<p>Expressions below hold true for strings that contain only ASCII characters. Use capital letters for negation.</p>

<pre><code class="python"><span class="hljs-string">&#x27;\d&#x27;</span> == <span class="hljs-string">&#x27;[0-9]&#x27;</span>             <span class="hljs-comment"># Digit</span>
<span class="hljs-string">&#x27;\s&#x27;</span> == <span class="hljs-string">&#x27;[ \t\n\r\f\v]&#x27;</span>     <span class="hljs-comment"># Whitespace</span>
<span class="hljs-string">&#x27;\w&#x27;</span> == <span class="hljs-string">&#x27;[a-zA-Z0-9_]&#x27;</span>      <span class="hljs-comment"># Alphanumeric</span>
</code></pre>
<h3 id="format">Format</h3>

<pre><code class="python">&lt;<span class="hljs-built_in">str</span>&gt; = <span class="hljs-string">f&#x27;<span class="hljs-subst">{&lt;el_1&gt;}</span>, <span class="hljs-subst">{&lt;el_2&gt;}</span>&#x27;</span>
&lt;<span class="hljs-built_in">str</span>&gt; = <span class="hljs-string">&#x27;{}, {}&#x27;</span>.<span class="hljs-built_in">format</span>(&lt;el_1&gt;, &lt;el_2&gt;)
</code></pre>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> namedtuple
<span class="hljs-meta">&gt;&gt;&gt; </span>Person = namedtuple(<span class="hljs-string">&#x27;Person&#x27;</span>, <span class="hljs-string">&#x27;name height&#x27;</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>person = Person(<span class="hljs-string">&#x27;Jean-Luc&#x27;</span>, <span class="hljs-number">187</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-string">f&#x27;<span class="hljs-subst">{person.height}</span>&#x27;</span>
<span class="hljs-string">&#x27;187&#x27;</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-string">&#x27;{p.height}&#x27;</span>.<span class="hljs-built_in">format</span>(p=person)
<span class="hljs-string">&#x27;187&#x27;</span>
</code></pre>
<h4 id="general-options">General Options</h4>

<pre><code class="python">{&lt;el&gt;:&lt;<span class="hljs-number">10</span>}       <span class="hljs-comment"># &#x27;&lt;el&gt;      &#x27;</span>
{&lt;el&gt;:&gt;<span class="hljs-number">10</span>}       <span class="hljs-comment"># &#x27;      &lt;el&gt;&#x27;</span>
{&lt;el&gt;:^<span class="hljs-number">10</span>}       <span class="hljs-comment"># &#x27;   &lt;el&gt;   &#x27;</span>
{&lt;el&gt;:.&gt;<span class="hljs-number">10</span>}      <span class="hljs-comment"># &#x27;......&lt;el&gt;&#x27;</span>
{&lt;el&gt;:&gt;<span class="hljs-number">0</span>}        <span class="hljs-comment"># &#x27;&lt;el&gt;&#x27;</span>
</code></pre>
<h4 id="string-options">String Options</h4>
<p><code>&#39;!r&#39;</code> calls object&#39;s repr() method, instead of format(), to get a string.</p>

<pre><code class="python">{<span class="hljs-string">&#x27;abcde&#x27;</span>!r:&lt;<span class="hljs-number">10</span>}  <span class="hljs-comment"># &quot;&#x27;abcde&#x27;   &quot;</span>
{<span class="hljs-string">&#x27;abcde&#x27;</span>:<span class="hljs-number">.3</span>}     <span class="hljs-comment"># &#x27;abc&#x27;</span>
{<span class="hljs-string">&#x27;abcde&#x27;</span>:<span class="hljs-number">10.3</span>}   <span class="hljs-comment"># &#x27;abc       &#x27;</span>
</code></pre>
<h4 id="number-options">Number Options</h4>

<pre><code class="python">{ <span class="hljs-number">123456</span>:<span class="hljs-number">10</span>,}    <span class="hljs-comment"># &#x27;   123,456&#x27;</span>
{ <span class="hljs-number">123456</span>:10_}    <span class="hljs-comment"># &#x27;   123_456&#x27;</span>
{ <span class="hljs-number">123456</span>:+<span class="hljs-number">10</span>}    <span class="hljs-comment"># &#x27;   +123456&#x27;</span>
{-<span class="hljs-number">123456</span>:=<span class="hljs-number">10</span>}    <span class="hljs-comment"># &#x27;-   123456&#x27;</span>
{ <span class="hljs-number">123456</span>: }      <span class="hljs-comment"># &#x27; 123456&#x27;</span>
{-<span class="hljs-number">123456</span>: }      <span class="hljs-comment"># &#x27;-123456&#x27;</span>
</code></pre>
<p><strong>Float types</strong>:</p>

<pre><code class="python">{<span class="hljs-number">1.23456</span>:<span class="hljs-number">10.3</span>f}  <span class="hljs-comment"># &#x27;     1.235&#x27;</span>
{<span class="hljs-number">1.23456</span>:<span class="hljs-number">10.3</span>e}  <span class="hljs-comment"># &#x27; 1.235e+00&#x27;</span>
{<span class="hljs-number">1.23456</span>:<span class="hljs-number">10.3</span>%}  <span class="hljs-comment"># &#x27;  123.456%&#x27;</span>
</code></pre>
<p><strong>Int types</strong>:</p>

<pre><code class="python">{<span class="hljs-number">90</span>:c}           <span class="hljs-comment"># &#x27;Z&#x27;</span>
{<span class="hljs-number">90</span>:X}           <span class="hljs-comment"># &#x27;5A&#x27;</span>
{<span class="hljs-number">90</span>:b}           <span class="hljs-comment"># &#x27;1011010&#x27;</span>
</code></pre>
<h3 id="numbers">Numbers</h3>
<h4 id="basic-functions">Basic Functions</h4>

<pre><code class="python">&lt;num&gt;  = <span class="hljs-built_in">pow</span>(&lt;num&gt;, &lt;num&gt;)  <span class="hljs-comment"># Or: &lt;num&gt; ** &lt;num&gt;</span>
&lt;real&gt; = <span class="hljs-built_in">abs</span>(&lt;num&gt;)
&lt;<span class="hljs-built_in">int</span>&gt;  = <span class="hljs-built_in">round</span>(&lt;real&gt;)
&lt;real&gt; = <span class="hljs-built_in">round</span>(&lt;real&gt;, Â±ndigits)
</code></pre>
<h4 id="math">Math</h4>

<pre><code class="python"><span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> e, pi, inf, nan
<span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> cos, acos, sin, asin, tan, atan, degrees, radians
<span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> log, log10, log2
</code></pre>
<h4 id="statistics">Statistics</h4>

<pre><code class="python"><span class="hljs-keyword">from</span> statistics <span class="hljs-keyword">import</span> mean, median, variance, pvariance, pstdev
</code></pre>
<h4 id="random">Random</h4>

<pre><code class="python"><span class="hljs-keyword">from</span> random <span class="hljs-keyword">import</span> random, randint, choice, shuffle
&lt;<span class="hljs-built_in">float</span>&gt; = random()
&lt;<span class="hljs-built_in">int</span>&gt;   = randint(from_inclusive, to_inclusive)
&lt;el&gt;    = choice(&lt;<span class="hljs-built_in">list</span>&gt;)
shuffle(&lt;<span class="hljs-built_in">list</span>&gt;)
</code></pre>
<h3 id="combinatorics">Combinatorics</h3>

<ul>
<li>Every function returns an iterator.</li>
<li>If you want to print the iterator, you need to pass it to the list() function!</li>
</ul>

<pre><code class="python"><span class="hljs-keyword">from</span> itertools <span class="hljs-keyword">import</span> product, combinations, combinations_with_replacement, permutations
</code></pre>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span>product([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>], repeat=<span class="hljs-number">3</span>)
[(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>), (<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>),
 (<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>), (<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>)]
</code></pre>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span>product(<span class="hljs-string">&#x27;ab&#x27;</span>, <span class="hljs-string">&#x27;12&#x27;</span>)
[(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>), (<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;2&#x27;</span>),
 (<span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>), (<span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;2&#x27;</span>)]
</code></pre>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span>combinations(<span class="hljs-string">&#x27;abc&#x27;</span>, <span class="hljs-number">2</span>)
[(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>), (<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>), (<span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>)]
</code></pre>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span>combinations_with_replacement(<span class="hljs-string">&#x27;abc&#x27;</span>, <span class="hljs-number">2</span>)
[(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;a&#x27;</span>), (<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>), (<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>),
 (<span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>), (<span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>),
 (<span class="hljs-string">&#x27;c&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>)]
</code></pre>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span>permutations(<span class="hljs-string">&#x27;abc&#x27;</span>, <span class="hljs-number">2</span>)
[(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>), (<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>),
 (<span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;a&#x27;</span>), (<span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&#x27;c&#x27;</span>),
 (<span class="hljs-string">&#x27;c&#x27;</span>, <span class="hljs-string">&#x27;a&#x27;</span>), (<span class="hljs-string">&#x27;c&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>)]
</code></pre>
<h3 id="datetime">Datetime</h3>

<ul>
<li>Module &#39;datetime&#39; provides &#39;date&#39; <code>&lt;D&gt;</code>, &#39;time&#39; <code>&lt;T&gt;</code>, &#39;datetime&#39; <code>&lt;DT&gt;</code> and &#39;timedelta&#39; <code>&lt;TD&gt;</code> classes. All are immutable and hashable.</li>
<li>Time and datetime can be &#39;aware&#39; <code>&lt;a&gt;</code>, meaning they have defined timezone, or &#39;naive&#39; <code>&lt;n&gt;</code>, meaning they don&#39;t.</li>
<li>If object is naive it is presumed to be in system&#39;s timezone.</li>
</ul>

<pre><code class="python"><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> date, time, datetime, timedelta
<span class="hljs-keyword">from</span> dateutil.tz <span class="hljs-keyword">import</span> UTC, tzlocal, gettz
</code></pre>
<h4 id="constructors">Constructors</h4>

<pre><code class="python">&lt;D&gt;  = date(year, month, day)
&lt;T&gt;  = time(hour=<span class="hljs-number">0</span>, minute=<span class="hljs-number">0</span>, second=<span class="hljs-number">0</span>, microsecond=<span class="hljs-number">0</span>, tzinfo=<span class="hljs-literal">None</span>, fold=<span class="hljs-number">0</span>)
&lt;DT&gt; = datetime(year, month, day, hour=<span class="hljs-number">0</span>, minute=<span class="hljs-number">0</span>, second=<span class="hljs-number">0</span>, ...)
&lt;TD&gt; = timedelta(days=<span class="hljs-number">0</span>, seconds=<span class="hljs-number">0</span>, microseconds=<span class="hljs-number">0</span>, milliseconds=<span class="hljs-number">0</span>,
                 minutes=<span class="hljs-number">0</span>, hours=<span class="hljs-number">0</span>, weeks=<span class="hljs-number">0</span>)
</code></pre>

<ul>
<li>Use <code>&#39;&lt;D/DT&gt;.weekday()&#39;</code> to get the day of the week (Mon == 0).</li>
<li><code>&#39;fold=1&#39;</code> means second pass in case of time jumping back for one hour.</li>
</ul>
<h4 id="now">Now</h4>

<pre><code class="python">&lt;D/DTn&gt;  = D/DT.today()                     <span class="hljs-comment"># Current local date or naive datetime.</span>
&lt;DTn&gt;    = DT.utcnow()                      <span class="hljs-comment"># Naive datetime from current UTC time.</span>
&lt;DTa&gt;    = DT.now(&lt;tz&gt;)                     <span class="hljs-comment"># Aware datetime from current tz time.</span>
</code></pre>
<h4 id="timezone">Timezone</h4>

<pre><code class="python">&lt;tz&gt;     = UTC                              <span class="hljs-comment"># UTC timezone. London without DST.</span>
&lt;tz&gt;     = tzlocal()                        <span class="hljs-comment"># Local timezone.</span>
&lt;tz&gt;     = gettz(<span class="hljs-string">&#x27;&lt;Cont.&gt;/&lt;City&gt;&#x27;</span>)          <span class="hljs-comment"># Timezone from &#x27;Continent/City_Name&#x27; str.</span>
</code></pre>

<pre><code class="python">&lt;DTa&gt;    = &lt;DT&gt;.astimezone(&lt;tz&gt;)            <span class="hljs-comment"># Datetime, converted to passed timezone.</span>
&lt;Ta/DTa&gt; = &lt;T/DT&gt;.replace(tzinfo=&lt;tz&gt;)      <span class="hljs-comment"># Unconverted object with new timezone.</span>
</code></pre>
<h4 id="encode">Encode</h4>

<pre><code class="python">&lt;D/T/DT&gt; = D/T/DT.fromisoformat(<span class="hljs-string">&#x27;&lt;iso&gt;&#x27;</span>)    <span class="hljs-comment"># Object from ISO string.</span>
&lt;DT&gt;     = DT.strptime(&lt;<span class="hljs-built_in">str</span>&gt;, <span class="hljs-string">&#x27;&lt;format&gt;&#x27;</span>)   <span class="hljs-comment"># Datetime from str, according to format.</span>
&lt;D/DTn&gt;  = D/DT.fromordinal(&lt;<span class="hljs-built_in">int</span>&gt;)          <span class="hljs-comment"># D/DTn from days since Christ.</span>
&lt;DTa&gt;    = DT.fromtimestamp(&lt;real&gt;, &lt;tz&gt;)   <span class="hljs-comment"># DTa from seconds since Epoch in tz time.</span>
</code></pre>

<ul>
<li>ISO strings come in following forms: <code>&#39;YYYY-MM-DD&#39;</code>, <code>&#39;HH:MM:SS.ffffff[Â±&lt;offset&gt;]&#39;</code>, or both separated by <code>&#39;T&#39;</code>. Offset is formatted as: <code>&#39;HH:MM&#39;</code>.</li>
<li>On Unix systems Epoch is <code>&#39;1970-01-01 00:00 UTC&#39;</code>, <code>&#39;1970-01-01 01:00 CET&#39;</code>, ...</li>
</ul>
<h4 id="decode">Decode</h4>

<pre><code class="python">&lt;<span class="hljs-built_in">str</span>&gt;    = &lt;D/T/DT&gt;.isoformat()             <span class="hljs-comment"># ISO string representation.</span>
&lt;<span class="hljs-built_in">str</span>&gt;    = &lt;D/T/DT&gt;.strftime(<span class="hljs-string">&#x27;&lt;format&gt;&#x27;</span>)    <span class="hljs-comment"># Custom string representation.</span>
&lt;<span class="hljs-built_in">int</span>&gt;    = &lt;D/DT&gt;.toordinal()               <span class="hljs-comment"># Days since Christ, ignoring time and tz.</span>
&lt;<span class="hljs-built_in">float</span>&gt;  = &lt;DT&gt;.timestamp()                 <span class="hljs-comment"># Seconds since Epoch in local time or tz.</span>
</code></pre>
<h4 id="format1">Format</h4>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
<span class="hljs-meta">&gt;&gt;&gt; </span>dt = datetime.strptime(<span class="hljs-string">&#x27;2015-05-14 23:39:00.00 +0200&#x27;</span>, <span class="hljs-string">&#x27;%Y-%m-%d %H:%M:%S.%f %z&#x27;</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>dt.strftime(<span class="hljs-string">&quot;%A, %dth of %B &#x27;%y, %I:%M%p %Z&quot;</span>)
<span class="hljs-string">&quot;Thursday, 14th of May &#x27;15, 11:39PM UTC+02:00&quot;</span>
</code></pre>
<p><strong>Rest of the codes</strong>:</p>

<ul>
<li><code>&#39;a&#39;</code> - Weekday, abbreviated name.</li>
<li><code>&#39;b&#39;</code> - Month, abbreviated name.</li>
</ul>
<h2 id="syntax">Syntax</h2>
<h3 id="arguments">Arguments</h3>
<h4 id="inside-function-call">Inside Function Call</h4>

<pre><code class="python">&lt;function&gt;(&lt;positional_args&gt;)                  <span class="hljs-comment"># f(0, 0)</span>
&lt;function&gt;(&lt;keyword_args&gt;)                     <span class="hljs-comment"># f(x=0, y=0)</span>
&lt;function&gt;(&lt;positional_args&gt;, &lt;keyword_args&gt;)  <span class="hljs-comment"># f(0, y=0)</span>
</code></pre>
<h4 id="inside-function-definition">Inside Function Definition</h4>

<pre><code class="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">&lt;nondefault_args&gt;</span>):                      <span class="hljs-comment"># def f(x, y)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">&lt;default_args&gt;</span>):                         <span class="hljs-comment"># def f(x=0, y=0)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">&lt;nondefault_args&gt;, &lt;default_args&gt;</span>):      <span class="hljs-comment"># def f(x, y=0)</span>
</code></pre>
<h3 id="splat-operator">Splat Operator</h3>
<h4 id="inside-function-call1">Inside Function Call</h4>
<p>Splat expands a collection into positional arguments, while splatty-splat expands a dictionary into keyword arguments.</p>

<pre><code class="python">args   = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
kwargs = {<span class="hljs-string">&#x27;x&#x27;</span>: <span class="hljs-number">3</span>, <span class="hljs-string">&#x27;y&#x27;</span>: <span class="hljs-number">4</span>, <span class="hljs-string">&#x27;z&#x27;</span>: <span class="hljs-number">5</span>}
func(*args, **kwargs)
</code></pre>
<p><strong>is the same as</strong>:</p>

<pre><code class="python">func(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, x=<span class="hljs-number">3</span>, y=<span class="hljs-number">4</span>, z=<span class="hljs-number">5</span>)
</code></pre>
<h4 id="inside-function-definition1">Inside Function Definition</h4>
<p>Splat combines zero or more positional arguments into a tuple, while splatty-splat combines zero or more keyword arguments into a dictionary.</p>

<pre><code class="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">*a</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span>(a)
</code></pre>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span>add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
<span class="hljs-number">6</span>
</code></pre>
<h4 id="legal-argument-combinations-">Legal argument combinations:</h4>

<pre><code class="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">*args</span>):                  <span class="hljs-comment"># f(1, 2, 3)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">x, *args</span>):               <span class="hljs-comment"># f(1, 2, 3)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">*args, z</span>):               <span class="hljs-comment"># f(1, 2, z=3)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">x, *args, z</span>):            <span class="hljs-comment"># f(1, 2, z=3)</span>
</code></pre>

<pre><code class="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">**kwargs</span>):               <span class="hljs-comment"># f(x=1, y=2, z=3)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">x, **kwargs</span>):            <span class="hljs-comment"># f(x=1, y=2, z=3) | f(1, y=2, z=3)</span>
</code></pre>

<pre><code class="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">*args, **kwargs</span>):        <span class="hljs-comment"># f(x=1, y=2, z=3) | f(1, y=2, z=3) | f(1, 2, z=3) | f(1, 2, 3)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">x, *args, **kwargs</span>):     <span class="hljs-comment"># f(x=1, y=2, z=3) | f(1, y=2, z=3) | f(1, 2, z=3) | f(1, 2, 3)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">*args, y, **kwargs</span>):     <span class="hljs-comment"># f(x=1, y=2, z=3) | f(1, y=2, z=3)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">x, *args, z, **kwargs</span>):  <span class="hljs-comment"># f(x=1, y=2, z=3) | f(1, y=2, z=3) | f(1, 2, z=3)</span>
</code></pre>
<h4 id="other-uses">Other Uses</h4>

<pre><code class="python">&lt;<span class="hljs-built_in">list</span>&gt;  = [*&lt;collection&gt; [, ...]]
&lt;<span class="hljs-built_in">set</span>&gt;   = {*&lt;collection&gt; [, ...]}
&lt;<span class="hljs-built_in">tuple</span>&gt; = (*&lt;collection&gt;, [...])
&lt;<span class="hljs-built_in">dict</span>&gt;  = {**&lt;<span class="hljs-built_in">dict</span>&gt; [, ...]}
</code></pre>

<pre><code class="python">head, *body, tail = &lt;collection&gt;
</code></pre>
<h3 id="inline">Inline</h3>
<h4 id="lambda">Lambda</h4>

<pre><code class="python">&lt;function&gt; = <span class="hljs-keyword">lambda</span>: &lt;return_value&gt;
&lt;function&gt; = <span class="hljs-keyword">lambda</span> &lt;argument_1&gt;, &lt;argument_2&gt;: &lt;return_value&gt;
</code></pre>
<h4 id="comprehension">Comprehension</h4>

<pre><code class="python">&lt;<span class="hljs-built_in">list</span>&gt; = [i+<span class="hljs-number">1</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)]         <span class="hljs-comment"># [1, 2, ..., 10]</span>
&lt;<span class="hljs-built_in">set</span>&gt;  = {i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">if</span> i &gt; <span class="hljs-number">5</span>}  <span class="hljs-comment"># {6, 7, 8, 9}</span>
&lt;<span class="hljs-built_in">iter</span>&gt; = (i+<span class="hljs-number">5</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>))         <span class="hljs-comment"># (5, 6, ..., 14)</span>
&lt;<span class="hljs-built_in">dict</span>&gt; = {i: i*<span class="hljs-number">2</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)}      <span class="hljs-comment"># {0: 0, 1: 2, ..., 9: 18}</span>
</code></pre>

<pre><code class="python">out = [i+j <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)]
</code></pre>
<p><strong>Is the same as</strong>:</p>

<pre><code class="python">out = []
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):
    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):
        out.append(i+j)
</code></pre>
<h4 id="map-filter-reduce">Map, Filter, Reduce</h4>

<pre><code class="python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> reduce
&lt;<span class="hljs-built_in">iter</span>&gt; = <span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x: x + <span class="hljs-number">1</span>, <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>))            <span class="hljs-comment"># (1, 2, ..., 10)</span>
&lt;<span class="hljs-built_in">iter</span>&gt; = <span class="hljs-built_in">filter</span>(<span class="hljs-keyword">lambda</span> x: x &gt; <span class="hljs-number">5</span>, <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>))         <span class="hljs-comment"># (6, 7, 8, 9)</span>
&lt;<span class="hljs-built_in">int</span>&gt;  = reduce(<span class="hljs-keyword">lambda</span> out, x: out + x, <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>))  <span class="hljs-comment"># 45</span>
</code></pre>
<h4 id="any-all">Any, All</h4>

<pre><code class="python">&lt;<span class="hljs-built_in">bool</span>&gt; = <span class="hljs-built_in">any</span>(&lt;collection&gt;)                  <span class="hljs-comment"># False if empty.</span>
&lt;<span class="hljs-built_in">bool</span>&gt; = <span class="hljs-built_in">all</span>(el[<span class="hljs-number">1</span>] <span class="hljs-keyword">for</span> el <span class="hljs-keyword">in</span> &lt;collection&gt;)  <span class="hljs-comment"># True if empty.</span>
</code></pre>
<h4 id="if-else">If - Else</h4>

<pre><code class="python">&lt;expression_if_true&gt; <span class="hljs-keyword">if</span> &lt;condition&gt; <span class="hljs-keyword">else</span> &lt;expression_if_false&gt;
</code></pre>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span>[a <span class="hljs-keyword">if</span> a <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;zero&#x27;</span> <span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> (<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>)]
[<span class="hljs-string">&#x27;zero&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;zero&#x27;</span>, <span class="hljs-number">3</span>]
</code></pre>
<h3 id="dataclass">Dataclass</h3>

<pre><code class="python"><span class="hljs-keyword">from</span> dataclasses <span class="hljs-keyword">import</span> make_data<span class="hljs-keyword">class</span>
<span class="hljs-title class_">Creature</span>  = make_dataclass(<span class="hljs-string">&#x27;Creature&#x27;</span>, [<span class="hljs-string">&#x27;location&#x27;</span>, <span class="hljs-string">&#x27;direction&#x27;</span>])
creature  = Creature(Point(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), Direction.n)
</code></pre>
<h3 id="closure">Closure</h3>
<p>We have a closure in Python when:</p>

<ul>
<li>a nested function references a value of its enclosing function and then</li>
<li>the enclosing function returns the nested function.</li>
</ul>

<pre><code class="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_multiplier</span>(<span class="hljs-params">a</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">out</span>(<span class="hljs-params">b</span>):
        <span class="hljs-keyword">return</span> a * b
    <span class="hljs-keyword">return</span> out
</code></pre>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span>multiply_by_3 = get_multiplier(<span class="hljs-number">3</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>multiply_by_3(<span class="hljs-number">10</span>)
<span class="hljs-number">30</span>
</code></pre>

<ul>
<li>If multiple nested functions within enclosing function reference the same value, that value gets shared.</li>
<li>To dynamically access function&#39;s first free variable use <code>&#39;&lt;function&gt;.__closure__[0].cell_contents&#39;</code>.</li>
</ul>
<h4 id="partial">Partial</h4>

<pre><code class="python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> partial
&lt;function&gt; = partial(&lt;function&gt; [, &lt;arg_1&gt;, &lt;arg_2&gt;, ...])
</code></pre>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> operator <span class="hljs-keyword">as</span> op
<span class="hljs-meta">&gt;&gt;&gt; </span>multiply_by_3 = partial(op.mul, <span class="hljs-number">3</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>multiply_by_3(<span class="hljs-number">10</span>)
<span class="hljs-number">30</span>
</code></pre>
<h4 id="nonlocal">Nonlocal</h4>
<p>If variable is being assigned to anywhere in the scope, it is regarded as a local variable, unless it is declared as a &#39;global&#39; or a &#39;nonlocal&#39;.</p>

<pre><code class="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_counter</span>():
    i = <span class="hljs-number">0</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">out</span>():
        <span class="hljs-keyword">nonlocal</span> i
        i += <span class="hljs-number">1</span>
        <span class="hljs-keyword">return</span> i
    <span class="hljs-keyword">return</span> out
</code></pre>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span>counter = get_counter()
<span class="hljs-meta">&gt;&gt;&gt; </span>counter(), counter(), counter()
(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
</code></pre>
<h3 id="decorator">Decorator</h3>
<p>A decorator takes a function, adds some functionality and returns it.</p>

<pre><code class="python"><span class="hljs-meta">@decorator_name</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">function_that_gets_passed_to_decorator</span>():
    ...
</code></pre>
<h4 id="debugger-example">Debugger Example</h4>
<p>Decorator that prints function&#39;s name every time it gets called.</p>

<pre><code class="python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> wraps

<span class="hljs-keyword">def</span> <span class="hljs-title function_">debug</span>(<span class="hljs-params">func</span>):
<span class="hljs-meta">    @wraps(<span class="hljs-params">func</span>)</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">out</span>(<span class="hljs-params">*args, **kwargs</span>):
        <span class="hljs-built_in">print</span>(func.__name__)
        <span class="hljs-keyword">return</span> func(*args, **kwargs)
    <span class="hljs-keyword">return</span> out

<span class="hljs-meta">@debug</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x, y</span>):
    <span class="hljs-keyword">return</span> x + y
</code></pre>

<ul>
<li>Wraps is a helper decorator that copies metadata of function add() to function out().</li>
<li>Without it <code>&#39;add.__name__&#39;</code> would return <code>&#39;out&#39;</code>.</li>
</ul>
<h4 id="lru-cache">LRU Cache</h4>
<p>Decorator that caches function&#39;s return values. All function&#39;s arguments must be hashable.</p>

<pre><code class="python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> lru_cache

<span class="hljs-meta">@lru_cache(<span class="hljs-params">maxsize=<span class="hljs-literal">None</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">fib</span>(<span class="hljs-params">n</span>):
    <span class="hljs-keyword">return</span> n <span class="hljs-keyword">if</span> n &lt; <span class="hljs-number">2</span> <span class="hljs-keyword">else</span> fib(n-<span class="hljs-number">2</span>) + fib(n-<span class="hljs-number">1</span>)
</code></pre>

<ul>
<li>Recursion depth is limited to 1000 by default. To increase it use <code>&#39;sys.setrecursionlimit(&lt;depth&gt;)&#39;</code>.</li>
</ul>
<h4 id="parametrized-decorator">Parametrized Decorator</h4>
<p>A decorator that accepts arguments and returns a normal decorator that accepts a function.</p>

<pre><code class="python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> wraps

<span class="hljs-keyword">def</span> <span class="hljs-title function_">debug</span>(<span class="hljs-params">print_result=<span class="hljs-literal">False</span></span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">func</span>):
<span class="hljs-meta">        @wraps(<span class="hljs-params">func</span>)</span>
        <span class="hljs-keyword">def</span> <span class="hljs-title function_">out</span>(<span class="hljs-params">*args, **kwargs</span>):
            result = func(*args, **kwargs)
            <span class="hljs-built_in">print</span>(func.__name__, result <span class="hljs-keyword">if</span> print_result <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;&#x27;</span>)
            <span class="hljs-keyword">return</span> result
        <span class="hljs-keyword">return</span> out
    <span class="hljs-keyword">return</span> decorator

<span class="hljs-meta">@debug(<span class="hljs-params">print_result=<span class="hljs-literal">True</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x, y</span>):
    <span class="hljs-keyword">return</span> x + y
</code></pre>
<h3 id="class">Class</h3>

<pre><code class="python"><span class="hljs-keyword">class</span> &lt;name&gt;:
    <span class="hljs-keyword">def</span> __init__(self, a):
        self.a = a
    <span class="hljs-keyword">def</span> __repr__(self):
        class_name = self.__class__.__name__
        <span class="hljs-keyword">return</span> <span class="hljs-string">f&#x27;<span class="hljs-subst">{class_name}</span>(<span class="hljs-subst">{self.a!r}</span>)&#x27;</span>
    <span class="hljs-keyword">def</span> __str__(self):
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">str</span>(self.a)

<span class="hljs-meta">    @classmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_class_name</span>(<span class="hljs-params">cls</span>):
        <span class="hljs-keyword">return</span> cls.__name__
</code></pre>
<h4 id="constructor-overloading">Constructor Overloading</h4>

<pre><code class="python"><span class="hljs-keyword">class</span> &lt;name&gt;:
    <span class="hljs-keyword">def</span> __init__(self, a=<span class="hljs-literal">None</span>):
        self.a = a
</code></pre>
<h4 id="inheritance">Inheritance</h4>

<pre><code class="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>:
    <span class="hljs-keyword">def</span> __init__(self, name, age):
        self.name = name
        self.age  = age

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-title class_ inherited__">Person</span>):
    <span class="hljs-keyword">def</span> __init__(self, name, age, staff_num):
        <span class="hljs-built_in">super</span>().__init__(name, age)
        self.staff_num = staff_num
</code></pre>
<h4 id="multiple-inheritance">Multiple Inheritance</h4>

<pre><code class="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>: <span class="hljs-keyword">pass</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span>: <span class="hljs-keyword">pass</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span>(A, B): <span class="hljs-keyword">pass</span>
</code></pre>
<p>MRO determines the order in which parent classes are traversed when searching for a method:</p>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span>C.mro()
[&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;C&#x27;</span>&gt;, &lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;A&#x27;</span>&gt;, &lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;B&#x27;</span>&gt;, &lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;object&#x27;</span>&gt;]
</code></pre>
<h4 id="copy">Copy</h4>

<pre><code class="python"><span class="hljs-keyword">from</span> copy <span class="hljs-keyword">import</span> copy, deepcopy
&lt;<span class="hljs-built_in">object</span>&gt; = copy(&lt;<span class="hljs-built_in">object</span>&gt;)
&lt;<span class="hljs-built_in">object</span>&gt; = deepcopy(&lt;<span class="hljs-built_in">object</span>&gt;)
</code></pre>
<h3 id="duck-types">Duck Types</h3>
<p>A duck type is an implicit type that prescribes a set of special methods. Any object that has those methods defined is considered a member of that duck type.</p>
<h4 id="comparable">Comparable</h4>

<ul>
<li>If eq() method is not overridden, it returns <code>&#39;id(self) == id(other)&#39;</code>, which is the same as <code>&#39;self is other&#39;</code>.</li>
<li>That means all objects compare not equal by default.</li>
<li>Only left side object has eq() method called, unless it returns &#39;NotImplemented&#39;, in which case the right object is consulted.</li>
</ul>

<pre><code class="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyComparable</span>:
    <span class="hljs-keyword">def</span> __init__(self, a):
        self.a = a
    <span class="hljs-keyword">def</span> __eq__(self, other):
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(other, <span class="hljs-built_in">type</span>(self)):
            <span class="hljs-keyword">return</span> self.a == other.a
        <span class="hljs-keyword">return</span> <span class="hljs-literal">NotImplemented</span>
</code></pre>
<h4 id="hashable">Hashable</h4>

<ul>
<li>Hashable object needs both hash() and eq() methods and its hash value should never change.</li>
<li>Hashable objects that compare equal must have the same hash value, meaning default hash() that returns <code>&#39;id(self)&#39;</code> will not do.</li>
<li>That is why Python automatically makes classes unhashable if you only implement eq().</li>
</ul>

<pre><code class="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyHashable</span>:
    <span class="hljs-keyword">def</span> __init__(self, a):
        self.__a = copy.deepcopy(a)
<span class="hljs-meta">    @property</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">a</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> self.__a
    <span class="hljs-keyword">def</span> __eq__(self, other):
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(other, <span class="hljs-built_in">type</span>(self)):
            <span class="hljs-keyword">return</span> self.a == other.a
        <span class="hljs-keyword">return</span> <span class="hljs-literal">NotImplemented</span>
    <span class="hljs-keyword">def</span> __hash__(self):
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">hash</span>(self.a)
</code></pre>
<h4 id="collection">Collection</h4>

<ul>
<li>Methods do not depend on each other, so they can be skipped if not needed.</li>
<li>Any object with defined getitem() is considered iterable, even if it lacks iter().</li>
</ul>

<pre><code class="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCollection</span>:
    <span class="hljs-keyword">def</span> __init__(self, a):
        self.a = a
    <span class="hljs-keyword">def</span> __len__(self):
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(self.a)
    <span class="hljs-keyword">def</span> __getitem__(self, i):
        <span class="hljs-keyword">return</span> self.a[i]
    <span class="hljs-keyword">def</span> __setitem__(self, i, el):
        self.a[i] = el
    <span class="hljs-keyword">def</span> __contains__(self, el):
        <span class="hljs-keyword">return</span> el <span class="hljs-keyword">in</span> self.a
    <span class="hljs-keyword">def</span> __iter__(self):
        <span class="hljs-keyword">for</span> el <span class="hljs-keyword">in</span> self.a:
            <span class="hljs-keyword">yield</span> el
</code></pre>
<h4 id="callable">Callable</h4>

<pre><code class="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Counter</span>:
    <span class="hljs-keyword">def</span> __init__(self):
        self.i = <span class="hljs-number">0</span>
    <span class="hljs-keyword">def</span> __call__(self):
        self.i += <span class="hljs-number">1</span>
        <span class="hljs-keyword">return</span> self.i
</code></pre>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span>counter = Counter()
<span class="hljs-meta">&gt;&gt;&gt; </span>counter(), counter(), counter()
(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
</code></pre>
<h4 id="context-manager">Context Manager</h4>

<pre><code class="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyOpen</span>():
    <span class="hljs-keyword">def</span> __init__(self, filename):
        self.filename = filename
    <span class="hljs-keyword">def</span> __enter__(self):
        self.file = <span class="hljs-built_in">open</span>(self.filename)
        <span class="hljs-keyword">return</span> self.file
    <span class="hljs-keyword">def</span> __exit__(self, *args):
        self.file.close()
</code></pre>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;test.txt&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span>) <span class="hljs-keyword">as</span> file:
<span class="hljs-meta">... </span>    file.write(<span class="hljs-string">&#x27;Hello World!&#x27;</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">with</span> MyOpen(<span class="hljs-string">&#x27;test.txt&#x27;</span>) <span class="hljs-keyword">as</span> file:
<span class="hljs-meta">... </span>    <span class="hljs-built_in">print</span>(file.read())
Hello World!
</code></pre>
<h3 id="enum">Enum</h3>

<pre><code class="python"><span class="hljs-keyword">from</span> enum <span class="hljs-keyword">import</span> Enum, auto

<span class="hljs-keyword">class</span> &lt;enum_name&gt;(Enum):
    &lt;member_name_1&gt; = &lt;value_1&gt;
    &lt;member_name_2&gt; = &lt;value_2_a&gt;, &lt;value_2_b&gt;
    &lt;member_name_3&gt; = auto()

<span class="hljs-meta">    @classmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_member_names</span>(<span class="hljs-params">cls</span>):
        <span class="hljs-keyword">return</span> [a.name <span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> cls.__members__.values()]
</code></pre>

<pre><code class="python">&lt;member&gt; = &lt;enum&gt;.&lt;member_name&gt;
&lt;member&gt; = &lt;enum&gt;[<span class="hljs-string">&#x27;&lt;member_name&gt;&#x27;</span>]
&lt;member&gt; = &lt;enum&gt;(&lt;value&gt;)
name     = &lt;member&gt;.name
value    = &lt;member&gt;.value
</code></pre>

<pre><code class="python">list_of_members = <span class="hljs-built_in">list</span>(&lt;enum&gt;)
member_names    = [a.name <span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> &lt;enum&gt;]
member_values   = [a.value <span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> &lt;enum&gt;]
random_member   = random.choice(<span class="hljs-built_in">list</span>(&lt;enum&gt;))
</code></pre>
<h4 id="inline1">Inline</h4>

<pre><code class="python">Cutlery = Enum(<span class="hljs-string">&#x27;Cutlery&#x27;</span>, [<span class="hljs-string">&#x27;fork&#x27;</span>, <span class="hljs-string">&#x27;knife&#x27;</span>, <span class="hljs-string">&#x27;spoon&#x27;</span>])
Cutlery = Enum(<span class="hljs-string">&#x27;Cutlery&#x27;</span>, <span class="hljs-string">&#x27;fork knife spoon&#x27;</span>)
Cutlery = Enum(<span class="hljs-string">&#x27;Cutlery&#x27;</span>, {<span class="hljs-string">&#x27;fork&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;knife&#x27;</span>: <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;spoon&#x27;</span>: <span class="hljs-number">3</span>})
</code></pre>
<p><em>Functions can not be values, so they must be wrapped*</em>:</p>

<pre><code class="python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> partial
LogicOp = Enum(<span class="hljs-string">&#x27;LogicOp&#x27;</span>, {<span class="hljs-string">&#x27;AND&#x27;</span>: partial(<span class="hljs-keyword">lambda</span> l, r: l <span class="hljs-keyword">and</span> r),
                           <span class="hljs-string">&#x27;OR&#x27;</span> : partial(<span class="hljs-keyword">lambda</span> l, r: l <span class="hljs-keyword">or</span> r)})
</code></pre>
<h3 id="exceptions">Exceptions</h3>

<pre><code class="python"><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
    <span class="hljs-keyword">try</span>:
        x = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;Please enter a number: &#x27;</span>))
    <span class="hljs-keyword">except</span> ValueError:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Oops!  That was no valid number.  Try again...&#x27;</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Thank you.&#x27;</span>)
        <span class="hljs-keyword">break</span>
</code></pre>
<h4 id="raising-exception">Raising Exception</h4>

<pre><code class="python"><span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">&#x27;A very specific message!&#x27;</span>)
</code></pre>
<h4 id="finally">Finally</h4>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">try</span>:
<span class="hljs-meta">... </span>    <span class="hljs-keyword">raise</span> KeyboardInterrupt
<span class="hljs-meta">... </span><span class="hljs-keyword">finally</span>:
<span class="hljs-meta">... </span>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Goodbye, world!&#x27;</span>)
Goodbye, world!
Traceback (most recent call last):
  File <span class="hljs-string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="hljs-number">2</span>, <span class="hljs-keyword">in</span> &lt;module&gt;
KeyboardInterrupt
</code></pre>
<h2 id="system">System</h2>
<h3 id="print">Print</h3>

<pre><code class="python"><span class="hljs-built_in">print</span>(&lt;el_1&gt;, ..., sep=<span class="hljs-string">&#x27; &#x27;</span>, end=<span class="hljs-string">&#x27;\n&#x27;</span>, file=sys.stdout, flush=<span class="hljs-literal">False</span>)
</code></pre>

<ul>
<li>Use <code>&#39;file=sys.stderr&#39;</code> for errors.</li>
</ul>
<h4 id="pretty-print">Pretty Print</h4>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> pprint <span class="hljs-keyword">import</span> pprint
<span class="hljs-meta">&gt;&gt;&gt; </span>pprint(<span class="hljs-built_in">dir</span>())
[<span class="hljs-string">&#x27;__annotations__&#x27;</span>,
 <span class="hljs-string">&#x27;__builtins__&#x27;</span>,
 <span class="hljs-string">&#x27;__doc__&#x27;</span>, ...]
</code></pre>
<h3 id="input">Input</h3>

<ul>
<li>Reads a line from user input or pipe if present.</li>
<li>Trailing newline gets stripped.</li>
<li>Prompt string is printed to the standard output before reading input.</li>
</ul>

<pre><code class="python">&lt;<span class="hljs-built_in">str</span>&gt; = <span class="hljs-built_in">input</span>(prompt=<span class="hljs-literal">None</span>)
</code></pre>
<h4 id="prints-lines-until-eof-">Prints lines until EOF:</h4>

<pre><code class="python"><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
    <span class="hljs-keyword">try</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-built_in">input</span>())
    <span class="hljs-keyword">except</span> EOFError:
        <span class="hljs-keyword">break</span>
</code></pre>
<h3 id="command-line-arguments">Command Line Arguments</h3>

<pre><code class="python"><span class="hljs-keyword">import</span> sys
script_name = sys.argv[<span class="hljs-number">0</span>]
arguments   = sys.argv[<span class="hljs-number">1</span>:]
</code></pre>
<h4 id="argparse">Argparse</h4>

<pre><code class="python"><span class="hljs-keyword">from</span> argparse <span class="hljs-keyword">import</span> ArgumentParser, FileType
p = ArgumentParser(description=&lt;<span class="hljs-built_in">str</span>&gt;)
p.add_argument(<span class="hljs-string">&#x27;-&lt;short_name&gt;&#x27;</span>, <span class="hljs-string">&#x27;--&lt;name&gt;&#x27;</span>, action=<span class="hljs-string">&#x27;store_true&#x27;</span>)  <span class="hljs-comment"># Flag</span>
p.add_argument(<span class="hljs-string">&#x27;-&lt;short_name&gt;&#x27;</span>, <span class="hljs-string">&#x27;--&lt;name&gt;&#x27;</span>, <span class="hljs-built_in">type</span>=&lt;<span class="hljs-built_in">type</span>&gt;)          <span class="hljs-comment"># Option</span>
p.add_argument(<span class="hljs-string">&#x27;&lt;name&gt;&#x27;</span>, <span class="hljs-built_in">type</span>=&lt;<span class="hljs-built_in">type</span>&gt;, nargs=<span class="hljs-number">1</span>)                    <span class="hljs-comment"># Argument</span>
p.add_argument(<span class="hljs-string">&#x27;&lt;name&gt;&#x27;</span>, <span class="hljs-built_in">type</span>=&lt;<span class="hljs-built_in">type</span>&gt;, nargs=<span class="hljs-string">&#x27;+&#x27;</span>)                  <span class="hljs-comment"># Arguments</span>
args  = p.parse_args()
value = args.&lt;name&gt;
</code></pre>

<ul>
<li>Use <code>&#39;help=&lt;str&gt;&#39;</code> for argument description.</li>
<li>Use <code>&#39;type=FileType(&lt;mode&gt;)&#39;</code> for files.</li>
</ul>
<h3 id="open">Open</h3>
<p>Opens a file and returns a corresponding file object.</p>

<pre><code class="python">&lt;file&gt; = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;&lt;path&gt;&#x27;</span>, mode=<span class="hljs-string">&#x27;r&#x27;</span>, encoding=<span class="hljs-literal">None</span>)
</code></pre>
<h4 id="modes">Modes</h4>

<ul>
<li><code>&#39;r&#39;</code>  - Read (default).</li>
<li><code>&#39;w&#39;</code>  - Write (truncate).</li>
<li><code>&#39;x&#39;</code>  - Write or fail if the file already exists.</li>
<li><code>&#39;a&#39;</code>  - Append.</li>
<li><code>&#39;w+&#39;</code> - Read and write (truncate).</li>
<li><code>&#39;r+&#39;</code> - Read and write from the start.</li>
<li><code>&#39;a+&#39;</code> - Read and write from the end.</li>
<li><code>&#39;t&#39;</code>  - Text mode (default).</li>
<li><code>&#39;b&#39;</code>  - Binary mode.</li>
</ul>
<h4 id="file">File</h4>

<pre><code class="python">&lt;file&gt;.seek(<span class="hljs-number">0</span>)                      <span class="hljs-comment"># Moves to the start of the file.</span>
&lt;file&gt;.seek(offset)                 <span class="hljs-comment"># Moves &#x27;offset&#x27; chars/bytes from the start.</span>
&lt;file&gt;.seek(offset, &lt;anchor&gt;)       <span class="hljs-comment"># Anchor: 0 start, 1 current pos., 2 end.</span>
</code></pre>

<pre><code class="python">&lt;<span class="hljs-built_in">str</span>/<span class="hljs-built_in">bytes</span>&gt; = &lt;file&gt;.read(size=-<span class="hljs-number">1</span>)  <span class="hljs-comment"># Reads &#x27;size&#x27; chars/bytes or until EOF.</span>
&lt;<span class="hljs-built_in">str</span>/<span class="hljs-built_in">bytes</span>&gt; = &lt;file&gt;.readline()     <span class="hljs-comment"># Returns a line.</span>
&lt;<span class="hljs-built_in">list</span>&gt;      = &lt;file&gt;.readlines()    <span class="hljs-comment"># Returns a list of lines.</span>
&lt;<span class="hljs-built_in">str</span>/<span class="hljs-built_in">bytes</span>&gt; = <span class="hljs-built_in">next</span>(&lt;file&gt;)          <span class="hljs-comment"># Returns a line using buffer. Do not mix.</span>
</code></pre>

<pre><code class="python">&lt;file&gt;.write(&lt;<span class="hljs-built_in">str</span>/<span class="hljs-built_in">bytes</span>&gt;)           <span class="hljs-comment"># Writes a string or bytes object.</span>
&lt;file&gt;.writelines(&lt;<span class="hljs-built_in">list</span>&gt;)           <span class="hljs-comment"># Writes a list of strings or bytes objects.</span>
&lt;file&gt;.flush()                      <span class="hljs-comment"># Flushes write buffer.</span>
</code></pre>

<ul>
<li>Methods do not add or strip trailing newlines.</li>
</ul>
<h4 id="read-text-from-file">Read Text from File</h4>

<pre><code class="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">read_file</span>(<span class="hljs-params">filename</span>):
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> file:
        <span class="hljs-keyword">return</span> file.readlines()
</code></pre>
<h4 id="write-text-to-file">Write Text to File</h4>

<pre><code class="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">write_to_file</span>(<span class="hljs-params">filename, text</span>):
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename, <span class="hljs-string">&#x27;w&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> file:
        file.write(text)
</code></pre>
<h3 id="path">Path</h3>

<pre><code class="python"><span class="hljs-keyword">from</span> os <span class="hljs-keyword">import</span> path, listdir
&lt;<span class="hljs-built_in">bool</span>&gt; = path.exists(<span class="hljs-string">&#x27;&lt;path&gt;&#x27;</span>)
&lt;<span class="hljs-built_in">bool</span>&gt; = path.isfile(<span class="hljs-string">&#x27;&lt;path&gt;&#x27;</span>)
&lt;<span class="hljs-built_in">bool</span>&gt; = path.isdir(<span class="hljs-string">&#x27;&lt;path&gt;&#x27;</span>)
&lt;<span class="hljs-built_in">list</span>&gt; = listdir(<span class="hljs-string">&#x27;&lt;path&gt;&#x27;</span>)
</code></pre>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> glob <span class="hljs-keyword">import</span> glob
<span class="hljs-meta">&gt;&gt;&gt; </span>glob(<span class="hljs-string">&#x27;../*.gif&#x27;</span>)
[<span class="hljs-string">&#x27;1.gif&#x27;</span>, <span class="hljs-string">&#x27;card.gif&#x27;</span>]
</code></pre>
<h4 id="pathlib">Pathlib</h4>

<pre><code class="python"><span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path
cwd    = Path()
&lt;Path&gt; = Path(<span class="hljs-string">&#x27;&lt;path&gt;&#x27;</span> [, <span class="hljs-string">&#x27;&lt;path&gt;&#x27;</span>, &lt;Path&gt;, ...])
&lt;Path&gt; = &lt;Path&gt; / <span class="hljs-string">&#x27;&lt;dir&gt;&#x27;</span> / <span class="hljs-string">&#x27;&lt;file&gt;&#x27;</span>
</code></pre>

<pre><code class="python">&lt;<span class="hljs-built_in">bool</span>&gt; = &lt;Path&gt;.exists()
&lt;<span class="hljs-built_in">bool</span>&gt; = &lt;Path&gt;.is_file()
&lt;<span class="hljs-built_in">bool</span>&gt; = &lt;Path&gt;.is_dir()
&lt;<span class="hljs-built_in">iter</span>&gt; = &lt;Path&gt;.iterdir()
</code></pre>

<pre><code class="python">&lt;<span class="hljs-built_in">iter</span>&gt; = &lt;Path&gt;.glob(<span class="hljs-string">&#x27;&lt;pattern&gt;&#x27;</span>)
</code></pre>

<pre><code class="python">&lt;<span class="hljs-built_in">str</span>&gt;  = <span class="hljs-built_in">str</span>(&lt;Path&gt;)               <span class="hljs-comment"># Returns path as a string.</span>
&lt;tup.&gt; = &lt;Path&gt;.parts              <span class="hljs-comment"># Returns all components as strings.</span>
&lt;Path&gt; = &lt;Path&gt;.resolve()          <span class="hljs-comment"># Returns absolute Path without symlinks.</span>
</code></pre>

<pre><code class="python">&lt;<span class="hljs-built_in">str</span>&gt;  = &lt;Path&gt;.name               <span class="hljs-comment"># Final component.</span>
&lt;<span class="hljs-built_in">str</span>&gt;  = &lt;Path&gt;.stem               <span class="hljs-comment"># Final component without extension.</span>
&lt;<span class="hljs-built_in">str</span>&gt;  = &lt;Path&gt;.suffix             <span class="hljs-comment"># Final component&#x27;s extension.</span>
&lt;Path&gt; = &lt;Path&gt;.parent             <span class="hljs-comment"># Path without final component.</span>
</code></pre>
<h3 id="command-execution">Command Execution</h3>

<pre><code class="python"><span class="hljs-keyword">import</span> os
&lt;<span class="hljs-built_in">str</span>&gt; = os.popen(&lt;command&gt;).read()
</code></pre>
<h4 id="subprocess">Subprocess</h4>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> subprocess, shlex
<span class="hljs-meta">&gt;&gt;&gt; </span>a = subprocess.run(shlex.split(<span class="hljs-string">&#x27;ls -a&#x27;</span>), stdout=subprocess.PIPE)
<span class="hljs-meta">&gt;&gt;&gt; </span>a.stdout
<span class="hljs-string">b&#x27;.\n..\nfile1.txt\nfile2.txt\n&#x27;</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>a.returncode
<span class="hljs-number">0</span>
</code></pre>
<h2 id="data">Data</h2>
<h3 id="csv">CSV</h3>

<pre><code class="python"><span class="hljs-keyword">import</span> csv
</code></pre>
<h4 id="read-rows-from-csv-file">Read Rows from CSV File</h4>

<pre><code class="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">read_csv_file</span>(<span class="hljs-params">filename</span>):
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> file:
        <span class="hljs-keyword">return</span> csv.reader(file, delimiter=<span class="hljs-string">&#x27;;&#x27;</span>)
</code></pre>
<h4 id="write-rows-to-csv-file">Write Rows to CSV File</h4>

<pre><code class="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">write_to_csv_file</span>(<span class="hljs-params">filename, rows</span>):
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename, <span class="hljs-string">&#x27;w&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> file:
        writer = csv.writer(file, delimiter=<span class="hljs-string">&#x27;;&#x27;</span>)
        writer.writerows(rows)
</code></pre>
<h3 id="json">JSON</h3>

<pre><code class="python"><span class="hljs-keyword">import</span> json
&lt;<span class="hljs-built_in">str</span>&gt;    = json.dumps(&lt;<span class="hljs-built_in">object</span>&gt;, ensure_ascii=<span class="hljs-literal">True</span>, indent=<span class="hljs-literal">None</span>)
&lt;<span class="hljs-built_in">object</span>&gt; = json.loads(&lt;<span class="hljs-built_in">str</span>&gt;)
</code></pre>
<h4 id="read-object-from-json-file">Read Object from JSON File</h4>

<pre><code class="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">read_json_file</span>(<span class="hljs-params">filename</span>):
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> file:
        <span class="hljs-keyword">return</span> json.load(file)
</code></pre>
<h4 id="write-object-to-json-file">Write Object to JSON File</h4>

<pre><code class="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">write_to_json_file</span>(<span class="hljs-params">filename, an_object</span>):
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename, <span class="hljs-string">&#x27;w&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> file:
        json.dump(an_object, file, ensure_ascii=<span class="hljs-literal">False</span>, indent=<span class="hljs-number">2</span>)
</code></pre>
<h3 id="pickle">Pickle</h3>

<pre><code class="python"><span class="hljs-keyword">import</span> pickle
&lt;<span class="hljs-built_in">bytes</span>&gt;  = pickle.dumps(&lt;<span class="hljs-built_in">object</span>&gt;)
&lt;<span class="hljs-built_in">object</span>&gt; = pickle.loads(&lt;<span class="hljs-built_in">bytes</span>&gt;)
</code></pre>
<h4 id="read-object-from-file">Read Object from File</h4>

<pre><code class="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">read_pickle_file</span>(<span class="hljs-params">filename</span>):
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename, <span class="hljs-string">&#x27;rb&#x27;</span>) <span class="hljs-keyword">as</span> file:
        <span class="hljs-keyword">return</span> pickle.load(file)
</code></pre>
<h4 id="write-object-to-file">Write Object to File</h4>

<pre><code class="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">write_to_pickle_file</span>(<span class="hljs-params">filename, an_object</span>):
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename, <span class="hljs-string">&#x27;wb&#x27;</span>) <span class="hljs-keyword">as</span> file:
        pickle.dump(an_object, file)
</code></pre>
<h3 id="sqlite">SQLite</h3>

<pre><code class="python"><span class="hljs-keyword">import</span> sqlite3
db = sqlite3.connect(<span class="hljs-string">&#x27;&lt;path&gt;&#x27;</span>)
...
db.close()
</code></pre>
<h4 id="read">Read</h4>

<pre><code class="python">cursor = db.execute(<span class="hljs-string">&#x27;&lt;query&gt;&#x27;</span>)
<span class="hljs-keyword">if</span> cursor:
    &lt;<span class="hljs-built_in">tuple</span>&gt; = cursor.fetchone()  <span class="hljs-comment"># First row.</span>
    &lt;<span class="hljs-built_in">list</span>&gt;  = cursor.fetchall()  <span class="hljs-comment"># Remaining rows.</span>
</code></pre>
<h4 id="write">Write</h4>

<pre><code class="python">db.execute(<span class="hljs-string">&#x27;&lt;query&gt;&#x27;</span>)
db.commit()
</code></pre>
<h3 id="bytes">Bytes</h3>
<p>Bytes object is an immutable sequence of single bytes. Mutable version is called &#39;bytearray&#39;.</p>

<pre><code class="python">&lt;<span class="hljs-built_in">bytes</span>&gt; = <span class="hljs-string">b&#x27;&lt;str&gt;&#x27;</span>
&lt;<span class="hljs-built_in">int</span>&gt;   = &lt;<span class="hljs-built_in">bytes</span>&gt;[&lt;index&gt;]
&lt;<span class="hljs-built_in">bytes</span>&gt; = &lt;<span class="hljs-built_in">bytes</span>&gt;[&lt;<span class="hljs-built_in">slice</span>&gt;]
&lt;ints&gt;  = <span class="hljs-built_in">list</span>(&lt;<span class="hljs-built_in">bytes</span>&gt;)
&lt;<span class="hljs-built_in">bytes</span>&gt; = <span class="hljs-string">b&#x27;&#x27;</span>.join(&lt;coll_of_bytes&gt;)
</code></pre>
<h4 id="encode1">Encode</h4>

<pre><code class="python">&lt;<span class="hljs-built_in">bytes</span>&gt; = &lt;<span class="hljs-built_in">str</span>&gt;.encode(encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>)
&lt;<span class="hljs-built_in">bytes</span>&gt; = &lt;<span class="hljs-built_in">int</span>&gt;.to_bytes(&lt;length&gt;, byteorder=<span class="hljs-string">&#x27;big|little&#x27;</span>, signed=<span class="hljs-literal">False</span>)
&lt;<span class="hljs-built_in">bytes</span>&gt; = <span class="hljs-built_in">bytes</span>.fromhex(<span class="hljs-string">&#x27;&lt;hex&gt;&#x27;</span>)
</code></pre>
<h4 id="decode1">Decode</h4>

<pre><code class="python">&lt;<span class="hljs-built_in">str</span>&gt;   = &lt;<span class="hljs-built_in">bytes</span>&gt;.decode(encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>)
&lt;<span class="hljs-built_in">int</span>&gt;   = <span class="hljs-built_in">int</span>.from_bytes(&lt;<span class="hljs-built_in">bytes</span>&gt;, byteorder=<span class="hljs-string">&#x27;big|little&#x27;</span>, signed=<span class="hljs-literal">False</span>)
&lt;<span class="hljs-built_in">hex</span>&gt;   = &lt;<span class="hljs-built_in">bytes</span>&gt;.<span class="hljs-built_in">hex</span>()
</code></pre>
<h4 id="read-bytes-from-file">Read Bytes from File</h4>

<pre><code class="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">read_bytes</span>(<span class="hljs-params">filename</span>):
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename, <span class="hljs-string">&#x27;rb&#x27;</span>) <span class="hljs-keyword">as</span> file:
        <span class="hljs-keyword">return</span> file.read()
</code></pre>
<h4 id="write-bytes-to-file">Write Bytes to File</h4>

<pre><code class="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">write_bytes</span>(<span class="hljs-params">filename, bytes_obj</span>):
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename, <span class="hljs-string">&#x27;wb&#x27;</span>) <span class="hljs-keyword">as</span> file:
        file.write(bytes_obj)
</code></pre>
<h3 id="struct">Struct</h3>

<ul>
<li>Module that performs conversions between Python values and a C struct, represented as a Python bytes object.</li>
<li>Machineâs native type sizes and byte order are used by default.</li>
</ul>

<pre><code class="python"><span class="hljs-keyword">from</span> struct <span class="hljs-keyword">import</span> pack, unpack, iter_unpack, calcsize
&lt;<span class="hljs-built_in">bytes</span>&gt;  = pack(<span class="hljs-string">&#x27;&lt;format&gt;&#x27;</span>, &lt;value_1&gt; [, &lt;value_2&gt;, ...])
&lt;<span class="hljs-built_in">tuple</span>&gt;  = unpack(<span class="hljs-string">&#x27;&lt;format&gt;&#x27;</span>, &lt;<span class="hljs-built_in">bytes</span>&gt;)
&lt;tuples&gt; = iter_unpack(<span class="hljs-string">&#x27;&lt;format&gt;&#x27;</span>, &lt;<span class="hljs-built_in">bytes</span>&gt;)
</code></pre>
<h4 id="example">Example</h4>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span>pack(<span class="hljs-string">&#x27;&gt;hhl&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
<span class="hljs-string">b&#x27;\x00\x01\x00\x02\x00\x00\x00\x03&#x27;</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>unpack(<span class="hljs-string">&#x27;&gt;hhl&#x27;</span>, <span class="hljs-string">b&#x27;\x00\x01\x00\x02\x00\x00\x00\x03&#x27;</span>)
(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>calcsize(<span class="hljs-string">&#x27;&gt;hhl&#x27;</span>)
<span class="hljs-number">8</span>
</code></pre>
<h4 id="format11">Format</h4>
<p>For standard sizes start format string with:</p>

<ul>
<li><code>&#39;=&#39;</code> - native byte order</li>
<li><code>&#39;&lt;&#39;</code> - little-endian</li>
<li><code>&#39;&gt;&#39;</code> - big-endian</li>
</ul>
<p>Use capital letter for unsigned type. Standard sizes are in brackets:</p>

<ul>
<li><code>&#39;x&#39;</code> - pad byte</li>
<li><code>&#39;c&#39;</code> - char (1)</li>
<li><code>&#39;h&#39;</code> - short (2)</li>
<li><code>&#39;i&#39;</code> - int (4)</li>
<li><code>&#39;l&#39;</code> - long (4)</li>
<li><code>&#39;q&#39;</code> - long long (8)</li>
<li><code>&#39;f&#39;</code> - float (4)</li>
<li><code>&#39;d&#39;</code> - double (8)</li>
</ul>
<h3 id="array">Array</h3>
<p>List that can hold only elements of predefined type. Available types are listed above.</p>

<pre><code class="python"><span class="hljs-keyword">from</span> array <span class="hljs-keyword">import</span> array
&lt;array&gt; = array(<span class="hljs-string">&#x27;&lt;typecode&gt;&#x27;</span> [, &lt;collection&gt;])
</code></pre>
<h3 id="memory-view">Memory View</h3>
<p>Used for accessing the internal data of an object that supports the buffer protocol.</p>

<pre><code class="python">&lt;<span class="hljs-built_in">memoryview</span>&gt; = <span class="hljs-built_in">memoryview</span>(&lt;<span class="hljs-built_in">bytes</span>&gt; / &lt;<span class="hljs-built_in">bytearray</span>&gt; / &lt;array&gt;)
&lt;<span class="hljs-built_in">memoryview</span>&gt;.release()
</code></pre>
<h3 id="deque">Deque</h3>
<p>Thread-safe list with efficient appends and pops from either side. Pronounced &quot;deck&quot;.</p>

<pre><code class="python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque
&lt;deque&gt; = deque(&lt;collection&gt;, maxlen=<span class="hljs-literal">None</span>)
</code></pre>

<pre><code class="python">&lt;deque&gt;.appendleft(&lt;el&gt;)
&lt;el&gt; = &lt;deque&gt;.popleft()
</code></pre>

<pre><code class="python">&lt;deque&gt;.extendleft(&lt;collection&gt;)  <span class="hljs-comment"># Collection gets reversed.</span>
&lt;deque&gt;.rotate(n=<span class="hljs-number">1</span>)               <span class="hljs-comment"># Rotates elements to the right.</span>
</code></pre>
<h2 id="advanced">Advanced</h2>
<h3 id="threading">Threading</h3>

<pre><code class="python"><span class="hljs-keyword">from</span> threading <span class="hljs-keyword">import</span> Thread, RLock
</code></pre>
<h4 id="thread">Thread</h4>

<pre><code class="python">thread = Thread(target=&lt;function&gt;, args=(&lt;first_arg&gt;, ))
thread.start()
...
thread.join()
</code></pre>
<h4 id="lock">Lock</h4>

<pre><code class="python">lock = RLock()
lock.acquire()
...
lock.release()
</code></pre>
<p>Or:</p>

<pre><code class="python"><span class="hljs-keyword">with</span> lock:
    ...
</code></pre>
<h3 id="introspection">Introspection</h3>
<p>Inspecting code at runtime.</p>
<h4 id="variables">Variables</h4>

<pre><code class="python">&lt;<span class="hljs-built_in">list</span>&gt; = <span class="hljs-built_in">dir</span>()      <span class="hljs-comment"># Names of variables in current scope.</span>
&lt;<span class="hljs-built_in">dict</span>&gt; = <span class="hljs-built_in">locals</span>()   <span class="hljs-comment"># Dict of local variables. Also vars().</span>
&lt;<span class="hljs-built_in">dict</span>&gt; = <span class="hljs-built_in">globals</span>()  <span class="hljs-comment"># Dict of global variables.</span>
</code></pre>
<h4 id="attributes">Attributes</h4>

<pre><code class="python">&lt;<span class="hljs-built_in">dict</span>&gt; = <span class="hljs-built_in">vars</span>(&lt;<span class="hljs-built_in">object</span>&gt;)
&lt;<span class="hljs-built_in">bool</span>&gt; = <span class="hljs-built_in">hasattr</span>(&lt;<span class="hljs-built_in">object</span>&gt;, <span class="hljs-string">&#x27;&lt;attr_name&gt;&#x27;</span>)
value  = <span class="hljs-built_in">getattr</span>(&lt;<span class="hljs-built_in">object</span>&gt;, <span class="hljs-string">&#x27;&lt;attr_name&gt;&#x27;</span>)
<span class="hljs-built_in">setattr</span>(&lt;<span class="hljs-built_in">object</span>&gt;, <span class="hljs-string">&#x27;&lt;attr_name&gt;&#x27;</span>, value)
</code></pre>
<h4 id="parameters">Parameters</h4>

<pre><code class="python"><span class="hljs-keyword">from</span> inspect <span class="hljs-keyword">import</span> signature
&lt;sig&gt;        = signature(&lt;function&gt;)
no_of_params = <span class="hljs-built_in">len</span>(&lt;sig&gt;.parameters)
param_names  = <span class="hljs-built_in">list</span>(&lt;sig&gt;.parameters.keys())
</code></pre>
<h3 id="metaprograming">Metaprograming</h3>
<p>Code that generates code.</p>
<h4 id="type">Type</h4>
<p>Type is the root class. If only passed the object it returns its type (class). Otherwise it creates a new class.</p>

<pre><code class="python">&lt;<span class="hljs-keyword">class</span>&gt; = <span class="hljs-built_in">type</span>(&lt;class_name&gt;, &lt;parents_tuple&gt;, &lt;attributes_dict&gt;)
</code></pre>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span>Z = <span class="hljs-built_in">type</span>(<span class="hljs-string">&#x27;Z&#x27;</span>, (), {<span class="hljs-string">&#x27;a&#x27;</span>: <span class="hljs-string">&#x27;abcde&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>: <span class="hljs-number">12345</span>})
<span class="hljs-meta">&gt;&gt;&gt; </span>z = Z()
</code></pre>
<h4 id="meta-class">Meta Class</h4>
<p>Class that creates class.</p>

<pre><code class="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">my_meta_class</span>(<span class="hljs-params">name, parents, attrs</span>):
    attrs[<span class="hljs-string">&#x27;a&#x27;</span>] = <span class="hljs-string">&#x27;abcde&#x27;</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">type</span>(name, parents, attrs)
</code></pre>
<p>Or:</p>

<pre><code class="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyMetaClass</span>(<span class="hljs-title class_ inherited__">type</span>):
    <span class="hljs-keyword">def</span> __new__(cls, name, parents, attrs):
        attrs[<span class="hljs-string">&#x27;a&#x27;</span>] = <span class="hljs-string">&#x27;abcde&#x27;</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">type</span>.__new__(cls, name, parents, attrs)
</code></pre>

<ul>
<li>New() is a class method that gets called before init(). If it returns an instance of its class, then that instance gets passed to init() as a &#39;self&#39; argument.</li>
<li>It receives the same arguments as init(), except for the first one that specifies the desired class of returned instance (<code>&#39;MyMetaClass&#39;</code> in our case).</li>
<li>New() can also be called directly, usually from a new() method of a child class (<code>def __new__(cls): return super().__new__(cls)</code>), in which case init() is not called.</li>
</ul>
<h4 id="metaclass-attribute">Metaclass Attribute</h4>
<p>When class is created it checks if it has metaclass defined. If not, it recursively checks if any of his parents has it defined and eventually comes to type().</p>

<pre><code class="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span>(metaclass=MyMetaClass):
    b = <span class="hljs-number">12345</span>
</code></pre>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span>MyClass.a, MyClass.b
(<span class="hljs-string">&#x27;abcde&#x27;</span>, <span class="hljs-number">12345</span>)
</code></pre>
<p>Type diagram (str is an instance of type, ...):</p>

<pre><code class="text">+---------+-------------+
| classes | metaclasses |
+---------+-------------|
| MyClass &gt; MyMetaClass |
|         |     v       |
|  object ---&gt; type &lt;+  |
|         |    ^ +---+  |
|   str -------+        |
+---------+-------------+
</code></pre>
<p>Inheritance diagram (str is a subclass of object, ...):</p>

<pre><code class="text">+---------+-------------+
| classes | metaclasses |
+---------+-------------|
| MyClass | MyMetaClass |
|    v    |     v       |
|  object &lt;--- type     |
|    ^    |             |
|   str   |             |
+---------+-------------+
</code></pre>
<h3 id="operator">Operator</h3>

<pre><code class="python"><span class="hljs-keyword">from</span> operator <span class="hljs-keyword">import</span> add, sub, mul, truediv, floordiv, mod, <span class="hljs-built_in">pow</span>, neg, <span class="hljs-built_in">abs</span>
<span class="hljs-keyword">from</span> operator <span class="hljs-keyword">import</span> eq, ne, lt, le, gt, ge
<span class="hljs-keyword">from</span> operator <span class="hljs-keyword">import</span> not_, and_, or_
<span class="hljs-keyword">from</span> operator <span class="hljs-keyword">import</span> itemgetter, attrgetter, methodcaller
</code></pre>

<pre><code class="python"><span class="hljs-keyword">import</span> operator <span class="hljs-keyword">as</span> op
product_of_elems = functools.reduce(op.mul, &lt;collection&gt;)
sorted_by_second = <span class="hljs-built_in">sorted</span>(&lt;collection&gt;, key=op.itemgetter(<span class="hljs-number">1</span>))
sorted_by_both   = <span class="hljs-built_in">sorted</span>(&lt;collection&gt;, key=op.itemgetter(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>))
LogicOp          = enum.Enum(<span class="hljs-string">&#x27;LogicOp&#x27;</span>, {<span class="hljs-string">&#x27;AND&#x27;</span>: op.and_, <span class="hljs-string">&#x27;OR&#x27;</span> : op.or_})
last_el          = op.methodcaller(<span class="hljs-string">&#x27;pop&#x27;</span>)(&lt;<span class="hljs-built_in">list</span>&gt;)
</code></pre>
<h3 id="eval">Eval</h3>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> ast <span class="hljs-keyword">import</span> literal_eval
<span class="hljs-meta">&gt;&gt;&gt; </span>literal_eval(<span class="hljs-string">&#x27;1 + 2&#x27;</span>)
<span class="hljs-number">3</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>literal_eval(<span class="hljs-string">&#x27;[1, 2, 3]&#x27;</span>)
[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>literal_eval(<span class="hljs-string">&#x27;abs(1)&#x27;</span>)
ValueError: malformed node <span class="hljs-keyword">or</span> string
</code></pre>
<h4 id="using-abstract-syntax-trees">Using Abstract Syntax Trees</h4>

<pre><code class="python"><span class="hljs-keyword">import</span> ast
<span class="hljs-keyword">from</span> ast <span class="hljs-keyword">import</span> Num, BinOp, UnaryOp
<span class="hljs-keyword">import</span> operator <span class="hljs-keyword">as</span> op

LEGAL_OPERATORS = {ast.Add:    op.add,      <span class="hljs-comment"># &lt;el&gt; + &lt;el&gt;</span>
                   ast.Sub:    op.sub,      <span class="hljs-comment"># &lt;el&gt; - &lt;el&gt;</span>
                   ast.Mult:   op.mul,      <span class="hljs-comment"># &lt;el&gt; * &lt;el&gt;</span>
                   ast.Div:    op.truediv,  <span class="hljs-comment"># &lt;el&gt; / &lt;el&gt;</span>
                   ast.Pow:    op.<span class="hljs-built_in">pow</span>,      <span class="hljs-comment"># &lt;el&gt; ** &lt;el&gt;</span>
                   ast.BitXor: op.xor,      <span class="hljs-comment"># &lt;el&gt; ^ &lt;el&gt;</span>
                   ast.USub:   op.neg}      <span class="hljs-comment"># - &lt;el&gt;</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">evaluate</span>(<span class="hljs-params">expression</span>):
    root = ast.parse(expression, mode=<span class="hljs-string">&#x27;eval&#x27;</span>)
    <span class="hljs-keyword">return</span> eval_node(root.body)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">eval_node</span>(<span class="hljs-params">node</span>):
    node_type = <span class="hljs-built_in">type</span>(node)
    <span class="hljs-keyword">if</span> node_type == Num:
        <span class="hljs-keyword">return</span> node.n
    <span class="hljs-keyword">if</span> node_type <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> [BinOp, UnaryOp]:
        <span class="hljs-keyword">raise</span> TypeError(node)
    operator_type = <span class="hljs-built_in">type</span>(node.op)
    <span class="hljs-keyword">if</span> operator_type <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> LEGAL_OPERATORS:
        <span class="hljs-keyword">raise</span> TypeError(<span class="hljs-string">f&#x27;Illegal operator <span class="hljs-subst">{node.op}</span>&#x27;</span>)
    operator = LEGAL_OPERATORS[operator_type]
    <span class="hljs-keyword">if</span> node_type == BinOp:
        left, right = eval_node(node.left), eval_node(node.right)
        <span class="hljs-keyword">return</span> operator(left, right)
    <span class="hljs-keyword">elif</span> node_type == UnaryOp:
        operand = eval_node(node.operand)
        <span class="hljs-keyword">return</span> operator(operand)
</code></pre>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span>evaluate(<span class="hljs-string">&#x27;2 ^ 6&#x27;</span>)
<span class="hljs-number">4</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>evaluate(<span class="hljs-string">&#x27;2 ** 6&#x27;</span>)
<span class="hljs-number">64</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>evaluate(<span class="hljs-string">&#x27;1 + 2 * 3 ** (4 ^ 5) / (6 + -7)&#x27;</span>)
-<span class="hljs-number">5.0</span>
</code></pre>
<h3 id="coroutine">Coroutine</h3>

<ul>
<li>Similar to generator, but generator pulls data through the pipe with iteration, while coroutine pushes data into the pipeline with send().</li>
<li>Coroutines provide more powerful data routing possibilities than iterators.</li>
<li>If you build a collection of simple data processing components, you can glue them together into complex arrangements of pipes, branches, merging, etc.</li>
</ul>
<h4 id="helper-decorator">Helper Decorator</h4>

<ul>
<li>All coroutines must be &quot;primed&quot; by first calling next().</li>
<li>Remembering to call next() is easy to forget.</li>
<li>Solved by wrapping coroutines with a decorator:</li>
</ul>

<pre><code class="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">coroutine</span>(<span class="hljs-params">func</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">out</span>(<span class="hljs-params">*args, **kwargs</span>):
        cr = func(*args, **kwargs)
        <span class="hljs-built_in">next</span>(cr)
        <span class="hljs-keyword">return</span> cr
    <span class="hljs-keyword">return</span> out
</code></pre>
<h4 id="pipeline-example">Pipeline Example</h4>

<pre><code class="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">reader</span>(<span class="hljs-params">target</span>):
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):
        target.send(i)
    target.close()

<span class="hljs-meta">@coroutine</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">adder</span>(<span class="hljs-params">target</span>):
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        value = (<span class="hljs-keyword">yield</span>)
        target.send(value + <span class="hljs-number">100</span>)

<span class="hljs-meta">@coroutine</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">printer</span>():
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        value = (<span class="hljs-keyword">yield</span>)
        <span class="hljs-built_in">print</span>(value)

reader(adder(printer()))  <span class="hljs-comment"># 100, 101, ..., 109</span>
</code></pre>
<h2 id="libraries">Libraries</h2>
<h3 id="progress-bar">Progress Bar</h3>

<pre><code class="python"><span class="hljs-comment"># $ pip3 install tqdm</span>
<span class="hljs-keyword">from</span> tqdm <span class="hljs-keyword">import</span> tqdm
<span class="hljs-keyword">from</span> time <span class="hljs-keyword">import</span> sleep
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> tqdm([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]):
    sleep(<span class="hljs-number">0.2</span>)
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> tqdm(<span class="hljs-built_in">range</span>(<span class="hljs-number">100</span>)):
    sleep(<span class="hljs-number">0.02</span>)
</code></pre>
<h3 id="plot">Plot</h3>

<pre><code class="python"><span class="hljs-comment"># $ pip3 install matplotlib</span>
<span class="hljs-keyword">from</span> matplotlib <span class="hljs-keyword">import</span> pyplot
pyplot.plot(&lt;data_1&gt; [, &lt;data_2&gt;, ...])
pyplot.savefig(&lt;filename&gt;)
pyplot.show()
</code></pre>
<h3 id="table">Table</h3>
<h4 id="prints-a-csv-file-as-an-ascii-table-">Prints a CSV file as an ASCII table:</h4>

<pre><code class="python"><span class="hljs-comment"># $ pip3 install tabulate</span>
<span class="hljs-keyword">from</span> tabulate <span class="hljs-keyword">import</span> tabulate
<span class="hljs-keyword">import</span> csv
<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(&lt;filename&gt;, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> file:
    lines   = csv.reader(file, delimiter=<span class="hljs-string">&#x27;;&#x27;</span>)
    headers = [header.title() <span class="hljs-keyword">for</span> header <span class="hljs-keyword">in</span> <span class="hljs-built_in">next</span>(lines)]
    table   = tabulate(lines, headers)
    <span class="hljs-built_in">print</span>(table)
</code></pre>
<h3 id="curses">Curses</h3>

<pre><code class="python"><span class="hljs-keyword">from</span> curses <span class="hljs-keyword">import</span> wrapper, <span class="hljs-built_in">ascii</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    wrapper(draw)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params">screen</span>):
    screen.clear()
    screen.addstr(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;Press ESC to quit.&#x27;</span>)
    <span class="hljs-keyword">while</span> screen.getch() != <span class="hljs-built_in">ascii</span>.ESC:
        <span class="hljs-keyword">pass</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_border</span>(<span class="hljs-params">screen</span>):
    <span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> namedtuple
    P = namedtuple(<span class="hljs-string">&#x27;P&#x27;</span>, <span class="hljs-string">&#x27;y x&#x27;</span>)
    height, width = screen.getmaxyx()
    <span class="hljs-keyword">return</span> P(height-<span class="hljs-number">1</span>, width-<span class="hljs-number">1</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:
    main()
</code></pre>
<h3 id="logging">Logging</h3>

<pre><code class="python"><span class="hljs-comment"># $ pip3 install loguru</span>
<span class="hljs-keyword">from</span> loguru <span class="hljs-keyword">import</span> logger
</code></pre>

<pre><code class="python">logger.add(<span class="hljs-string">&#x27;debug_{time}.log&#x27;</span>, colorize=<span class="hljs-literal">True</span>)  <span class="hljs-comment"># Connects a log file.</span>
logger.add(<span class="hljs-string">&#x27;error_{time}.log&#x27;</span>, level=<span class="hljs-string">&#x27;ERROR&#x27;</span>)  <span class="hljs-comment"># Another file for errors or higher.</span>
logger.&lt;level&gt;(<span class="hljs-string">&#x27;A logging message.&#x27;</span>)
</code></pre>

<ul>
<li>Levels: <code>&#39;debug&#39;</code>, <code>&#39;info&#39;</code>, <code>&#39;success&#39;</code>, <code>&#39;warning&#39;</code>, <code>&#39;error&#39;</code>, <code>&#39;critical&#39;</code>.</li>
</ul>
<h4 id="exceptions1">Exceptions</h4>
<p>Error description, stack trace and values of variables are appended automatically.</p>

<pre><code class="python"><span class="hljs-keyword">try</span>:
    ...
<span class="hljs-keyword">except</span> &lt;Exception&gt;:
    logger.exception(<span class="hljs-string">&#x27;An error happened.&#x27;</span>)
</code></pre>
<h4 id="rotation">Rotation</h4>
<p>Parameter that sets a condition when a new log file is created.</p>

<pre><code class="python">rotation=&lt;<span class="hljs-built_in">int</span>&gt;|&lt;datetime.timedelta&gt;|&lt;datetime.time&gt;|&lt;<span class="hljs-built_in">str</span>&gt;
</code></pre>

<ul>
<li><code>&#39;&lt;int&gt;&#39;</code> - Max file size in bytes.</li>
<li><code>&#39;&lt;timedelta&gt;&#39;</code> - Max age of a file.</li>
<li><code>&#39;&lt;time&gt;&#39;</code> - Time of day.</li>
<li><code>&#39;&lt;str&gt;&#39;</code> - Any of above as a string: <code>&#39;100 MB&#39;</code>, <code>&#39;1 month&#39;</code>, <code>&#39;monday at 12:00&#39;</code>, ...</li>
</ul>
<h4 id="retention">Retention</h4>
<p>Sets a condition which old log files are deleted.</p>

<pre><code class="python">retention=&lt;<span class="hljs-built_in">int</span>&gt;|&lt;datetime.timedelta&gt;|&lt;<span class="hljs-built_in">str</span>&gt;
</code></pre>

<ul>
<li><code>&#39;&lt;int&gt;&#39;</code> - Max number of files.</li>
<li><code>&#39;&lt;timedelta&gt;&#39;</code> - Max age of a file.</li>
<li><code>&#39;&lt;str&gt;&#39;</code> - Max age as a string: <code>&#39;1 week, 3 days&#39;</code>, <code>&#39;2 months&#39;</code>, ...</li>
</ul>
<h3 id="web-scraping">Web Scraping</h3>

<pre><code class="python"><span class="hljs-comment"># $ pip3 install requests beautifulsoup4</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> requests
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup
<span class="hljs-meta">&gt;&gt;&gt; </span>url   = <span class="hljs-string">&#x27;https://en.wikipedia.org/wiki/Python_(programming_language)&#x27;</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>page  = requests.get(url)
<span class="hljs-meta">&gt;&gt;&gt; </span>doc   = BeautifulSoup(page.text, <span class="hljs-string">&#x27;html.parser&#x27;</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>table = doc.find(<span class="hljs-string">&#x27;table&#x27;</span>, class_=<span class="hljs-string">&#x27;infobox vevent&#x27;</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>rows  = table.find_all(<span class="hljs-string">&#x27;tr&#x27;</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>link  = rows[<span class="hljs-number">11</span>].find(<span class="hljs-string">&#x27;a&#x27;</span>)[<span class="hljs-string">&#x27;href&#x27;</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>ver   = rows[<span class="hljs-number">6</span>].find(<span class="hljs-string">&#x27;div&#x27;</span>).text.split()[<span class="hljs-number">0</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>link, ver
(<span class="hljs-string">&#x27;https://www.python.org/&#x27;</span>, <span class="hljs-string">&#x27;3.7.2&#x27;</span>)
</code></pre>
<h4 id="selenium">Selenium</h4>
<p>Library for scraping dynamically generated web content.</p>

<pre><code class="python"><span class="hljs-comment"># $ brew cask install chromedriver</span>
<span class="hljs-comment"># $ pip3 install selenium</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> selenium <span class="hljs-keyword">import</span> webdriver
<span class="hljs-meta">&gt;&gt;&gt; </span>driver = webdriver.Chrome()
<span class="hljs-meta">&gt;&gt;&gt; </span>driver.get(url)
<span class="hljs-meta">&gt;&gt;&gt; </span>xpath  = <span class="hljs-string">&#x27;//*[@id=&quot;mw-content-text&quot;]/div/table[1]/tbody/tr[7]/td/div&#x27;</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>driver.find_element_by_xpath(xpath).text.split()[<span class="hljs-number">0</span>]
<span class="hljs-string">&#x27;3.7.2&#x27;</span>
</code></pre>
<h3 id="web">Web</h3>

<pre><code class="python"><span class="hljs-comment"># $ pip3 install bottle</span>
<span class="hljs-keyword">from</span> bottle <span class="hljs-keyword">import</span> run, route, post, template, request, response
<span class="hljs-keyword">import</span> json
</code></pre>
<h4 id="run">Run</h4>

<pre><code class="python">run(host=<span class="hljs-string">&#x27;localhost&#x27;</span>, port=<span class="hljs-number">8080</span>)
run(host=<span class="hljs-string">&#x27;0.0.0.0&#x27;</span>, port=<span class="hljs-number">80</span>, server=<span class="hljs-string">&#x27;cherrypy&#x27;</span>)
</code></pre>
<h4 id="static-request">Static Request</h4>

<pre><code class="python"><span class="hljs-meta">@route(<span class="hljs-params"><span class="hljs-string">&#x27;/img/&lt;image&gt;&#x27;</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">send_image</span>(<span class="hljs-params">image</span>):
    <span class="hljs-keyword">return</span> static_file(image, <span class="hljs-string">&#x27;images/&#x27;</span>, mimetype=<span class="hljs-string">&#x27;image/png&#x27;</span>)
</code></pre>
<h4 id="dynamic-request">Dynamic Request</h4>

<pre><code class="python"><span class="hljs-meta">@route(<span class="hljs-params"><span class="hljs-string">&#x27;/&lt;sport&gt;&#x27;</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">send_page</span>(<span class="hljs-params">sport</span>):
    <span class="hljs-keyword">return</span> template(<span class="hljs-string">&#x27;&lt;h1&gt;{{title}}&lt;/h1&gt;&#x27;</span>, title=sport)
</code></pre>
<h4 id="rest-request">REST Request</h4>

<pre><code class="python"><span class="hljs-meta">@post(<span class="hljs-params"><span class="hljs-string">&#x27;/odds/&lt;sport&gt;&#x27;</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">odds_handler</span>(<span class="hljs-params">sport</span>):
    team = request.forms.get(<span class="hljs-string">&#x27;team&#x27;</span>)
    home_odds, away_odds = <span class="hljs-number">2.44</span>, <span class="hljs-number">3.29</span>
    response.headers[<span class="hljs-string">&#x27;Content-Type&#x27;</span>] = <span class="hljs-string">&#x27;application/json&#x27;</span>
    response.headers[<span class="hljs-string">&#x27;Cache-Control&#x27;</span>] = <span class="hljs-string">&#x27;no-cache&#x27;</span>
    <span class="hljs-keyword">return</span> json.dumps([team, home_odds, away_odds])
</code></pre>
<p>Test:</p>

<pre><code class="python"><span class="hljs-comment"># $ pip3 install requests</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> requests
<span class="hljs-meta">&gt;&gt;&gt; </span>url  = <span class="hljs-string">&#x27;http://localhost:8080/odds/football&#x27;</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>data = {<span class="hljs-string">&#x27;team&#x27;</span>: <span class="hljs-string">&#x27;arsenal f.c.&#x27;</span>}
<span class="hljs-meta">&gt;&gt;&gt; </span>response = requests.post(url, data=data)
<span class="hljs-meta">&gt;&gt;&gt; </span>response.json()
[<span class="hljs-string">&#x27;arsenal f.c.&#x27;</span>, <span class="hljs-number">2.44</span>, <span class="hljs-number">3.29</span>]
</code></pre>
<h3 id="profile">Profile</h3>

<pre><code class="python"><span class="hljs-keyword">from</span> time <span class="hljs-keyword">import</span> time
start_time = time()  <span class="hljs-comment"># Seconds since Epoch.</span>
...
duration = time() - start_time
</code></pre>
<h4 id="high-performance">High Performance</h4>

<pre><code class="python"><span class="hljs-keyword">from</span> time <span class="hljs-keyword">import</span> perf_counter <span class="hljs-keyword">as</span> pc
start_time = pc()    <span class="hljs-comment"># Seconds since restart.</span>
...
duration = pc() - start_time
</code></pre>
<h4 id="timing-a-snippet">Timing a Snippet</h4>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> timeit <span class="hljs-keyword">import</span> timeit
<span class="hljs-meta">&gt;&gt;&gt; </span>timeit(<span class="hljs-string">&#x27;&quot;-&quot;.join(str(a) for a in range(100))&#x27;</span>,
<span class="hljs-meta">... </span>       number=<span class="hljs-number">10000</span>, <span class="hljs-built_in">globals</span>=<span class="hljs-built_in">globals</span>(), setup=<span class="hljs-string">&#x27;pass&#x27;</span>)
<span class="hljs-number">0.34986</span>
</code></pre>
<h4 id="line-profiler">Line Profiler</h4>

<pre><code class="python"><span class="hljs-comment"># $ pip3 install line_profiler</span>
<span class="hljs-meta">@profile</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    a = [*<span class="hljs-built_in">range</span>(<span class="hljs-number">10000</span>)]
    b = {*<span class="hljs-built_in">range</span>(<span class="hljs-number">10000</span>)}
main()
</code></pre>
<p>Usage:</p>

<pre><code class="text">$ kernprof -lv test.py
Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
     1                                           @profile
     2                                           def main():
     3         1       1128.0   1128.0     27.4      a = [*range(10000)]
     4         1       2994.0   2994.0     72.6      b = {*range(10000)}
</code></pre>
<h4 id="call-graph">Call Graph</h4>
<p>Generates a PNG image of a call graph with highlighted bottlenecks:</p>

<pre><code class="python"><span class="hljs-comment"># $ pip3 install pycallgraph</span>
<span class="hljs-keyword">from</span> pycallgraph <span class="hljs-keyword">import</span> output, PyCallGraph
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
time_str = datetime.now().strftime(<span class="hljs-string">&#x27;%Y%m%d%H%M%S&#x27;</span>)
filename = <span class="hljs-string">f&#x27;profile-<span class="hljs-subst">{time_str}</span>.png&#x27;</span>
drawer = output.GraphvizOutput(output_file=filename)
<span class="hljs-keyword">with</span> PyCallGraph(output=drawer):
    &lt;code_to_be_profiled&gt;
</code></pre>
<h3 id="numpy">NumPy</h3>
<p>Array manipulation mini language. Can run up to one hundred times faster than equivalent Python code.</p>

<pre><code class="python"><span class="hljs-comment"># $ pip3 install numpy</span>
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
</code></pre>

<pre><code class="python">&lt;array&gt; = np.array(&lt;<span class="hljs-built_in">list</span>&gt;)
&lt;array&gt; = np.arange(from_inclusive, to_exclusive, Â±step_size)
&lt;array&gt; = np.ones(&lt;shape&gt;)
&lt;array&gt; = np.random.randint(from_inclusive, to_exclusive, &lt;shape&gt;)
</code></pre>

<pre><code class="python">&lt;array&gt;.shape = &lt;shape&gt;
&lt;view&gt;  = &lt;array&gt;.reshape(&lt;shape&gt;)
&lt;view&gt;  = np.broadcast_to(&lt;array&gt;, &lt;shape&gt;)
</code></pre>

<pre><code class="python">&lt;array&gt; = &lt;array&gt;.<span class="hljs-built_in">sum</span>(axis)
indexes = &lt;array&gt;.argmin(axis)
</code></pre>

<ul>
<li>Shape is a tuple of dimension sizes.</li>
<li>Axis is an index of dimension that gets collapsed. Leftmost dimension has index 0.</li>
</ul>
<h4 id="indexing">Indexing</h4>

<pre><code class="bash">&lt;el&gt;       = &lt;2d_array&gt;[0, 0]        <span class="hljs-comment"># First element.</span>
&lt;1d_view&gt;  = &lt;2d_array&gt;[0]           <span class="hljs-comment"># First row.</span>
&lt;1d_view&gt;  = &lt;2d_array&gt;[:, 0]        <span class="hljs-comment"># First column. Also [..., 0].</span>
&lt;3d_view&gt;  = &lt;2d_array&gt;[None, :, :]  <span class="hljs-comment"># Expanded by dimension of size 1.</span>
</code></pre>

<pre><code class="bash">&lt;1d_array&gt; = &lt;2d_array&gt;[&lt;1d_row_indexes&gt;, &lt;1d_column_indexes&gt;]
&lt;2d_array&gt; = &lt;2d_array&gt;[&lt;2d_row_indexes&gt;, &lt;2d_column_indexes&gt;]
</code></pre>

<pre><code class="bash">&lt;2d_bools&gt; = &lt;2d_array&gt; &gt; 0
&lt;1d_array&gt; = &lt;2d_array&gt;[&lt;2d_bools&gt;]
</code></pre>

<ul>
<li>If row and column indexes differ in shape, they are combined with broadcasting.</li>
</ul>
<h4 id="broadcasting">Broadcasting</h4>
<p>Broadcasting is a set of rules by which NumPy functions operate on arrays of different sizes and/or dimensions.</p>

<pre><code class="python">left  = [[<span class="hljs-number">0.1</span>], [<span class="hljs-number">0.6</span>], [<span class="hljs-number">0.8</span>]]  <span class="hljs-comment"># Shape: (3, 1)</span>
right = [ <span class="hljs-number">0.1</span> ,  <span class="hljs-number">0.6</span> ,  <span class="hljs-number">0.8</span> ]  <span class="hljs-comment"># Shape: (3)</span>
</code></pre>

<ol>
<li><p>If array shapes differ in length, left-pad the shorter shape with ones:</p>

<pre><code class="python">left  = [[<span class="hljs-number">0.1</span>], [<span class="hljs-number">0.6</span>], [<span class="hljs-number">0.8</span>]]  <span class="hljs-comment"># Shape: (3, 1)</span>
right = [[<span class="hljs-number">0.1</span> ,  <span class="hljs-number">0.6</span> ,  <span class="hljs-number">0.8</span>]]  <span class="hljs-comment"># Shape: (1, 3) &lt;- !</span>
</code></pre>
</li>
<li><p>If any dimensions differ in size, expand the ones that have size 1 by duplicating their elements:</p>

<pre><code class="python">left  = [[<span class="hljs-number">0.1</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">0.1</span>], [<span class="hljs-number">0.6</span>, <span class="hljs-number">0.6</span>, <span class="hljs-number">0.6</span>], [<span class="hljs-number">0.8</span>, <span class="hljs-number">0.8</span>, <span class="hljs-number">0.8</span>]]  <span class="hljs-comment"># Shape: (3, 3) &lt;- !</span>
right = [[<span class="hljs-number">0.1</span>, <span class="hljs-number">0.6</span>, <span class="hljs-number">0.8</span>], [<span class="hljs-number">0.1</span>, <span class="hljs-number">0.6</span>, <span class="hljs-number">0.8</span>], [<span class="hljs-number">0.1</span>, <span class="hljs-number">0.6</span>, <span class="hljs-number">0.8</span>]]  <span class="hljs-comment"># Shape: (3, 3) &lt;- !</span>
</code></pre>
</li>
<li><p>If neither non-matching dimension has size 1, rise an error.</p>
</li>
</ol>
<h4 id="example1">Example</h4>
<p>For each point returns index of its nearest point (<code>[0.1, 0.6, 0.8] =&gt; [1, 2, 1]</code>):</p>

<pre><code class="python"><span class="hljs-meta">&gt;&gt;&gt; </span>points = np.array([<span class="hljs-number">0.1</span>, <span class="hljs-number">0.6</span>, <span class="hljs-number">0.8</span>])
[ <span class="hljs-number">0.1</span>,  <span class="hljs-number">0.6</span>,  <span class="hljs-number">0.8</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>wrapped_points = points.reshape(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>)
[[ <span class="hljs-number">0.1</span>],
 [ <span class="hljs-number">0.6</span>],
 [ <span class="hljs-number">0.8</span>]]
<span class="hljs-meta">&gt;&gt;&gt; </span>distances = wrapped_points - points
[[ <span class="hljs-number">0.</span> , -<span class="hljs-number">0.5</span>, -<span class="hljs-number">0.7</span>],
 [ <span class="hljs-number">0.5</span>,  <span class="hljs-number">0.</span> , -<span class="hljs-number">0.2</span>],
 [ <span class="hljs-number">0.7</span>,  <span class="hljs-number">0.2</span>,  <span class="hljs-number">0.</span> ]]
<span class="hljs-meta">&gt;&gt;&gt; </span>distances = np.<span class="hljs-built_in">abs</span>(distances)
[[ <span class="hljs-number">0.</span> ,  <span class="hljs-number">0.5</span>,  <span class="hljs-number">0.7</span>],
 [ <span class="hljs-number">0.5</span>,  <span class="hljs-number">0.</span> ,  <span class="hljs-number">0.2</span>],
 [ <span class="hljs-number">0.7</span>,  <span class="hljs-number">0.2</span>,  <span class="hljs-number">0.</span> ]]
<span class="hljs-meta">&gt;&gt;&gt; </span>i = np.arange(<span class="hljs-number">3</span>)
[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>distances[i, i] = np.inf
[[ inf,  <span class="hljs-number">0.5</span>,  <span class="hljs-number">0.7</span>],
 [ <span class="hljs-number">0.5</span>,  inf,  <span class="hljs-number">0.2</span>],
 [ <span class="hljs-number">0.7</span>,  <span class="hljs-number">0.2</span>,  inf]]
<span class="hljs-meta">&gt;&gt;&gt; </span>distances.argmin(<span class="hljs-number">1</span>)
[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>]
</code></pre>
<h3 id="image">Image</h3>

<pre><code class="python"><span class="hljs-comment"># $ pip3 install pillow</span>
<span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image
</code></pre>
<h4 id="create-a-png-image-of-a-rainbow-gradient-">Create a PNG image of a rainbow gradient:</h4>

<pre><code class="python">width  = <span class="hljs-number">100</span>
height = <span class="hljs-number">100</span>
size   = width * height
pixels = [<span class="hljs-number">255</span> * i/size <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(size)]

img = Image.new(<span class="hljs-string">&#x27;HSV&#x27;</span>, (width, height))
img.putdata([(<span class="hljs-built_in">int</span>(a), <span class="hljs-number">255</span>, <span class="hljs-number">255</span>) <span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> pixels])
img.convert(mode=<span class="hljs-string">&#x27;RGB&#x27;</span>).save(<span class="hljs-string">&#x27;test.png&#x27;</span>)
</code></pre>
<h4 id="add-noise-to-a-png-image-">Add noise to a PNG image:</h4>

<pre><code class="python"><span class="hljs-keyword">from</span> random <span class="hljs-keyword">import</span> randint
add_noise = <span class="hljs-keyword">lambda</span> value: <span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">min</span>(<span class="hljs-number">255</span>, value + randint(-<span class="hljs-number">20</span>, <span class="hljs-number">20</span>)))
img = Image.<span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;test.png&#x27;</span>).convert(mode=<span class="hljs-string">&#x27;HSV&#x27;</span>)
img.putdata([(add_noise(h), s, v) <span class="hljs-keyword">for</span> h, s, v <span class="hljs-keyword">in</span> img.getdata()])
img.convert(mode=<span class="hljs-string">&#x27;RGB&#x27;</span>).save(<span class="hljs-string">&#x27;test.png&#x27;</span>)
</code></pre>
<p>Modes</p>

<ul>
<li><code>&#39;1&#39;</code> - 1-bit pixels, black and white, stored with one pixel per byte.</li>
<li><code>&#39;L&#39;</code> - 8-bit pixels, greyscale.</li>
<li><code>&#39;RGB&#39;</code> - 3x8-bit pixels, true color.</li>
<li><code>&#39;RGBA&#39;</code> - 4x8-bit pixels, true color with transparency mask.</li>
<li><code>&#39;HSV&#39;</code> - 3x8-bit pixels, Hue, Saturation, Value color space.</li>
</ul>
<h3 id="audio">Audio</h3>

<pre><code class="python"><span class="hljs-keyword">import</span> wave
<span class="hljs-keyword">from</span> struct <span class="hljs-keyword">import</span> pack, iter_unpack
</code></pre>
<h4 id="read-frames-from-wav-file">Read Frames from WAV File</h4>

<pre><code class="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">read_wav_file</span>(<span class="hljs-params">filename</span>):
    <span class="hljs-keyword">with</span> wave.<span class="hljs-built_in">open</span>(filename, <span class="hljs-string">&#x27;rb&#x27;</span>) <span class="hljs-keyword">as</span> wf:
        frames = wf.readframes(wf.getnframes())
        <span class="hljs-keyword">return</span> [a[<span class="hljs-number">0</span>] <span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> iter_unpack(<span class="hljs-string">&#x27;&lt;h&#x27;</span>, frames)]
</code></pre>
<h4 id="write-frames-to-wav-file">Write Frames to WAV File</h4>

<pre><code class="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">write_to_wav_file</span>(<span class="hljs-params">filename, frames_int, mono=<span class="hljs-literal">True</span></span>):
    frames_short = (pack(<span class="hljs-string">&#x27;&lt;h&#x27;</span>, a) <span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> frames_int)
    <span class="hljs-keyword">with</span> wave.<span class="hljs-built_in">open</span>(filename, <span class="hljs-string">&#x27;wb&#x27;</span>) <span class="hljs-keyword">as</span> wf:
        wf.setnchannels(<span class="hljs-number">1</span> <span class="hljs-keyword">if</span> mono <span class="hljs-keyword">else</span> <span class="hljs-number">2</span>)
        wf.setsampwidth(<span class="hljs-number">2</span>)
        wf.setframerate(<span class="hljs-number">44100</span>)
        wf.writeframes(<span class="hljs-string">b&#x27;&#x27;</span>.join(frames_short))
</code></pre>
<h4 id="save-a-sine-wave-to-a-mono-wav-file-">Save a sine wave to a mono WAV file:</h4>

<pre><code class="python"><span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> pi, sin
frames_f = (sin(i * <span class="hljs-number">2</span> * pi * <span class="hljs-number">440</span> / <span class="hljs-number">44100</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">100000</span>))
frames_i = (<span class="hljs-built_in">int</span>(a * <span class="hljs-number">30000</span>) <span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> frames_f)
write_to_wav_file(<span class="hljs-string">&#x27;test.wav&#x27;</span>, frames_i)
</code></pre>
<h4 id="add-noise-to-a-mono-wav-file-">Add noise to a mono WAV file:</h4>

<pre><code class="python"><span class="hljs-keyword">from</span> random <span class="hljs-keyword">import</span> randint
add_noise = <span class="hljs-keyword">lambda</span> value: <span class="hljs-built_in">max</span>(-<span class="hljs-number">32768</span>, <span class="hljs-built_in">min</span>(<span class="hljs-number">32767</span>, value + randint(-<span class="hljs-number">500</span>, <span class="hljs-number">500</span>)))
frames_i  = (add_noise(a) <span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> read_wav_file(<span class="hljs-string">&#x27;test.wav&#x27;</span>))
write_to_wav_file(<span class="hljs-string">&#x27;test.wav&#x27;</span>, frames_i)
</code></pre>
<h4 id="play-popcorn-">Play Popcorn:</h4>

<pre><code class="python"><span class="hljs-comment"># $ pip3 install simpleaudio</span>
<span class="hljs-keyword">import</span> simpleaudio, math, struct
<span class="hljs-keyword">from</span> itertools <span class="hljs-keyword">import</span> chain, repeat
F  = <span class="hljs-number">44100</span>
P1 = <span class="hljs-string">&#x27;71âª,69,,71âª,66,,62âª,66,,59âª,,,&#x27;</span>
P2 = <span class="hljs-string">&#x27;71âª,73,,74âª,73,,74,,71,,73âª,71,,73,,69,,71âª,69,,71,,67,,71âª,,,&#x27;</span>
get_pause = <span class="hljs-keyword">lambda</span> seconds: repeat(<span class="hljs-number">0</span>, <span class="hljs-built_in">int</span>(seconds * F))
sin_f     = <span class="hljs-keyword">lambda</span> i, hz: math.sin(i * <span class="hljs-number">2</span> * math.pi * hz / F)
get_wave  = <span class="hljs-keyword">lambda</span> hz, seconds: (sin_f(i, hz) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">int</span>(seconds * F)))
get_hz    = <span class="hljs-keyword">lambda</span> key: <span class="hljs-number">8.176</span> * <span class="hljs-number">2</span> ** (<span class="hljs-built_in">int</span>(key) / <span class="hljs-number">12</span>)
parse_n   = <span class="hljs-keyword">lambda</span> note: (get_hz(note[:<span class="hljs-number">2</span>]), <span class="hljs-number">0.25</span> <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;âª&#x27;</span> <span class="hljs-keyword">in</span> note <span class="hljs-keyword">else</span> <span class="hljs-number">0.125</span>)
get_note  = <span class="hljs-keyword">lambda</span> note: get_wave(*parse_n(note)) <span class="hljs-keyword">if</span> note <span class="hljs-keyword">else</span> get_pause(<span class="hljs-number">0.125</span>)
frames_i  = chain.from_iterable(get_note(n) <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> <span class="hljs-string">f&#x27;<span class="hljs-subst">{P1}</span><span class="hljs-subst">{P1}</span><span class="hljs-subst">{P2}</span>&#x27;</span>.split(<span class="hljs-string">&#x27;,&#x27;</span>))
frames_b  = <span class="hljs-string">b&#x27;&#x27;</span>.join(struct.pack(<span class="hljs-string">&#x27;&lt;h&#x27;</span>, <span class="hljs-built_in">int</span>(a * <span class="hljs-number">30000</span>)) <span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> frames_i)
simpleaudio.play_buffer(frames_b, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, F)
</code></pre>
<h2 id="intro">Intro</h2>

<pre><code class="python"><span class="hljs-comment">#!/usr/bin/env python3</span>
<span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> namedtuple
<span class="hljs-keyword">from</span> enum <span class="hljs-keyword">import</span> Enum
<span class="hljs-keyword">import</span> re
<span class="hljs-keyword">import</span> sys


<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-keyword">pass</span>


<span class="hljs-keyword">def</span> <span class="hljs-title function_">read_file</span>(<span class="hljs-params">filename</span>):
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> file:
        <span class="hljs-keyword">return</span> file.readlines()


<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:
    main()
</code></pre>

</div>
</body>  
</html>