<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Camp cheatsheet</title>
  <link href="s/main.css" rel="stylesheet" />
  <script src="s/main.js"></script>
</head>

<body onload="start()">
  <div class="breadcrumbs"><a href="/">Home</a> / <a href="index.html">cheatsheets</a> / Camp cheatsheet</div>
  <div class="edit">
      <a href="https://github.com/kjk/blog/blob/master/www/cheatsheets/devhints\camp.md" >edit</a>
  </div>
  <div class="toc">
<b>Getting started</b>: <a href="#quick-start">Quick start</a>, <a href="#routes">Routes</a>, <a href="#templates">Templates</a>, <a href="#not-found">Not found</a>, <a href="#low-level-handler">Low level handler</a><br>
<b>Templates</b>: <a href="#basic-templates">Basic templates</a>, <a href="#implicit-templates">Implicit templates</a><br>
<b>Advanced features</b>: <a href="#web-sockets">Web sockets</a><br></div>


  <div id="start"></div>
  <div id="wrapped-content"></div>
<div id="content">
<h2 id="getting-started">Getting started</h2>
<h3 id="quick-start">Quick start</h3>
<h4 id="app-js">app.js</h4>

<pre><code class="js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Camp</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;camp&#x27;</span>)
<span class="hljs-keyword">const</span> camp = <span class="hljs-title class_">Camp</span>.<span class="hljs-title function_">start</span>({ <span class="hljs-attr">port</span>: <span class="hljs-number">1234</span> })
</code></pre>
<h4 id="web-index-html">web/index.html</h4>

<pre><code class="html"><span class="hljs-meta">&lt;!doctype <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>Hello world!<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
</code></pre>
<p>Camp serves files in <code>web/</code> by default.</p>
<h3 id="routes">Routes</h3>
<h4 id="handles-search-q-rainbows-">Handles <code>/search?q=rainbows</code></h4>

<pre><code class="js">camp.<span class="hljs-title function_">path</span>(<span class="hljs-string">&#x27;/search&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> q = res.<span class="hljs-property">query</span>.<span class="hljs-property">q</span>
  res.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">results</span>: ··· })
})
</code></pre>
<p>Also available: <code>camp.post</code>, <code>camp.get</code>.</p>
<h3 id="templates">Templates</h3>

<pre><code class="js"><span class="hljs-keyword">const</span> tpl = <span class="hljs-title class_">Camp</span>.<span class="hljs-title function_">template</span>(<span class="hljs-string">&#x27;./templates/post.html&#x27;</span>)

camp.<span class="hljs-title function_">path</span>(<span class="hljs-string">&#x27;/blog/:post.html&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  res.<span class="hljs-title function_">template</span>({
    <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;Hello world&#x27;</span>
  }, tpl)
})
</code></pre>
<p>See: <a href="https://github.com/espadrine/sc/blob/master/doc/Readme.md#templates">Templates</a></p>
<h3 id="not-found">Not found</h3>

<pre><code class="js">camp.<span class="hljs-title function_">notFound</span>(<span class="hljs-string">&#x27;/*.lol&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  res.<span class="hljs-title function_">file</span>(<span class="hljs-string">&#x27;/404.html&#x27;</span>)
})
</code></pre>
<p>See: <a href="https://github.com/espadrine/sc/blob/master/doc/Readme.md#fall-through">Fall through</a></p>
<h3 id="low-level-handler">Low level handler</h3>

<pre><code class="js">camp.<span class="hljs-title function_">handle</span>(<span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> {
  res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">&#x27;X-Hello&#x27;</span>, <span class="hljs-string">&#x27;world&#x27;</span>)
  <span class="hljs-title function_">next</span>()
})
</code></pre>
<p>See: <a href="https://github.com/espadrine/sc/blob/master/doc/Readme.md#handlers">Handlers</a></p>
<h2 id="templates">Templates</h2>
<h3 id="basic-templates">Basic templates</h3>

<pre><code class="js"><span class="hljs-keyword">const</span> tpl = <span class="hljs-title class_">Camp</span>.<span class="hljs-title function_">template</span>(<span class="hljs-string">&#x27;/templates/post.html&#x27;</span>)

camp.<span class="hljs-title function_">path</span>(<span class="hljs-string">&#x27;/blog/:post.html&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  res.<span class="hljs-title function_">template</span>({
    <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;Hello world&#x27;</span>
  }, tpl)
})
</code></pre>
<h3 id="implicit-templates">Implicit templates</h3>

<pre><code class="js">camp.<span class="hljs-title function_">path</span>(<span class="hljs-string">&#x27;blog.html&#x27;</span>)
</code></pre>
<p>Uses <code>blog.html</code> as a template.</p>
<p>See: <a href="https://github.com/espadrine/sc/blob/master/doc/Readme.md#templates">Templates</a></p>
<h2 id="advanced-features">Advanced features</h2>
<h3 id="web-sockets">Web sockets</h3>

<pre><code class="js">camp.<span class="hljs-title function_">ws</span>(<span class="hljs-string">&#x27;/path&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">socket</span>) =&gt;</span> { ··· })
</code></pre>

<pre><code class="js">camp.<span class="hljs-property">wsChannels</span>[path]
</code></pre>

<pre><code class="js">camp.<span class="hljs-title function_">wsBroadcast</span>(<span class="hljs-string">&#x27;/path&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
})
</code></pre>
<p>Sorry I don&#39;t completely understand this yet, but check it out in their docs.</p>
<p>See: <a href="https://github.com/espadrine/sc/blob/master/doc/Readme.md#websocket">WebSocket</a></p>

</div>
</body>  
</html>