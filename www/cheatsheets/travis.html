<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Travis.yml cheatsheet</title>
  <link href="s/main.css" rel="stylesheet" />
  <script src="s/main.js"></script>
</head>

<body onload="start()">
  <div class="breadcrumbs"><a href="/">Home</a> / <a href="index.html">cheatsheets</a> / Travis.yml cheatsheet</div>
  <div class="edit">
      <a href="https://github.com/kjk/blog/blob/master/www/cheatsheets/devhints\travis.md" >edit</a>
  </div>
  <div class="toc">
<b>Reference</b>: <a href="#node-js">Node.js</a>, <a href="#ruby">Ruby</a>, <a href="#build-lifecycle">Build lifecycle</a>, <a href="#branches">Branches</a>, <a href="#environment-vars">Environment vars</a>, <a href="#custom-test-command">Custom test command</a>, <a href="#branches1">Branches</a>, <a href="#apt-packages">Apt packages</a>, <a href="#etc">Etc</a>, <a href="#references">References</a><br></div>


  <div id="start"></div>
  <div id="wrapped-content"></div>
<div id="content">
<h2 id="reference">Reference</h2>
<h3 id="node-js">Node.js</h3>

<pre><code class="yaml"><span class="hljs-attr">language:</span> <span class="hljs-string">node_js</span>
<span class="hljs-attr">node_js:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;4&#x27;</span>
</code></pre>
<p>Defaults install to <code>npm install</code>, and defaults test to <code>npm test</code>.</p>
<h3 id="ruby">Ruby</h3>

<pre><code class="yaml"><span class="hljs-attr">language:</span> <span class="hljs-string">ruby</span>
<span class="hljs-attr">rvm:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-number">2.0</span><span class="hljs-number">.0</span>
  <span class="hljs-bullet">-</span> <span class="hljs-number">1.9</span><span class="hljs-number">.3</span>
  <span class="hljs-bullet">-</span> <span class="hljs-number">1.8</span><span class="hljs-number">.7</span>
</code></pre>
<p>Defaults install to <code>bundle install</code>, defaults test to <code>rake</code>.</p>
<h3 id="build-lifecycle">Build lifecycle</h3>

<table>
<thead>
<tr>
<th>Lifecycle</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>before_install</code></td>
</tr>
<tr>
<td><code>install</code></td>
</tr>
<tr>
<td>---</td>
</tr>
<tr>
<td><code>before_script</code></td>
</tr>
<tr>
<td><code>script</code></td>
</tr>
<tr>
<td>---</td>
</tr>
<tr>
<td><code>after_success</code> or <code>after_failure</code></td>
</tr>
<tr>
<td><code>after_script</code></td>
</tr>
<tr>
<td>---</td>
</tr>
<tr>
<td><code>before_deploy</code> (optional)</td>
</tr>
<tr>
<td><code>deploy</code> (optional)</td>
</tr>
<tr>
<td><code>after_deploy</code> (optional)</td>
</tr>
</tbody>
</table>
<h3 id="branches">Branches</h3>

<pre><code class="yaml"><span class="hljs-attr">branches:</span>
  <span class="hljs-attr">except:</span> [<span class="hljs-string">&#x27;..&#x27;</span>]
  <span class="hljs-attr">only:</span> [<span class="hljs-string">&#x27;master&#x27;</span>]
</code></pre>
<h3 id="environment-vars">Environment vars</h3>

<pre><code class="yaml"><span class="hljs-attr">env:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;rack=master&#x27;</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;rack=1.3.4&#x27;</span>
</code></pre>
<h3 id="custom-test-command">Custom test command</h3>

<pre><code class="yaml"><span class="hljs-attr">script:</span> <span class="hljs-string">make</span> <span class="hljs-string">test</span>
<span class="hljs-attr">before_script:</span> <span class="hljs-string">make</span> <span class="hljs-string">pretest</span>
<span class="hljs-attr">after_script:</span>  <span class="hljs-string">make</span> <span class="hljs-string">clean</span>

<span class="hljs-attr">before_script:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">make</span> <span class="hljs-string">pretest1</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">make</span> <span class="hljs-string">pretest2</span>
</code></pre>
<h3 id="branches1">Branches</h3>

<pre><code class="yaml"><span class="hljs-attr">branches:</span>
  <span class="hljs-attr">except:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">legacy</span>

  <span class="hljs-attr">only:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">gh-pages</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">/^deploy/</span>
</code></pre>
<h3 id="apt-packages">Apt packages</h3>

<pre><code class="yaml"><span class="hljs-attr">before_install:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">sudo</span> <span class="hljs-string">apt-get</span> <span class="hljs-string">update</span> <span class="hljs-string">-q</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">sudo</span> <span class="hljs-string">apt-get</span> <span class="hljs-string">install</span> <span class="hljs-string">gcc-4.8</span> <span class="hljs-string">-y</span>
</code></pre>
<p><a href="https://docs.travis-ci.com/user/installing-dependencies/">https://docs.travis-ci.com/user/installing-dependencies/</a></p>
<h3 id="etc">Etc</h3>

<pre><code class="yaml"><span class="hljs-attr">gemfile:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">gemfiles/Gemfile.rails-2.3.x</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">gemfiles/Gemfile.rails-3.0.x</span>
</code></pre>
<h3 id="references">References</h3>

<ul>
<li><a href="http://about.travis-ci.org/docs/user/build-configuration/">http://about.travis-ci.org/docs/user/build-configuration/</a></li>
<li><a href="http://about.travis-ci.org/docs/user/languages/javascript-with-nodejs/">http://about.travis-ci.org/docs/user/languages/javascript-with-nodejs/</a></li>
<li><a href="http://about.travis-ci.org/docs/user/languages/ruby/">http://about.travis-ci.org/docs/user/languages/ruby/</a></li>
</ul>

</div>
</body>  
</html>