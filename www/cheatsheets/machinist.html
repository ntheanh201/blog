<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Machinist cheatsheet</title>
  <link href="s/main.css" rel="stylesheet" />
  <script src="s/main.js"></script>
</head>

<body onload="start()">
  <div class="breadcrumbs"><a href="/">Home</a> / <a href="index.html">cheatsheets</a> / Machinist cheatsheet</div>
  <div class="edit">
      <a href="https://github.com/kjk/blog/blob/master/www/cheatsheets/devhints\machinist.md" >edit</a>
  </div>
  <div class="toc">
<b>Main</b>: <a href="#installing">Installing</a>, <a href="#building-objects">Building objects</a>, <a href="#defining-blueprints">Defining blueprints</a>, <a href="#associations">Associations</a>, <a href="#references">References</a><br></div>


  <div id="start"></div>
  <div id="wrapped-content"></div>
<div id="content">
<h3 id="installing">Installing</h3>

<pre><code><span class="hljs-meta"># Gemfile</span>
gem <span class="hljs-string">&#x27;machinist&#x27;</span>, <span class="hljs-string">&#x27;&gt;= 2.0.0.beta2&#x27;</span>, <span class="hljs-keyword">group</span>: <span class="hljs-string">&#x27;test&#x27;</span>

<span class="hljs-meta"># ~$ bundle</span>
<span class="hljs-meta"># ~$ rails generate machinist:install</span>
</code></pre>
<h3 id="building-objects">Building objects</h3>

<pre><code>User.<span class="hljs-built_in">make</span>

# <span class="hljs-string">`make`</span> builds it, and <span class="hljs-string">`make!`</span> builds+saves it
User.<span class="hljs-built_in">make</span>!
User.<span class="hljs-built_in">make</span>! name: <span class="hljs-string">&quot;David&quot;</span>
User.<span class="hljs-built_in">make</span>!(:admin)
</code></pre>
<h3 id="defining-blueprints">Defining blueprints</h3>

<pre><code><span class="hljs-keyword">User</span>.blueprint <span class="hljs-keyword">do</span>
  <span class="hljs-type">name</span>  { &quot;User #{sn}&quot; }
  email { &quot;user-#{sn}@example.com&quot; }
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">User</span>.blueprint(:<span class="hljs-keyword">admin</span>) <span class="hljs-keyword">do</span>
  <span class="hljs-type">name</span>  { &quot;Admin User #{sn}&quot; }
  <span class="hljs-keyword">admin</span> { <span class="hljs-keyword">true</span> }
<span class="hljs-keyword">end</span>
</code></pre>
<h3 id="associations">Associations</h3>

<pre><code><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Post</span>.</span></span>blueprint <span class="hljs-keyword">do</span>
  author { <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">User</span>.</span></span>make }

  comments(<span class="hljs-number">3</span>)    # Makes <span class="hljs-number">3</span> comments (has_many<span class="hljs-operator"> / </span>habtm)

  author         # autodetect (Assumes there&#x27;s <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">User</span>.</span></span>blueprint)

<span class="hljs-keyword">end</span>
</code></pre>
<h3 id="references">References</h3>

<ul>
<li><a href="https://github.com/notahat/machinist">https://github.com/notahat/machinist</a></li>
</ul>

</div>
</body>  
</html>