<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Sequelize cheatsheet</title>
  <link href="s/main.css" rel="stylesheet" />
  <script src="s/main.js"></script>
</head>

<body onload="start()">
  <div class="breadcrumbs"><a href="/">Home</a> / <a href="index.html">cheatsheets</a> / Sequelize cheatsheet</div>
  <div class="edit">
      <a href="https://github.com/kjk/blog/blob/master/www/cheatsheets/devhints\sequelize.md" >edit</a>
  </div>
  <div class="toc">
<b>Main</b>: <a href="#api">API</a>, <a href="#models">Models</a>, <a href="#finders">Finders</a>, <a href="#build">Build</a><br></div>


  <div id="start"></div>
  <div id="wrapped-content"></div>
<div id="content">
<h3 id="api">API</h3>

<pre><code>sequelize.sync<span class="hljs-params">()</span><span class="hljs-string">.done</span> -&gt; <span class="hljs-string">...</span>
</code></pre>
<h3 id="models">Models</h3>

<pre><code><span class="hljs-string">Project</span> <span class="hljs-string">=</span> <span class="hljs-string">sequelize.define(&#x27;Project&#x27;,</span> {
  <span class="hljs-attr">title:</span> <span class="hljs-string">Sequelize.STRING</span>,
  <span class="hljs-attr">description:</span> <span class="hljs-string">Sequelize.TEXT</span>,
  <span class="hljs-attr">myDate:</span> { <span class="hljs-attr">type:</span> <span class="hljs-string">Sequelize.DATE</span>, <span class="hljs-attr">defaultValue:</span> <span class="hljs-string">Sequelize.NOW</span> },
  <span class="hljs-attr">title:</span> { <span class="hljs-attr">type:</span> <span class="hljs-string">Sequelize.STRING</span>, <span class="hljs-attr">allowNull:</span> <span class="hljs-literal">false</span> },
  <span class="hljs-attr">id:</span> { <span class="hljs-attr">type:</span> <span class="hljs-string">Sequelize.INTEGER</span>, <span class="hljs-attr">autoIncrement:</span> <span class="hljs-literal">true</span>, <span class="hljs-attr">primaryKey:</span> <span class="hljs-literal">true</span> },
}<span class="hljs-string">,</span> {
  <span class="hljs-attr">classMethods:</span> { <span class="hljs-string">...</span> },
  <span class="hljs-attr">instanceMethods:</span> { <span class="hljs-string">...</span> }
}<span class="hljs-string">);</span>

<span class="hljs-string">Project.hasMany(Task)</span>
</code></pre>
<h3 id="finders">Finders</h3>

<pre><code><span class="hljs-keyword">Project</span>.<span class="hljs-keyword">find</span>(<span class="hljs-number">123</span>).success (<span class="hljs-keyword">project</span>) -&gt;

<span class="hljs-keyword">Project</span>.<span class="hljs-keyword">find</span>({ where: {title: <span class="hljs-string">&#x27;Hello&#x27;</span>} })
<span class="hljs-keyword">Project</span>.<span class="hljs-keyword">find</span>({ where: {id: [<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]} })
<span class="hljs-keyword">Project</span>.<span class="hljs-keyword">find</span>({ where: [<span class="hljs-string">&quot;id &gt; ?&quot;</span>, <span class="hljs-number">25</span>] })

<span class="hljs-keyword">Project</span>.<span class="hljs-keyword">find</span>(
  where: {title: <span class="hljs-string">&#x27;a&#x27;</span>}
  attributes: [<span class="hljs-string">&#x27;id&#x27;</span>, [<span class="hljs-string">&#x27;name&#x27;</span>, <span class="hljs-string">&#x27;title&#x27;</span>]]
)

.findOrCreate(...)

.<span class="hljs-keyword">findAll</span>
.<span class="hljs-keyword">findAll</span>({ where: ... })
.<span class="hljs-keyword">findAll</span>({ order: <span class="hljs-string">&#x27;title DESC&#x27;</span> })
.<span class="hljs-keyword">findAll</span>({ limit: <span class="hljs-number">10</span> })
.<span class="hljs-keyword">findAll</span>({ offset: <span class="hljs-number">10</span>, limit: <span class="hljs-number">2</span> })

.<span class="hljs-keyword">count</span>()
</code></pre>
<h3 id="build">Build</h3>

<pre><code>item = Project<span class="hljs-selector-class">.build</span>({ ... })

item<span class="hljs-selector-class">.title</span> = <span class="hljs-string">&#x27;...&#x27;</span>

item<span class="hljs-selector-class">.save</span>()<span class="hljs-selector-class">.success</span> (item) -&gt;

item<span class="hljs-selector-class">.updateAttributes</span>({ title: <span class="hljs-string">&#x27;...&#x27;</span> })

item<span class="hljs-selector-class">.destroy</span>()<span class="hljs-selector-class">.success</span> -&gt;

item.values
</code></pre>

</div>
</body>  
</html>