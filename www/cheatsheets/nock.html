<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Nock cheatsheet</title>
  <link href="s/main.css" rel="stylesheet" />
  <script src="s/main.js"></script>
</head>

<body onload="start()">
  <div class="breadcrumbs"><a href="/">Home</a> / <a href="index.html">cheatsheets</a> / Nock cheatsheet</div>
  <div class="edit">
      <a href="https://github.com/kjk/blog/blob/master/www/cheatsheets/devhints\nock.md" >edit</a>
  </div>
  <div class="toc">
<b>Main</b>: <a href="#nock">Nock</a>, <a href="#filtering">Filtering</a><br></div>


  <div id="start"></div>
  <div id="wrapped-content"></div>
<div id="content">
<h3 id="nock">Nock</h3>

<pre><code class="js">scope = <span class="hljs-title function_">nock</span>(<span class="hljs-string">&#x27;http://foo.com&#x27;</span>)
scope = <span class="hljs-title function_">nock</span>(<span class="hljs-string">&#x27;http://foo.com&#x27;</span>, { <span class="hljs-attr">allowUnmocked</span>: <span class="hljs-literal">true</span> })
</code></pre>

<pre><code class="js"><span class="hljs-title function_">nock</span>(<span class="hljs-string">&#x27;http://foo.com&#x27;</span>)
  .<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/user&#x27;</span>)
  .<span class="hljs-title function_">reply</span>(<span class="hljs-number">200</span>, { <span class="hljs-attr">id</span>: <span class="hljs-number">1234</span> })
</code></pre>
<h3 id="filtering">Filtering</h3>

<pre><code class="js"><span class="hljs-title function_">nock</span>(<span class="hljs-string">&#x27;http://foo.com&#x27;</span>)
  .<span class="hljs-title function_">filteringPath</span>(<span class="hljs-regexp">/[&amp;\?]token=[^&amp;]*/g</span>, <span class="hljs-string">&#x27;&#x27;</span>)
  .<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/user&#x27;</span>)

<span class="hljs-comment">// catches &quot;/user?token=...&quot; as well</span>
</code></pre>

</div>
</body>  
</html>