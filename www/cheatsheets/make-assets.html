<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Make for assets cheatsheet</title>
  <link href="s/main.css" rel="stylesheet" />
  <script src="s/main.js"></script>
</head>

<body onload="start()">
  <div class="breadcrumbs"><a href="/">Home</a> / <a href="index.html">cheatsheets</a> / Make for assets cheatsheet</div>
  <div class="edit">
      <a href="https://github.com/kjk/blog/blob/master/www/cheatsheets/devhints\make-assets.md" >edit</a>
  </div>
  <div class="toc">
<a href="#basic-compiling">Basic compiling</a><br>
<a href="#stylus-autoprefixer">Stylus + Autoprefixer</a><br>
<a href="#hint">Hint</a><br>
<a href="#watching">Watching</a><br>
<a href="#browserify">Browserify</a><br></div>


  <div id="start"></div>
  <div id="wrapped-content"></div>
<div id="content">
<h2 id="basic-compiling">Basic compiling</h2>

<pre><code class="makefile">bin := ./node_modules/.bin

<span class="hljs-section">all: build/foo.js</span>

<span class="hljs-section">build/%.js: src/%.coffee</span>
    @<span class="hljs-variable">$(bin)</span>/coffee &lt; <span class="hljs-variable">$^</span> &gt; <span class="hljs-variable">$@</span>
</code></pre>
<h2 id="stylus-autoprefixer">Stylus + Autoprefixer</h2>

<pre><code>bin := ./node_modules/.bin
stylus := <span class="hljs-variable">$(bin)</span>/stylus
autoprefixer := <span class="hljs-variable">$(bin)</span>/autoprefixer
styl_files := <span class="hljs-variable">$(<span class="hljs-built_in">shell</span> find web/ -name &quot;*.styl&quot;)</span>

<span class="hljs-section">all: public/app.css</span>

<span class="hljs-section">public/app.css: css/app.styl</span>

<span class="hljs-section">%.css: %.styl <span class="hljs-variable">$(styl_files)</span></span>
    @<span class="hljs-variable">$(stylus)</span> <span class="hljs-variable">$&lt;</span> | <span class="hljs-variable">$(autoprefixer)</span> -b <span class="hljs-string">&quot;&gt; 1%&quot;</span> &gt; <span class="hljs-variable">$@</span>
</code></pre>
<h2 id="hint">Hint</h2>

<pre><code><span class="hljs-section">hint:</span>
   <span class="hljs-variable">$(js_files)</span>
</code></pre>
<h2 id="watching">Watching</h2>

<pre><code>watch:
    @<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;... watching for changes&quot;</span>
    @<span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span> make -s; sleep 1; <span class="hljs-keyword">done</span>
</code></pre>
<h2 id="browserify">Browserify</h2>

<pre><code>js_files := $(shell <span class="hljs-keyword">find</span> web/ -name <span class="hljs-string">&quot;*.js&quot;</span>)

<span class="hljs-keyword">public</span><span class="hljs-regexp">/app.js: web/</span>app.js
<span class="hljs-keyword">public</span><span class="hljs-regexp">/vendor.js: web/</span>vendor.js

<span class="hljs-keyword">public</span><span class="hljs-regexp">/%.js: web/</span>%.js $(js_files)
    $(browserify) -t [ cssify -x .css ] $&lt; &gt; $@
</code></pre>

</div>
</body>  
</html>