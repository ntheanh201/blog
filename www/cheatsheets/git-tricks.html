<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Git tricks cheatsheet</title>
  <link href="s/main.css" rel="stylesheet" />
  <script src="s/main.js"></script>
</head>

<body onload="start()">
  <div class="breadcrumbs"><a href="/">Home</a> / <a href="index.html">cheatsheets</a> / Git tricks cheatsheet</div>
  <div class="edit">
      <a href="https://github.com/kjk/blog/blob/master/www/cheatsheets/devhints\git-tricks.md" >edit</a>
  </div>
  <div class="toc">
<a href="#refs">Refs</a><br>
<a href="#branches">Branches</a><br>
<a href="#collaboration">Collaboration</a><br>
<a href="#submodules">Submodules</a><br>
<b>Diff</b>: <a href="#diff-with-stats">Diff with stats</a>, <a href="#just-filenames">Just filenames</a><br>
<a href="#log-options">Log options</a><br>
<b>Misc</b>: <a href="#cherry-pick">Cherry pick</a>, <a href="#misc">Misc</a><br>
<a href="#short-log">Short log</a><br>
<b>Bisect</b>: <a href="#manual-bisection">Manual bisection</a><br>
<a href="#searching">Searching</a><br>
<a href="#gpg-signing">GPG Signing</a><br></div>


  <div id="start"></div>
  <div id="wrapped-content"></div>
<div id="content">
<h2 id="refs">Refs</h2>

<pre><code><span class="hljs-attribute">HEAD</span>^       # <span class="hljs-number">1</span> commit before head
<span class="hljs-attribute">HEAD</span>^^      # <span class="hljs-number">2</span> commits before head
<span class="hljs-attribute">HEAD</span>~<span class="hljs-number">5</span>      # <span class="hljs-number">5</span> commits before head
</code></pre>
<h2 id="branches">Branches</h2>

<pre><code><span class="hljs-comment"># create a new branch</span>
  git checkout -<span class="hljs-keyword">b </span>$<span class="hljs-keyword">branchname
</span>  git push <span class="hljs-keyword">origin </span>$<span class="hljs-keyword">branchname </span>--set-upstream

<span class="hljs-comment"># get a remote branch</span>
  git fetch <span class="hljs-keyword">origin
</span>  git checkout --track <span class="hljs-keyword">origin/$branchname
</span>
<span class="hljs-comment"># delete local remote-tracking branches (lol)</span>
  git remote prune <span class="hljs-keyword">origin
</span>
<span class="hljs-comment"># list merged branches</span>
  git <span class="hljs-keyword">branch </span>-a --merged

<span class="hljs-comment"># delete remote branch</span>
  git push <span class="hljs-keyword">origin </span>:$<span class="hljs-keyword">branchname
</span>
<span class="hljs-comment"># go back to previous branch</span>
  git checkout -
</code></pre>
<h2 id="collaboration">Collaboration</h2>

<pre><code><span class="hljs-comment"># Rebase your changes on top of the remote master</span>
  <span class="hljs-attribute">git</span> pull --rebase upstream master

<span class="hljs-comment"># Squash multiple commits into one for a cleaner git log</span>
<span class="hljs-comment"># (on the following screen change the word pick to either &#x27;f&#x27; or &#x27;s&#x27;)</span>
  git rebase -i <span class="hljs-variable">$commit_ref</span>
</code></pre>
<h2 id="submodules">Submodules</h2>

<pre><code><span class="hljs-comment"># Import .gitmodules</span>
  git <span class="hljs-keyword">submodule </span>init

<span class="hljs-comment"># Clone missing submodules, and checkout commits</span>
  git <span class="hljs-keyword">submodule </span>update --init --recursive

<span class="hljs-comment"># Update remote URLs in .gitmodules</span>
<span class="hljs-comment"># (Use when you changed remotes in submodules)</span>
  git <span class="hljs-keyword">submodule </span><span class="hljs-keyword">sync</span>
</code></pre>
<h2 id="diff">Diff</h2>
<h3 id="diff-with-stats">Diff with stats</h3>

<pre><code><span class="hljs-attribute">git</span> diff --stat
<span class="hljs-attribute">app</span>/a.txt    | <span class="hljs-number">2</span> +-
<span class="hljs-attribute">app</span>/b.txt    | <span class="hljs-number">8</span> ++----
<span class="hljs-attribute">2</span> files changed, <span class="hljs-number">10</span> insertions(+), <span class="hljs-number">84</span> deletions(-)
</code></pre>
<h3 id="just-filenames">Just filenames</h3>

<pre><code>git diff <span class="hljs-comment">--summary</span>
</code></pre>
<h2 id="log-options">Log options</h2>

<pre><code><span class="hljs-comment">--oneline</span>
  e11e9f9 Commit message here

<span class="hljs-comment">--decorate</span>
  shows <span class="hljs-string">&quot;(origin/master)&quot;</span>

<span class="hljs-comment">--graph</span>
  shows graph <span class="hljs-keyword">lines</span>

<span class="hljs-comment">--date=relative</span>
  <span class="hljs-string">&quot;2 hours ago&quot;</span>
</code></pre>
<h2 id="misc">Misc</h2>
<h3 id="cherry-pick">Cherry pick</h3>

<pre><code><span class="hljs-attribute">git</span> rebase <span class="hljs-number">76</span>acada^
</code></pre>
<h3 id="misc">Misc</h3>

<pre><code># <span class="hljs-keyword">get</span> <span class="hljs-keyword">current</span> sha1 (?)
  git <span class="hljs-keyword">show</span>-<span class="hljs-keyword">ref</span> HEAD -s

# <span class="hljs-keyword">show</span> single <span class="hljs-keyword">commit</span> <span class="hljs-keyword">info</span>
  git <span class="hljs-keyword">log</span> <span class="hljs-number">-1</span> f5a960b5

# Go back up <span class="hljs-keyword">to</span> root directory
  cd &quot;$(git rev-parse --show-top-level)&quot;
</code></pre>
<h2 id="short-log">Short log</h2>

<pre><code> $ git shortlog
 $ git shortlog HEAD<span class="hljs-operator">~</span><span class="hljs-number">20.</span>.    # <span class="hljs-keyword">last</span> <span class="hljs-number">20</span> commits

 James Dean (<span class="hljs-number">1</span>):
     <span class="hljs-keyword">Commit</span> here
     <span class="hljs-keyword">Commit</span> there

 Frank Sinatra (<span class="hljs-number">5</span>):
     Another <span class="hljs-keyword">commit</span>
     This other <span class="hljs-keyword">commit</span>
</code></pre>
<h2 id="bisect">Bisect</h2>

<pre><code>git bisect start HEAD HEAD~<span class="hljs-number">6</span>
git bisect run npm test
git checkout refs<span class="hljs-regexp">/bisect/</span>bad   <span class="hljs-comment"># this is where it screwed up</span>
git bisect reset
</code></pre>
<h3 id="manual-bisection">Manual bisection</h3>

<pre><code>git <span class="hljs-keyword">bisect </span>start
git <span class="hljs-keyword">bisect </span>good   <span class="hljs-comment"># current version is good</span>

git checkout HEAD~<span class="hljs-number">8</span>
npm test          <span class="hljs-comment"># see if it&#x27;s good</span>
git <span class="hljs-keyword">bisect </span><span class="hljs-keyword">bad </span>   <span class="hljs-comment"># current version is bad</span>

git <span class="hljs-keyword">bisect </span>reset  <span class="hljs-comment"># abort</span>
</code></pre>
<h2 id="searching">Searching</h2>

<pre><code>git <span class="hljs-keyword">log</span> --<span class="hljs-keyword">grep</span>=<span class="hljs-string">&quot;fixes things&quot;</span>  <span class="hljs-comment"># search in commit messages</span>
git <span class="hljs-keyword">log</span> -S<span class="hljs-string">&quot;window.alert&quot;</span>       <span class="hljs-comment"># search in code</span>
git <span class="hljs-keyword">log</span> -G<span class="hljs-string">&quot;foo.*&quot;</span>              <span class="hljs-comment"># search in code (regex)</span>
</code></pre>
<h2 id="gpg-signing">GPG Signing</h2>

<pre><code>git config <span class="hljs-keyword">set</span> <span class="hljs-keyword">user</span>.signingkey &lt;GPG KEY ID&gt;       # Sets GPG key <span class="hljs-keyword">to</span> use <span class="hljs-keyword">for</span> signing

git <span class="hljs-keyword">commit</span> -m &quot;Implement feature Y&quot; <span class="hljs-comment">--gpg-sign    # Or -S, GPG signs commit</span>

git config <span class="hljs-keyword">set</span> <span class="hljs-keyword">commit</span>.gpgsign <span class="hljs-keyword">true</span>                # Sign commits <span class="hljs-keyword">by</span> <span class="hljs-keyword">default</span>
git <span class="hljs-keyword">commit</span> -m &quot;Implement feature Y&quot; <span class="hljs-comment">--no-gpg-sign # Do not sign</span>
</code></pre>

</div>
</body>  
</html>